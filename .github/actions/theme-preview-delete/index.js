var xu=Object.create;var Un=Object.defineProperty;var $u=Object.getOwnPropertyDescriptor;var zu=Object.getOwnPropertyNames;var ju=Object.getPrototypeOf,Nu=Object.prototype.hasOwnProperty;var xt=(r,t)=>()=>(r&&(t=r(r=0)),t);var k=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),Hu=(r,t)=>{for(var o in t)Un(r,o,{get:t[o],enumerable:!0})},Vu=(r,t,o,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of zu(t))!Nu.call(r,s)&&s!==o&&Un(r,s,{get:()=>t[s],enumerable:!(i=$u(t,s))||i.enumerable});return r};var Pe=(r,t,o)=>(o=r!=null?xu(ju(r)):{},Vu(t||!r||!r.__esModule?Un(o,"default",{value:r,enumerable:!0}):o,r));var qr=k(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.toCommandProperties=bt.toCommandValue=void 0;function Yu(r){return r==null?"":typeof r=="string"||r instanceof String?r:JSON.stringify(r)}bt.toCommandValue=Yu;function Gu(r){return Object.keys(r).length?{title:r.title,file:r.file,line:r.startLine,endLine:r.endLine,col:r.startColumn,endColumn:r.endColumn}:{}}bt.toCommandProperties=Gu});var xi=k(ae=>{"use strict";var Qu=ae&&ae.__createBinding||(Object.create?function(r,t,o,i){i===void 0&&(i=o),Object.defineProperty(r,i,{enumerable:!0,get:function(){return t[o]}})}:function(r,t,o,i){i===void 0&&(i=o),r[i]=t[o]}),Ju=ae&&ae.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),Ku=ae&&ae.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var o in r)o!=="default"&&Object.hasOwnProperty.call(r,o)&&Qu(t,r,o);return Ju(t,r),t};Object.defineProperty(ae,"__esModule",{value:!0});ae.issue=ae.issueCommand=void 0;var Zu=Ku(require("os")),Ii=qr();function Ui(r,t,o){let i=new xn(r,t,o);process.stdout.write(i.toString()+Zu.EOL)}ae.issueCommand=Ui;function Xu(r,t=""){Ui(r,{},t)}ae.issue=Xu;var Mi="::",xn=class{constructor(t,o,i){t||(t="missing.command"),this.command=t,this.properties=o,this.message=i}toString(){let t=Mi+this.command;if(this.properties&&Object.keys(this.properties).length>0){t+=" ";let o=!0;for(let i in this.properties)if(this.properties.hasOwnProperty(i)){let s=this.properties[i];s&&(o?o=!1:t+=",",t+=`${i}=${tl(s)}`)}}return t+=`${Mi}${el(this.message)}`,t}};function el(r){return Ii.toCommandValue(r).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function tl(r){return Ii.toCommandValue(r).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}});var zn=k($n=>{"use strict";Object.defineProperty($n,"__esModule",{value:!0});$n.default=ol;var rl=nl(require("crypto"));function nl(r){return r&&r.__esModule?r:{default:r}}var Dr=new Uint8Array(256),Br=Dr.length;function ol(){return Br>Dr.length-16&&(rl.default.randomFillSync(Dr),Br=0),Dr.slice(Br,Br+=16)}});var $i=k(kr=>{"use strict";Object.defineProperty(kr,"__esModule",{value:!0});kr.default=void 0;var il=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;kr.default=il});var $t=k(Lr=>{"use strict";Object.defineProperty(Lr,"__esModule",{value:!0});Lr.default=void 0;var al=sl($i());function sl(r){return r&&r.__esModule?r:{default:r}}function ul(r){return typeof r=="string"&&al.default.test(r)}var ll=ul;Lr.default=ll});var zt=k(Wr=>{"use strict";Object.defineProperty(Wr,"__esModule",{value:!0});Wr.default=void 0;var fl=cl($t());function cl(r){return r&&r.__esModule?r:{default:r}}var N=[];for(let r=0;r<256;++r)N.push((r+256).toString(16).substr(1));function dl(r,t=0){let o=(N[r[t+0]]+N[r[t+1]]+N[r[t+2]]+N[r[t+3]]+"-"+N[r[t+4]]+N[r[t+5]]+"-"+N[r[t+6]]+N[r[t+7]]+"-"+N[r[t+8]]+N[r[t+9]]+"-"+N[r[t+10]]+N[r[t+11]]+N[r[t+12]]+N[r[t+13]]+N[r[t+14]]+N[r[t+15]]).toLowerCase();if(!(0,fl.default)(o))throw TypeError("Stringified UUID is invalid");return o}var hl=dl;Wr.default=hl});var Ni=k(Fr=>{"use strict";Object.defineProperty(Fr,"__esModule",{value:!0});Fr.default=void 0;var pl=ji(zn()),ml=ji(zt());function ji(r){return r&&r.__esModule?r:{default:r}}var zi,jn,Nn=0,Hn=0;function bl(r,t,o){let i=t&&o||0,s=t||new Array(16);r=r||{};let l=r.node||zi,f=r.clockseq!==void 0?r.clockseq:jn;if(l==null||f==null){let _=r.random||(r.rng||pl.default)();l==null&&(l=zi=[_[0]|1,_[1],_[2],_[3],_[4],_[5]]),f==null&&(f=jn=(_[6]<<8|_[7])&16383)}let m=r.msecs!==void 0?r.msecs:Date.now(),h=r.nsecs!==void 0?r.nsecs:Hn+1,d=m-Nn+(h-Hn)/1e4;if(d<0&&r.clockseq===void 0&&(f=f+1&16383),(d<0||m>Nn)&&r.nsecs===void 0&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Nn=m,Hn=h,jn=f,m+=122192928e5;let y=((m&268435455)*1e4+h)%4294967296;s[i++]=y>>>24&255,s[i++]=y>>>16&255,s[i++]=y>>>8&255,s[i++]=y&255;let g=m/4294967296*1e4&268435455;s[i++]=g>>>8&255,s[i++]=g&255,s[i++]=g>>>24&15|16,s[i++]=g>>>16&255,s[i++]=f>>>8|128,s[i++]=f&255;for(let _=0;_<6;++_)s[i+_]=l[_];return t||(0,ml.default)(s)}var yl=bl;Fr.default=yl});var Vn=k(Mr=>{"use strict";Object.defineProperty(Mr,"__esModule",{value:!0});Mr.default=void 0;var _l=gl($t());function gl(r){return r&&r.__esModule?r:{default:r}}function Sl(r){if(!(0,_l.default)(r))throw TypeError("Invalid UUID");let t,o=new Uint8Array(16);return o[0]=(t=parseInt(r.slice(0,8),16))>>>24,o[1]=t>>>16&255,o[2]=t>>>8&255,o[3]=t&255,o[4]=(t=parseInt(r.slice(9,13),16))>>>8,o[5]=t&255,o[6]=(t=parseInt(r.slice(14,18),16))>>>8,o[7]=t&255,o[8]=(t=parseInt(r.slice(19,23),16))>>>8,o[9]=t&255,o[10]=(t=parseInt(r.slice(24,36),16))/1099511627776&255,o[11]=t/4294967296&255,o[12]=t>>>24&255,o[13]=t>>>16&255,o[14]=t>>>8&255,o[15]=t&255,o}var wl=Sl;Mr.default=wl});var Yn=k(Ke=>{"use strict";Object.defineProperty(Ke,"__esModule",{value:!0});Ke.default=El;Ke.URL=Ke.DNS=void 0;var Rl=Hi(zt()),vl=Hi(Vn());function Hi(r){return r&&r.__esModule?r:{default:r}}function Tl(r){r=unescape(encodeURIComponent(r));let t=[];for(let o=0;o<r.length;++o)t.push(r.charCodeAt(o));return t}var Vi="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Ke.DNS=Vi;var Yi="6ba7b811-9dad-11d1-80b4-00c04fd430c8";Ke.URL=Yi;function El(r,t,o){function i(s,l,f,m){if(typeof s=="string"&&(s=Tl(s)),typeof l=="string"&&(l=(0,vl.default)(l)),l.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let h=new Uint8Array(16+s.length);if(h.set(l),h.set(s,l.length),h=o(h),h[6]=h[6]&15|t,h[8]=h[8]&63|128,f){m=m||0;for(let d=0;d<16;++d)f[m+d]=h[d];return f}return(0,Rl.default)(h)}try{i.name=r}catch{}return i.DNS=Vi,i.URL=Yi,i}});var Gi=k(Ir=>{"use strict";Object.defineProperty(Ir,"__esModule",{value:!0});Ir.default=void 0;var Pl=Al(require("crypto"));function Al(r){return r&&r.__esModule?r:{default:r}}function Cl(r){return Array.isArray(r)?r=Buffer.from(r):typeof r=="string"&&(r=Buffer.from(r,"utf8")),Pl.default.createHash("md5").update(r).digest()}var Ol=Cl;Ir.default=Ol});var Ji=k(Ur=>{"use strict";Object.defineProperty(Ur,"__esModule",{value:!0});Ur.default=void 0;var ql=Qi(Yn()),Bl=Qi(Gi());function Qi(r){return r&&r.__esModule?r:{default:r}}var Dl=(0,ql.default)("v3",48,Bl.default),kl=Dl;Ur.default=kl});var Zi=k(xr=>{"use strict";Object.defineProperty(xr,"__esModule",{value:!0});xr.default=void 0;var Ll=Ki(zn()),Wl=Ki(zt());function Ki(r){return r&&r.__esModule?r:{default:r}}function Fl(r,t,o){r=r||{};let i=r.random||(r.rng||Ll.default)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t){o=o||0;for(let s=0;s<16;++s)t[o+s]=i[s];return t}return(0,Wl.default)(i)}var Ml=Fl;xr.default=Ml});var Xi=k($r=>{"use strict";Object.defineProperty($r,"__esModule",{value:!0});$r.default=void 0;var Il=Ul(require("crypto"));function Ul(r){return r&&r.__esModule?r:{default:r}}function xl(r){return Array.isArray(r)?r=Buffer.from(r):typeof r=="string"&&(r=Buffer.from(r,"utf8")),Il.default.createHash("sha1").update(r).digest()}var $l=xl;$r.default=$l});var ta=k(zr=>{"use strict";Object.defineProperty(zr,"__esModule",{value:!0});zr.default=void 0;var zl=ea(Yn()),jl=ea(Xi());function ea(r){return r&&r.__esModule?r:{default:r}}var Nl=(0,zl.default)("v5",80,jl.default),Hl=Nl;zr.default=Hl});var ra=k(jr=>{"use strict";Object.defineProperty(jr,"__esModule",{value:!0});jr.default=void 0;var Vl="00000000-0000-0000-0000-000000000000";jr.default=Vl});var na=k(Nr=>{"use strict";Object.defineProperty(Nr,"__esModule",{value:!0});Nr.default=void 0;var Yl=Gl($t());function Gl(r){return r&&r.__esModule?r:{default:r}}function Ql(r){if(!(0,Yl.default)(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}var Jl=Ql;Nr.default=Jl});var oa=k(pe=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0});Object.defineProperty(pe,"v1",{enumerable:!0,get:function(){return Kl.default}});Object.defineProperty(pe,"v3",{enumerable:!0,get:function(){return Zl.default}});Object.defineProperty(pe,"v4",{enumerable:!0,get:function(){return Xl.default}});Object.defineProperty(pe,"v5",{enumerable:!0,get:function(){return ef.default}});Object.defineProperty(pe,"NIL",{enumerable:!0,get:function(){return tf.default}});Object.defineProperty(pe,"version",{enumerable:!0,get:function(){return rf.default}});Object.defineProperty(pe,"validate",{enumerable:!0,get:function(){return nf.default}});Object.defineProperty(pe,"stringify",{enumerable:!0,get:function(){return of.default}});Object.defineProperty(pe,"parse",{enumerable:!0,get:function(){return af.default}});var Kl=Ae(Ni()),Zl=Ae(Ji()),Xl=Ae(Zi()),ef=Ae(ta()),tf=Ae(ra()),rf=Ae(na()),nf=Ae($t()),of=Ae(zt()),af=Ae(Vn());function Ae(r){return r&&r.__esModule?r:{default:r}}});var ua=k(se=>{"use strict";var sf=se&&se.__createBinding||(Object.create?function(r,t,o,i){i===void 0&&(i=o),Object.defineProperty(r,i,{enumerable:!0,get:function(){return t[o]}})}:function(r,t,o,i){i===void 0&&(i=o),r[i]=t[o]}),uf=se&&se.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),aa=se&&se.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var o in r)o!=="default"&&Object.hasOwnProperty.call(r,o)&&sf(t,r,o);return uf(t,r),t};Object.defineProperty(se,"__esModule",{value:!0});se.prepareKeyValueMessage=se.issueFileCommand=void 0;var ia=aa(require("fs")),Gn=aa(require("os")),lf=oa(),sa=qr();function ff(r,t){let o=process.env[`GITHUB_${r}`];if(!o)throw new Error(`Unable to find environment variable for file command ${r}`);if(!ia.existsSync(o))throw new Error(`Missing file at path: ${o}`);ia.appendFileSync(o,`${sa.toCommandValue(t)}${Gn.EOL}`,{encoding:"utf8"})}se.issueFileCommand=ff;function cf(r,t){let o=`ghadelimiter_${lf.v4()}`,i=sa.toCommandValue(t);if(r.includes(o))throw new Error(`Unexpected input: name should not contain the delimiter "${o}"`);if(i.includes(o))throw new Error(`Unexpected input: value should not contain the delimiter "${o}"`);return`${r}<<${o}${Gn.EOL}${i}${Gn.EOL}${o}`}se.prepareKeyValueMessage=cf});var fa=k(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});yt.checkBypass=yt.getProxyUrl=void 0;function df(r){let t=r.protocol==="https:";if(la(r))return;let o=(()=>t?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY)();if(o)return new URL(o)}yt.getProxyUrl=df;function la(r){if(!r.hostname)return!1;let t=process.env.no_proxy||process.env.NO_PROXY||"";if(!t)return!1;let o;r.port?o=Number(r.port):r.protocol==="http:"?o=80:r.protocol==="https:"&&(o=443);let i=[r.hostname.toUpperCase()];typeof o=="number"&&i.push(`${i[0]}:${o}`);for(let s of t.split(",").map(l=>l.trim().toUpperCase()).filter(l=>l))if(i.some(l=>l===s))return!0;return!1}yt.checkBypass=la});var pa=k(_t=>{"use strict";var td=require("net"),hf=require("tls"),Qn=require("http"),ca=require("https"),pf=require("events"),rd=require("assert"),mf=require("util");_t.httpOverHttp=bf;_t.httpsOverHttp=yf;_t.httpOverHttps=_f;_t.httpsOverHttps=gf;function bf(r){var t=new Ce(r);return t.request=Qn.request,t}function yf(r){var t=new Ce(r);return t.request=Qn.request,t.createSocket=da,t.defaultPort=443,t}function _f(r){var t=new Ce(r);return t.request=ca.request,t}function gf(r){var t=new Ce(r);return t.request=ca.request,t.createSocket=da,t.defaultPort=443,t}function Ce(r){var t=this;t.options=r||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||Qn.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",function(i,s,l,f){for(var m=ha(s,l,f),h=0,d=t.requests.length;h<d;++h){var y=t.requests[h];if(y.host===m.host&&y.port===m.port){t.requests.splice(h,1),y.request.onSocket(i);return}}i.destroy(),t.removeSocket(i)})}mf.inherits(Ce,pf.EventEmitter);Ce.prototype.addRequest=function(t,o,i,s){var l=this,f=Jn({request:t},l.options,ha(o,i,s));if(l.sockets.length>=this.maxSockets){l.requests.push(f);return}l.createSocket(f,function(m){m.on("free",h),m.on("close",d),m.on("agentRemove",d),t.onSocket(m);function h(){l.emit("free",m,f)}function d(y){l.removeSocket(m),m.removeListener("free",h),m.removeListener("close",d),m.removeListener("agentRemove",d)}})};Ce.prototype.createSocket=function(t,o){var i=this,s={};i.sockets.push(s);var l=Jn({},i.proxyOptions,{method:"CONNECT",path:t.host+":"+t.port,agent:!1,headers:{host:t.host+":"+t.port}});t.localAddress&&(l.localAddress=t.localAddress),l.proxyAuth&&(l.headers=l.headers||{},l.headers["Proxy-Authorization"]="Basic "+new Buffer(l.proxyAuth).toString("base64")),$e("making CONNECT request");var f=i.request(l);f.useChunkedEncodingByDefault=!1,f.once("response",m),f.once("upgrade",h),f.once("connect",d),f.once("error",y),f.end();function m(g){g.upgrade=!0}function h(g,_,w){process.nextTick(function(){d(g,_,w)})}function d(g,_,w){if(f.removeAllListeners(),_.removeAllListeners(),g.statusCode!==200){$e("tunneling socket could not be established, statusCode=%d",g.statusCode),_.destroy();var S=new Error("tunneling socket could not be established, statusCode="+g.statusCode);S.code="ECONNRESET",t.request.emit("error",S),i.removeSocket(s);return}if(w.length>0){$e("got illegal response body from proxy"),_.destroy();var S=new Error("got illegal response body from proxy");S.code="ECONNRESET",t.request.emit("error",S),i.removeSocket(s);return}return $e("tunneling connection has established"),i.sockets[i.sockets.indexOf(s)]=_,o(_)}function y(g){f.removeAllListeners(),$e(`tunneling socket could not be established, cause=%s
`,g.message,g.stack);var _=new Error("tunneling socket could not be established, cause="+g.message);_.code="ECONNRESET",t.request.emit("error",_),i.removeSocket(s)}};Ce.prototype.removeSocket=function(t){var o=this.sockets.indexOf(t);if(o!==-1){this.sockets.splice(o,1);var i=this.requests.shift();i&&this.createSocket(i,function(s){i.request.onSocket(s)})}};function da(r,t){var o=this;Ce.prototype.createSocket.call(o,r,function(i){var s=r.request.getHeader("host"),l=Jn({},o.options,{socket:i,servername:s?s.replace(/:.*$/,""):r.host}),f=hf.connect(0,l);o.sockets[o.sockets.indexOf(i)]=f,t(f)})}function ha(r,t,o){return typeof r=="string"?{host:r,port:t,localAddress:o}:r}function Jn(r){for(var t=1,o=arguments.length;t<o;++t){var i=arguments[t];if(typeof i=="object")for(var s=Object.keys(i),l=0,f=s.length;l<f;++l){var m=s[l];i[m]!==void 0&&(r[m]=i[m])}}return r}var $e;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?$e=function(){var r=Array.prototype.slice.call(arguments);typeof r[0]=="string"?r[0]="TUNNEL: "+r[0]:r.unshift("TUNNEL:"),console.error.apply(console,r)}:$e=function(){};_t.debug=$e});var ba=k((od,ma)=>{ma.exports=pa()});var _a=k(W=>{"use strict";var Sf=W&&W.__createBinding||(Object.create?function(r,t,o,i){i===void 0&&(i=o),Object.defineProperty(r,i,{enumerable:!0,get:function(){return t[o]}})}:function(r,t,o,i){i===void 0&&(i=o),r[i]=t[o]}),wf=W&&W.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),Qr=W&&W.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var o in r)o!=="default"&&Object.hasOwnProperty.call(r,o)&&Sf(t,r,o);return wf(t,r),t},z=W&&W.__awaiter||function(r,t,o,i){function s(l){return l instanceof o?l:new o(function(f){f(l)})}return new(o||(o=Promise))(function(l,f){function m(y){try{d(i.next(y))}catch(g){f(g)}}function h(y){try{d(i.throw(y))}catch(g){f(g)}}function d(y){y.done?l(y.value):s(y.value).then(m,h)}d((i=i.apply(r,t||[])).next())})};Object.defineProperty(W,"__esModule",{value:!0});W.HttpClient=W.isHttps=W.HttpClientResponse=W.HttpClientError=W.getProxyUrl=W.MediaTypes=W.Headers=W.HttpCodes=void 0;var Hr=Qr(require("http")),Kn=Qr(require("https")),ya=Qr(fa()),Vr=Qr(ba()),me;(function(r){r[r.OK=200]="OK",r[r.MultipleChoices=300]="MultipleChoices",r[r.MovedPermanently=301]="MovedPermanently",r[r.ResourceMoved=302]="ResourceMoved",r[r.SeeOther=303]="SeeOther",r[r.NotModified=304]="NotModified",r[r.UseProxy=305]="UseProxy",r[r.SwitchProxy=306]="SwitchProxy",r[r.TemporaryRedirect=307]="TemporaryRedirect",r[r.PermanentRedirect=308]="PermanentRedirect",r[r.BadRequest=400]="BadRequest",r[r.Unauthorized=401]="Unauthorized",r[r.PaymentRequired=402]="PaymentRequired",r[r.Forbidden=403]="Forbidden",r[r.NotFound=404]="NotFound",r[r.MethodNotAllowed=405]="MethodNotAllowed",r[r.NotAcceptable=406]="NotAcceptable",r[r.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",r[r.RequestTimeout=408]="RequestTimeout",r[r.Conflict=409]="Conflict",r[r.Gone=410]="Gone",r[r.TooManyRequests=429]="TooManyRequests",r[r.InternalServerError=500]="InternalServerError",r[r.NotImplemented=501]="NotImplemented",r[r.BadGateway=502]="BadGateway",r[r.ServiceUnavailable=503]="ServiceUnavailable",r[r.GatewayTimeout=504]="GatewayTimeout"})(me=W.HttpCodes||(W.HttpCodes={}));var Y;(function(r){r.Accept="accept",r.ContentType="content-type"})(Y=W.Headers||(W.Headers={}));var ze;(function(r){r.ApplicationJson="application/json"})(ze=W.MediaTypes||(W.MediaTypes={}));function Rf(r){let t=ya.getProxyUrl(new URL(r));return t?t.href:""}W.getProxyUrl=Rf;var vf=[me.MovedPermanently,me.ResourceMoved,me.SeeOther,me.TemporaryRedirect,me.PermanentRedirect],Tf=[me.BadGateway,me.ServiceUnavailable,me.GatewayTimeout],Ef=["OPTIONS","GET","DELETE","HEAD"],Pf=10,Af=5,gt=class extends Error{constructor(t,o){super(t),this.name="HttpClientError",this.statusCode=o,Object.setPrototypeOf(this,gt.prototype)}};W.HttpClientError=gt;var Gr=class{constructor(t){this.message=t}readBody(){return z(this,void 0,void 0,function*(){return new Promise(t=>z(this,void 0,void 0,function*(){let o=Buffer.alloc(0);this.message.on("data",i=>{o=Buffer.concat([o,i])}),this.message.on("end",()=>{t(o.toString())})}))})}};W.HttpClientResponse=Gr;function Cf(r){return new URL(r).protocol==="https:"}W.isHttps=Cf;var Zn=class{constructor(t,o,i){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=t,this.handlers=o||[],this.requestOptions=i,i&&(i.ignoreSslError!=null&&(this._ignoreSslError=i.ignoreSslError),this._socketTimeout=i.socketTimeout,i.allowRedirects!=null&&(this._allowRedirects=i.allowRedirects),i.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=i.allowRedirectDowngrade),i.maxRedirects!=null&&(this._maxRedirects=Math.max(i.maxRedirects,0)),i.keepAlive!=null&&(this._keepAlive=i.keepAlive),i.allowRetries!=null&&(this._allowRetries=i.allowRetries),i.maxRetries!=null&&(this._maxRetries=i.maxRetries))}options(t,o){return z(this,void 0,void 0,function*(){return this.request("OPTIONS",t,null,o||{})})}get(t,o){return z(this,void 0,void 0,function*(){return this.request("GET",t,null,o||{})})}del(t,o){return z(this,void 0,void 0,function*(){return this.request("DELETE",t,null,o||{})})}post(t,o,i){return z(this,void 0,void 0,function*(){return this.request("POST",t,o,i||{})})}patch(t,o,i){return z(this,void 0,void 0,function*(){return this.request("PATCH",t,o,i||{})})}put(t,o,i){return z(this,void 0,void 0,function*(){return this.request("PUT",t,o,i||{})})}head(t,o){return z(this,void 0,void 0,function*(){return this.request("HEAD",t,null,o||{})})}sendStream(t,o,i,s){return z(this,void 0,void 0,function*(){return this.request(t,o,i,s)})}getJson(t,o={}){return z(this,void 0,void 0,function*(){o[Y.Accept]=this._getExistingOrDefaultHeader(o,Y.Accept,ze.ApplicationJson);let i=yield this.get(t,o);return this._processResponse(i,this.requestOptions)})}postJson(t,o,i={}){return z(this,void 0,void 0,function*(){let s=JSON.stringify(o,null,2);i[Y.Accept]=this._getExistingOrDefaultHeader(i,Y.Accept,ze.ApplicationJson),i[Y.ContentType]=this._getExistingOrDefaultHeader(i,Y.ContentType,ze.ApplicationJson);let l=yield this.post(t,s,i);return this._processResponse(l,this.requestOptions)})}putJson(t,o,i={}){return z(this,void 0,void 0,function*(){let s=JSON.stringify(o,null,2);i[Y.Accept]=this._getExistingOrDefaultHeader(i,Y.Accept,ze.ApplicationJson),i[Y.ContentType]=this._getExistingOrDefaultHeader(i,Y.ContentType,ze.ApplicationJson);let l=yield this.put(t,s,i);return this._processResponse(l,this.requestOptions)})}patchJson(t,o,i={}){return z(this,void 0,void 0,function*(){let s=JSON.stringify(o,null,2);i[Y.Accept]=this._getExistingOrDefaultHeader(i,Y.Accept,ze.ApplicationJson),i[Y.ContentType]=this._getExistingOrDefaultHeader(i,Y.ContentType,ze.ApplicationJson);let l=yield this.patch(t,s,i);return this._processResponse(l,this.requestOptions)})}request(t,o,i,s){return z(this,void 0,void 0,function*(){if(this._disposed)throw new Error("Client has already been disposed.");let l=new URL(o),f=this._prepareRequest(t,l,s),m=this._allowRetries&&Ef.includes(t)?this._maxRetries+1:1,h=0,d;do{if(d=yield this.requestRaw(f,i),d&&d.message&&d.message.statusCode===me.Unauthorized){let g;for(let _ of this.handlers)if(_.canHandleAuthentication(d)){g=_;break}return g?g.handleAuthentication(this,f,i):d}let y=this._maxRedirects;for(;d.message.statusCode&&vf.includes(d.message.statusCode)&&this._allowRedirects&&y>0;){let g=d.message.headers.location;if(!g)break;let _=new URL(g);if(l.protocol==="https:"&&l.protocol!==_.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(yield d.readBody(),_.hostname!==l.hostname)for(let w in s)w.toLowerCase()==="authorization"&&delete s[w];f=this._prepareRequest(t,_,s),d=yield this.requestRaw(f,i),y--}if(!d.message.statusCode||!Tf.includes(d.message.statusCode))return d;h+=1,h<m&&(yield d.readBody(),yield this._performExponentialBackoff(h))}while(h<m);return d})}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(t,o){return z(this,void 0,void 0,function*(){return new Promise((i,s)=>{function l(f,m){f?s(f):m?i(m):s(new Error("Unknown error"))}this.requestRawWithCallback(t,o,l)})})}requestRawWithCallback(t,o,i){typeof o=="string"&&(t.options.headers||(t.options.headers={}),t.options.headers["Content-Length"]=Buffer.byteLength(o,"utf8"));let s=!1;function l(h,d){s||(s=!0,i(h,d))}let f=t.httpModule.request(t.options,h=>{let d=new Gr(h);l(void 0,d)}),m;f.on("socket",h=>{m=h}),f.setTimeout(this._socketTimeout||3*6e4,()=>{m&&m.end(),l(new Error(`Request timeout: ${t.options.path}`))}),f.on("error",function(h){l(h)}),o&&typeof o=="string"&&f.write(o,"utf8"),o&&typeof o!="string"?(o.on("close",function(){f.end()}),o.pipe(f)):f.end()}getAgent(t){let o=new URL(t);return this._getAgent(o)}_prepareRequest(t,o,i){let s={};s.parsedUrl=o;let l=s.parsedUrl.protocol==="https:";s.httpModule=l?Kn:Hr;let f=l?443:80;if(s.options={},s.options.host=s.parsedUrl.hostname,s.options.port=s.parsedUrl.port?parseInt(s.parsedUrl.port):f,s.options.path=(s.parsedUrl.pathname||"")+(s.parsedUrl.search||""),s.options.method=t,s.options.headers=this._mergeHeaders(i),this.userAgent!=null&&(s.options.headers["user-agent"]=this.userAgent),s.options.agent=this._getAgent(s.parsedUrl),this.handlers)for(let m of this.handlers)m.prepareRequest(s.options);return s}_mergeHeaders(t){return this.requestOptions&&this.requestOptions.headers?Object.assign({},Yr(this.requestOptions.headers),Yr(t||{})):Yr(t||{})}_getExistingOrDefaultHeader(t,o,i){let s;return this.requestOptions&&this.requestOptions.headers&&(s=Yr(this.requestOptions.headers)[o]),t[o]||s||i}_getAgent(t){let o,i=ya.getProxyUrl(t),s=i&&i.hostname;if(this._keepAlive&&s&&(o=this._proxyAgent),this._keepAlive&&!s&&(o=this._agent),o)return o;let l=t.protocol==="https:",f=100;if(this.requestOptions&&(f=this.requestOptions.maxSockets||Hr.globalAgent.maxSockets),i&&i.hostname){let m={maxSockets:f,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(i.username||i.password)&&{proxyAuth:`${i.username}:${i.password}`}),{host:i.hostname,port:i.port})},h,d=i.protocol==="https:";l?h=d?Vr.httpsOverHttps:Vr.httpsOverHttp:h=d?Vr.httpOverHttps:Vr.httpOverHttp,o=h(m),this._proxyAgent=o}if(this._keepAlive&&!o){let m={keepAlive:this._keepAlive,maxSockets:f};o=l?new Kn.Agent(m):new Hr.Agent(m),this._agent=o}return o||(o=l?Kn.globalAgent:Hr.globalAgent),l&&this._ignoreSslError&&(o.options=Object.assign(o.options||{},{rejectUnauthorized:!1})),o}_performExponentialBackoff(t){return z(this,void 0,void 0,function*(){t=Math.min(Pf,t);let o=Af*Math.pow(2,t);return new Promise(i=>setTimeout(()=>i(),o))})}_processResponse(t,o){return z(this,void 0,void 0,function*(){return new Promise((i,s)=>z(this,void 0,void 0,function*(){let l=t.message.statusCode||0,f={statusCode:l,result:null,headers:{}};l===me.NotFound&&i(f);function m(y,g){if(typeof g=="string"){let _=new Date(g);if(!isNaN(_.valueOf()))return _}return g}let h,d;try{d=yield t.readBody(),d&&d.length>0&&(o&&o.deserializeDates?h=JSON.parse(d,m):h=JSON.parse(d),f.result=h),f.headers=t.message.headers}catch{}if(l>299){let y;h&&h.message?y=h.message:d&&d.length>0?y=d:y=`Failed request: (${l})`;let g=new gt(y,l);g.result=f.result,s(g)}else i(f)}))})}};W.HttpClient=Zn;var Yr=r=>Object.keys(r).reduce((t,o)=>(t[o.toLowerCase()]=r[o],t),{})});var ga=k(_e=>{"use strict";var ro=_e&&_e.__awaiter||function(r,t,o,i){function s(l){return l instanceof o?l:new o(function(f){f(l)})}return new(o||(o=Promise))(function(l,f){function m(y){try{d(i.next(y))}catch(g){f(g)}}function h(y){try{d(i.throw(y))}catch(g){f(g)}}function d(y){y.done?l(y.value):s(y.value).then(m,h)}d((i=i.apply(r,t||[])).next())})};Object.defineProperty(_e,"__esModule",{value:!0});_e.PersonalAccessTokenCredentialHandler=_e.BearerCredentialHandler=_e.BasicCredentialHandler=void 0;var Xn=class{constructor(t,o){this.username=t,this.password=o}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return ro(this,void 0,void 0,function*(){throw new Error("not implemented")})}};_e.BasicCredentialHandler=Xn;var eo=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Bearer ${this.token}`}canHandleAuthentication(){return!1}handleAuthentication(){return ro(this,void 0,void 0,function*(){throw new Error("not implemented")})}};_e.BearerCredentialHandler=eo;var to=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`PAT:${this.token}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return ro(this,void 0,void 0,function*(){throw new Error("not implemented")})}};_e.PersonalAccessTokenCredentialHandler=to});var Ra=k(St=>{"use strict";var Sa=St&&St.__awaiter||function(r,t,o,i){function s(l){return l instanceof o?l:new o(function(f){f(l)})}return new(o||(o=Promise))(function(l,f){function m(y){try{d(i.next(y))}catch(g){f(g)}}function h(y){try{d(i.throw(y))}catch(g){f(g)}}function d(y){y.done?l(y.value):s(y.value).then(m,h)}d((i=i.apply(r,t||[])).next())})};Object.defineProperty(St,"__esModule",{value:!0});St.OidcClient=void 0;var Of=_a(),qf=ga(),wa=no(),je=class{static createHttpClient(t=!0,o=10){let i={allowRetries:t,maxRetries:o};return new Of.HttpClient("actions/oidc-client",[new qf.BearerCredentialHandler(je.getRequestToken())],i)}static getRequestToken(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return t}static getIDTokenUrl(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return t}static getCall(t){var o;return Sa(this,void 0,void 0,function*(){let l=(o=(yield je.createHttpClient().getJson(t).catch(f=>{throw new Error(`Failed to get ID Token. 
 
        Error Code : ${f.statusCode}
 
        Error Message: ${f.result.message}`)})).result)===null||o===void 0?void 0:o.value;if(!l)throw new Error("Response json body do not have ID Token field");return l})}static getIDToken(t){return Sa(this,void 0,void 0,function*(){try{let o=je.getIDTokenUrl();if(t){let s=encodeURIComponent(t);o=`${o}&audience=${s}`}wa.debug(`ID token url is ${o}`);let i=yield je.getCall(o);return wa.setSecret(i),i}catch(o){throw new Error(`Error message: ${o.message}`)}})}};St.OidcClient=je});var so=k(J=>{"use strict";var oo=J&&J.__awaiter||function(r,t,o,i){function s(l){return l instanceof o?l:new o(function(f){f(l)})}return new(o||(o=Promise))(function(l,f){function m(y){try{d(i.next(y))}catch(g){f(g)}}function h(y){try{d(i.throw(y))}catch(g){f(g)}}function d(y){y.done?l(y.value):s(y.value).then(m,h)}d((i=i.apply(r,t||[])).next())})};Object.defineProperty(J,"__esModule",{value:!0});J.summary=J.markdownSummary=J.SUMMARY_DOCS_URL=J.SUMMARY_ENV_VAR=void 0;var Bf=require("os"),io=require("fs"),{access:Df,appendFile:kf,writeFile:Lf}=io.promises;J.SUMMARY_ENV_VAR="GITHUB_STEP_SUMMARY";J.SUMMARY_DOCS_URL="https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary";var ao=class{constructor(){this._buffer=""}filePath(){return oo(this,void 0,void 0,function*(){if(this._filePath)return this._filePath;let t=process.env[J.SUMMARY_ENV_VAR];if(!t)throw new Error(`Unable to find environment variable for $${J.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`);try{yield Df(t,io.constants.R_OK|io.constants.W_OK)}catch{throw new Error(`Unable to access summary file: '${t}'. Check if the file has correct read/write permissions.`)}return this._filePath=t,this._filePath})}wrap(t,o,i={}){let s=Object.entries(i).map(([l,f])=>` ${l}="${f}"`).join("");return o?`<${t}${s}>${o}</${t}>`:`<${t}${s}>`}write(t){return oo(this,void 0,void 0,function*(){let o=!!(t!=null&&t.overwrite),i=yield this.filePath();return yield(o?Lf:kf)(i,this._buffer,{encoding:"utf8"}),this.emptyBuffer()})}clear(){return oo(this,void 0,void 0,function*(){return this.emptyBuffer().write({overwrite:!0})})}stringify(){return this._buffer}isEmptyBuffer(){return this._buffer.length===0}emptyBuffer(){return this._buffer="",this}addRaw(t,o=!1){return this._buffer+=t,o?this.addEOL():this}addEOL(){return this.addRaw(Bf.EOL)}addCodeBlock(t,o){let i=Object.assign({},o&&{lang:o}),s=this.wrap("pre",this.wrap("code",t),i);return this.addRaw(s).addEOL()}addList(t,o=!1){let i=o?"ol":"ul",s=t.map(f=>this.wrap("li",f)).join(""),l=this.wrap(i,s);return this.addRaw(l).addEOL()}addTable(t){let o=t.map(s=>{let l=s.map(f=>{if(typeof f=="string")return this.wrap("td",f);let{header:m,data:h,colspan:d,rowspan:y}=f,g=m?"th":"td",_=Object.assign(Object.assign({},d&&{colspan:d}),y&&{rowspan:y});return this.wrap(g,h,_)}).join("");return this.wrap("tr",l)}).join(""),i=this.wrap("table",o);return this.addRaw(i).addEOL()}addDetails(t,o){let i=this.wrap("details",this.wrap("summary",t)+o);return this.addRaw(i).addEOL()}addImage(t,o,i){let{width:s,height:l}=i||{},f=Object.assign(Object.assign({},s&&{width:s}),l&&{height:l}),m=this.wrap("img",null,Object.assign({src:t,alt:o},f));return this.addRaw(m).addEOL()}addHeading(t,o){let i=`h${o}`,s=["h1","h2","h3","h4","h5","h6"].includes(i)?i:"h1",l=this.wrap(s,t);return this.addRaw(l).addEOL()}addSeparator(){let t=this.wrap("hr",null);return this.addRaw(t).addEOL()}addBreak(){let t=this.wrap("br",null);return this.addRaw(t).addEOL()}addQuote(t,o){let i=Object.assign({},o&&{cite:o}),s=this.wrap("blockquote",t,i);return this.addRaw(s).addEOL()}addLink(t,o){let i=this.wrap("a",t,{href:o});return this.addRaw(i).addEOL()}},va=new ao;J.markdownSummary=va;J.summary=va});var Ta=k(K=>{"use strict";var Wf=K&&K.__createBinding||(Object.create?function(r,t,o,i){i===void 0&&(i=o),Object.defineProperty(r,i,{enumerable:!0,get:function(){return t[o]}})}:function(r,t,o,i){i===void 0&&(i=o),r[i]=t[o]}),Ff=K&&K.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),Mf=K&&K.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var o in r)o!=="default"&&Object.hasOwnProperty.call(r,o)&&Wf(t,r,o);return Ff(t,r),t};Object.defineProperty(K,"__esModule",{value:!0});K.toPlatformPath=K.toWin32Path=K.toPosixPath=void 0;var If=Mf(require("path"));function Uf(r){return r.replace(/[\\]/g,"/")}K.toPosixPath=Uf;function xf(r){return r.replace(/[/]/g,"\\")}K.toWin32Path=xf;function $f(r){return r.replace(/[/\\]/g,If.sep)}K.toPlatformPath=$f});var no=k(v=>{"use strict";var zf=v&&v.__createBinding||(Object.create?function(r,t,o,i){i===void 0&&(i=o),Object.defineProperty(r,i,{enumerable:!0,get:function(){return t[o]}})}:function(r,t,o,i){i===void 0&&(i=o),r[i]=t[o]}),jf=v&&v.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),Ea=v&&v.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var o in r)o!=="default"&&Object.hasOwnProperty.call(r,o)&&zf(t,r,o);return jf(t,r),t},Pa=v&&v.__awaiter||function(r,t,o,i){function s(l){return l instanceof o?l:new o(function(f){f(l)})}return new(o||(o=Promise))(function(l,f){function m(y){try{d(i.next(y))}catch(g){f(g)}}function h(y){try{d(i.throw(y))}catch(g){f(g)}}function d(y){y.done?l(y.value):s(y.value).then(m,h)}d((i=i.apply(r,t||[])).next())})};Object.defineProperty(v,"__esModule",{value:!0});v.getIDToken=v.getState=v.saveState=v.group=v.endGroup=v.startGroup=v.info=v.notice=v.warning=v.error=v.debug=v.isDebug=v.setFailed=v.setCommandEcho=v.setOutput=v.getBooleanInput=v.getMultilineInput=v.getInput=v.addPath=v.setSecret=v.exportVariable=v.ExitCode=void 0;var ue=xi(),Ze=ua(),wt=qr(),Aa=Ea(require("os")),Nf=Ea(require("path")),Hf=Ra(),Ca;(function(r){r[r.Success=0]="Success",r[r.Failure=1]="Failure"})(Ca=v.ExitCode||(v.ExitCode={}));function Vf(r,t){let o=wt.toCommandValue(t);if(process.env[r]=o,process.env.GITHUB_ENV||"")return Ze.issueFileCommand("ENV",Ze.prepareKeyValueMessage(r,t));ue.issueCommand("set-env",{name:r},o)}v.exportVariable=Vf;function Yf(r){ue.issueCommand("add-mask",{},r)}v.setSecret=Yf;function Gf(r){process.env.GITHUB_PATH||""?Ze.issueFileCommand("PATH",r):ue.issueCommand("add-path",{},r),process.env.PATH=`${r}${Nf.delimiter}${process.env.PATH}`}v.addPath=Gf;function uo(r,t){let o=process.env[`INPUT_${r.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!o)throw new Error(`Input required and not supplied: ${r}`);return t&&t.trimWhitespace===!1?o:o.trim()}v.getInput=uo;function Qf(r,t){let o=uo(r,t).split(`
`).filter(i=>i!=="");return t&&t.trimWhitespace===!1?o:o.map(i=>i.trim())}v.getMultilineInput=Qf;function Jf(r,t){let o=["true","True","TRUE"],i=["false","False","FALSE"],s=uo(r,t);if(o.includes(s))return!0;if(i.includes(s))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${r}
Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}v.getBooleanInput=Jf;function Kf(r,t){if(process.env.GITHUB_OUTPUT||"")return Ze.issueFileCommand("OUTPUT",Ze.prepareKeyValueMessage(r,t));process.stdout.write(Aa.EOL),ue.issueCommand("set-output",{name:r},wt.toCommandValue(t))}v.setOutput=Kf;function Zf(r){ue.issue("echo",r?"on":"off")}v.setCommandEcho=Zf;function Xf(r){process.exitCode=Ca.Failure,Oa(r)}v.setFailed=Xf;function ec(){return process.env.RUNNER_DEBUG==="1"}v.isDebug=ec;function tc(r){ue.issueCommand("debug",{},r)}v.debug=tc;function Oa(r,t={}){ue.issueCommand("error",wt.toCommandProperties(t),r instanceof Error?r.toString():r)}v.error=Oa;function rc(r,t={}){ue.issueCommand("warning",wt.toCommandProperties(t),r instanceof Error?r.toString():r)}v.warning=rc;function nc(r,t={}){ue.issueCommand("notice",wt.toCommandProperties(t),r instanceof Error?r.toString():r)}v.notice=nc;function oc(r){process.stdout.write(r+Aa.EOL)}v.info=oc;function qa(r){ue.issue("group",r)}v.startGroup=qa;function Ba(){ue.issue("endgroup")}v.endGroup=Ba;function ic(r,t){return Pa(this,void 0,void 0,function*(){qa(r);let o;try{o=yield t()}finally{Ba()}return o})}v.group=ic;function ac(r,t){if(process.env.GITHUB_STATE||"")return Ze.issueFileCommand("STATE",Ze.prepareKeyValueMessage(r,t));ue.issueCommand("save-state",{name:r},wt.toCommandValue(t))}v.saveState=ac;function sc(r){return process.env[`STATE_${r}`]||""}v.getState=sc;function uc(r){return Pa(this,void 0,void 0,function*(){return yield Hf.OidcClient.getIDToken(r)})}v.getIDToken=uc;var lc=so();Object.defineProperty(v,"summary",{enumerable:!0,get:function(){return lc.summary}});var fc=so();Object.defineProperty(v,"markdownSummary",{enumerable:!0,get:function(){return fc.markdownSummary}});var lo=Ta();Object.defineProperty(v,"toPosixPath",{enumerable:!0,get:function(){return lo.toPosixPath}});Object.defineProperty(v,"toWin32Path",{enumerable:!0,get:function(){return lo.toWin32Path}});Object.defineProperty(v,"toPlatformPath",{enumerable:!0,get:function(){return lo.toPlatformPath}})});var La=k((Jr,ka)=>{(function(r,t){typeof Jr=="object"&&typeof ka<"u"?t(Jr):typeof define=="function"&&define.amd?define(["exports"],t):(r=typeof globalThis<"u"?globalThis:r||self,t(r.WebStreamsPolyfill={}))})(Jr,function(r){"use strict";let t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function o(){}function i(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}let s=i();function l(e){return typeof e=="object"&&e!==null||typeof e=="function"}let f=o,m=Promise,h=Promise.prototype.then,d=Promise.resolve.bind(m),y=Promise.reject.bind(m);function g(e){return new m(e)}function _(e){return d(e)}function w(e){return y(e)}function S(e,n,a){return h.call(e,n,a)}function F(e,n,a){S(S(e,n,a),void 0,f)}function B(e,n){F(e,n)}function D(e,n){F(e,void 0,n)}function U(e,n,a){return S(e,n,a)}function G(e){S(e,void 0,f)}let C=(()=>{let e=s&&s.queueMicrotask;if(typeof e=="function")return e;let n=_(void 0);return a=>S(n,a)})();function x(e,n,a){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,n,a)}function L(e,n,a){try{return _(x(e,n,a))}catch(u){return w(u)}}let ke=16384;class te{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(n){let a=this._back,u=a;a._elements.length===ke-1&&(u={_elements:[],_next:void 0}),a._elements.push(n),u!==a&&(this._back=u,a._next=u),++this._size}shift(){let n=this._front,a=n,u=this._cursor,c=u+1,p=n._elements,b=p[u];return c===ke&&(a=n._next,c=0),--this._size,this._cursor=c,n!==a&&(this._front=a),p[u]=void 0,b}forEach(n){let a=this._cursor,u=this._front,c=u._elements;for(;(a!==c.length||u._next!==void 0)&&!(a===c.length&&(u=u._next,c=u._elements,a=0,c.length===0));)n(c[a]),++a}peek(){let n=this._front,a=this._cursor;return n._elements[a]}}function Ro(e,n){e._ownerReadableStream=n,n._reader=e,n._state==="readable"?un(e):n._state==="closed"?ms(e):vo(e,n._storedError)}function sn(e,n){let a=e._ownerReadableStream;return de(a,n)}function we(e){e._ownerReadableStream._state==="readable"?ln(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):bs(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function ot(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function un(e){e._closedPromise=g((n,a)=>{e._closedPromise_resolve=n,e._closedPromise_reject=a})}function vo(e,n){un(e),ln(e,n)}function ms(e){un(e),To(e)}function ln(e,n){e._closedPromise_reject!==void 0&&(G(e._closedPromise),e._closedPromise_reject(n),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function bs(e,n){vo(e,n)}function To(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let Eo=t("[[AbortSteps]]"),Po=t("[[ErrorSteps]]"),fn=t("[[CancelSteps]]"),cn=t("[[PullSteps]]"),Ao=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},ys=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function _s(e){return typeof e=="object"||typeof e=="function"}function Re(e,n){if(e!==void 0&&!_s(e))throw new TypeError(`${n} is not an object.`)}function fe(e,n){if(typeof e!="function")throw new TypeError(`${n} is not a function.`)}function gs(e){return typeof e=="object"&&e!==null||typeof e=="function"}function Co(e,n){if(!gs(e))throw new TypeError(`${n} is not an object.`)}function ve(e,n,a){if(e===void 0)throw new TypeError(`Parameter ${n} is required in '${a}'.`)}function dn(e,n,a){if(e===void 0)throw new TypeError(`${n} is required in '${a}'.`)}function hn(e){return Number(e)}function Oo(e){return e===0?0:e}function Ss(e){return Oo(ys(e))}function qo(e,n){let u=Number.MAX_SAFE_INTEGER,c=Number(e);if(c=Oo(c),!Ao(c))throw new TypeError(`${n} is not a finite number`);if(c=Ss(c),c<0||c>u)throw new TypeError(`${n} is outside the accepted range of ${0} to ${u}, inclusive`);return!Ao(c)||c===0?0:c}function pn(e,n){if(!Ie(e))throw new TypeError(`${n} is not a ReadableStream.`)}function it(e){return new Et(e)}function Bo(e,n){e._reader._readRequests.push(n)}function mn(e,n,a){let c=e._reader._readRequests.shift();a?c._closeSteps():c._chunkSteps(n)}function Zt(e){return e._reader._readRequests.length}function Do(e){let n=e._reader;return!(n===void 0||!Le(n))}class Et{constructor(n){if(ve(n,1,"ReadableStreamDefaultReader"),pn(n,"First parameter"),Ue(n))throw new TypeError("This stream has already been locked for exclusive reading by another reader");Ro(this,n),this._readRequests=new te}get closed(){return Le(this)?this._closedPromise:w(Xt("closed"))}cancel(n=void 0){return Le(this)?this._ownerReadableStream===void 0?w(ot("cancel")):sn(this,n):w(Xt("cancel"))}read(){if(!Le(this))return w(Xt("read"));if(this._ownerReadableStream===void 0)return w(ot("read from"));let n,a,u=g((p,b)=>{n=p,a=b});return Pt(this,{_chunkSteps:p=>n({value:p,done:!1}),_closeSteps:()=>n({value:void 0,done:!0}),_errorSteps:p=>a(p)}),u}releaseLock(){if(!Le(this))throw Xt("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");we(this)}}}Object.defineProperties(Et.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Et.prototype,t.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function Le(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof Et}function Pt(e,n){let a=e._ownerReadableStream;a._disturbed=!0,a._state==="closed"?n._closeSteps():a._state==="errored"?n._errorSteps(a._storedError):a._readableStreamController[cn](n)}function Xt(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}let ko=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class Lo{constructor(n,a){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=n,this._preventCancel=a}next(){let n=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?U(this._ongoingPromise,n,n):n(),this._ongoingPromise}return(n){let a=()=>this._returnSteps(n);return this._ongoingPromise?U(this._ongoingPromise,a,a):a()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let n=this._reader;if(n._ownerReadableStream===void 0)return w(ot("iterate"));let a,u,c=g((b,R)=>{a=b,u=R});return Pt(n,{_chunkSteps:b=>{this._ongoingPromise=void 0,C(()=>a({value:b,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,we(n),a({value:void 0,done:!0})},_errorSteps:b=>{this._ongoingPromise=void 0,this._isFinished=!0,we(n),u(b)}}),c}_returnSteps(n){if(this._isFinished)return Promise.resolve({value:n,done:!0});this._isFinished=!0;let a=this._reader;if(a._ownerReadableStream===void 0)return w(ot("finish iterating"));if(!this._preventCancel){let u=sn(a,n);return we(a),U(u,()=>({value:n,done:!0}))}return we(a),_({value:n,done:!0})}}let Wo={next(){return Fo(this)?this._asyncIteratorImpl.next():w(Mo("next"))},return(e){return Fo(this)?this._asyncIteratorImpl.return(e):w(Mo("return"))}};ko!==void 0&&Object.setPrototypeOf(Wo,ko);function ws(e,n){let a=it(e),u=new Lo(a,n),c=Object.create(Wo);return c._asyncIteratorImpl=u,c}function Fo(e){if(!l(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof Lo}catch{return!1}}function Mo(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}let Io=Number.isNaN||function(e){return e!==e};function At(e){return e.slice()}function Uo(e,n,a,u,c){new Uint8Array(e).set(new Uint8Array(a,u,c),n)}function Lc(e){return e}function er(e){return!1}function xo(e,n,a){if(e.slice)return e.slice(n,a);let u=a-n,c=new ArrayBuffer(u);return Uo(c,0,e,n,u),c}function Rs(e){return!(typeof e!="number"||Io(e)||e<0)}function $o(e){let n=xo(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(n)}function bn(e){let n=e._queue.shift();return e._queueTotalSize-=n.size,e._queueTotalSize<0&&(e._queueTotalSize=0),n.value}function yn(e,n,a){if(!Rs(a)||a===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:n,size:a}),e._queueTotalSize+=a}function vs(e){return e._queue.peek().value}function We(e){e._queue=new te,e._queueTotalSize=0}class Ct{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!_n(this))throw Rn("view");return this._view}respond(n){if(!_n(this))throw Rn("respond");if(ve(n,1,"respond"),n=qo(n,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");er(this._view.buffer),ir(this._associatedReadableByteStreamController,n)}respondWithNewView(n){if(!_n(this))throw Rn("respondWithNewView");if(ve(n,1,"respondWithNewView"),!ArrayBuffer.isView(n))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");er(n.buffer),ar(this._associatedReadableByteStreamController,n)}}Object.defineProperties(Ct.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Ct.prototype,t.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class at{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!He(this))throw qt("byobRequest");return wn(this)}get desiredSize(){if(!He(this))throw qt("desiredSize");return Qo(this)}close(){if(!He(this))throw qt("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let n=this._controlledReadableByteStream._state;if(n!=="readable")throw new TypeError(`The stream (in ${n} state) is not in the readable state and cannot be closed`);Ot(this)}enqueue(n){if(!He(this))throw qt("enqueue");if(ve(n,1,"enqueue"),!ArrayBuffer.isView(n))throw new TypeError("chunk must be an array buffer view");if(n.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(n.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let a=this._controlledReadableByteStream._state;if(a!=="readable")throw new TypeError(`The stream (in ${a} state) is not in the readable state and cannot be enqueued to`);or(this,n)}error(n=void 0){if(!He(this))throw qt("error");ce(this,n)}[fn](n){zo(this),We(this);let a=this._cancelAlgorithm(n);return nr(this),a}[cn](n){let a=this._controlledReadableByteStream;if(this._queueTotalSize>0){let c=this._queue.shift();this._queueTotalSize-=c.byteLength,Vo(this);let p=new Uint8Array(c.buffer,c.byteOffset,c.byteLength);n._chunkSteps(p);return}let u=this._autoAllocateChunkSize;if(u!==void 0){let c;try{c=new ArrayBuffer(u)}catch(b){n._errorSteps(b);return}let p={buffer:c,bufferByteLength:u,byteOffset:0,byteLength:u,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(p)}Bo(a,n),Ve(this)}}Object.defineProperties(at.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(at.prototype,t.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function He(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof at}function _n(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof Ct}function Ve(e){if(!As(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let a=e._pullAlgorithm();F(a,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Ve(e))},u=>{ce(e,u)})}function zo(e){Sn(e),e._pendingPullIntos=new te}function gn(e,n){let a=!1;e._state==="closed"&&(a=!0);let u=jo(n);n.readerType==="default"?mn(e,u,a):qs(e,u,a)}function jo(e){let n=e.bytesFilled,a=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,n/a)}function tr(e,n,a,u){e._queue.push({buffer:n,byteOffset:a,byteLength:u}),e._queueTotalSize+=u}function No(e,n){let a=n.elementSize,u=n.bytesFilled-n.bytesFilled%a,c=Math.min(e._queueTotalSize,n.byteLength-n.bytesFilled),p=n.bytesFilled+c,b=p-p%a,R=c,E=!1;b>u&&(R=b-n.bytesFilled,E=!0);let A=e._queue;for(;R>0;){let O=A.peek(),q=Math.min(R,O.byteLength),$=n.byteOffset+n.bytesFilled;Uo(n.buffer,$,O.buffer,O.byteOffset,q),O.byteLength===q?A.shift():(O.byteOffset+=q,O.byteLength-=q),e._queueTotalSize-=q,Ho(e,q,n),R-=q}return E}function Ho(e,n,a){a.bytesFilled+=n}function Vo(e){e._queueTotalSize===0&&e._closeRequested?(nr(e),It(e._controlledReadableByteStream)):Ve(e)}function Sn(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function Yo(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let n=e._pendingPullIntos.peek();No(e,n)&&(rr(e),gn(e._controlledReadableByteStream,n))}}function Ts(e,n,a){let u=e._controlledReadableByteStream,c=1;n.constructor!==DataView&&(c=n.constructor.BYTES_PER_ELEMENT);let p=n.constructor,b=n.buffer,R={buffer:b,bufferByteLength:b.byteLength,byteOffset:n.byteOffset,byteLength:n.byteLength,bytesFilled:0,elementSize:c,viewConstructor:p,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(R),Zo(u,a);return}if(u._state==="closed"){let E=new p(R.buffer,R.byteOffset,0);a._closeSteps(E);return}if(e._queueTotalSize>0){if(No(e,R)){let E=jo(R);Vo(e),a._chunkSteps(E);return}if(e._closeRequested){let E=new TypeError("Insufficient bytes to fill elements in the given buffer");ce(e,E),a._errorSteps(E);return}}e._pendingPullIntos.push(R),Zo(u,a),Ve(e)}function Es(e,n){let a=e._controlledReadableByteStream;if(vn(a))for(;Xo(a)>0;){let u=rr(e);gn(a,u)}}function Ps(e,n,a){if(Ho(e,n,a),a.bytesFilled<a.elementSize)return;rr(e);let u=a.bytesFilled%a.elementSize;if(u>0){let c=a.byteOffset+a.bytesFilled,p=xo(a.buffer,c-u,c);tr(e,p,0,p.byteLength)}a.bytesFilled-=u,gn(e._controlledReadableByteStream,a),Yo(e)}function Go(e,n){let a=e._pendingPullIntos.peek();Sn(e),e._controlledReadableByteStream._state==="closed"?Es(e):Ps(e,n,a),Ve(e)}function rr(e){return e._pendingPullIntos.shift()}function As(e){let n=e._controlledReadableByteStream;return n._state!=="readable"||e._closeRequested||!e._started?!1:!!(Do(n)&&Zt(n)>0||vn(n)&&Xo(n)>0||Qo(e)>0)}function nr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function Ot(e){let n=e._controlledReadableByteStream;if(!(e._closeRequested||n._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){let u=new TypeError("Insufficient bytes to fill elements in the given buffer");throw ce(e,u),u}nr(e),It(n)}}function or(e,n){let a=e._controlledReadableByteStream;if(e._closeRequested||a._state!=="readable")return;let u=n.buffer,c=n.byteOffset,p=n.byteLength,b=u;if(e._pendingPullIntos.length>0){let R=e._pendingPullIntos.peek();er(R.buffer),R.buffer=R.buffer}if(Sn(e),Do(a))if(Zt(a)===0)tr(e,b,c,p);else{e._pendingPullIntos.length>0&&rr(e);let R=new Uint8Array(b,c,p);mn(a,R,!1)}else vn(a)?(tr(e,b,c,p),Yo(e)):tr(e,b,c,p);Ve(e)}function ce(e,n){let a=e._controlledReadableByteStream;a._state==="readable"&&(zo(e),We(e),nr(e),vi(a,n))}function wn(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let n=e._pendingPullIntos.peek(),a=new Uint8Array(n.buffer,n.byteOffset+n.bytesFilled,n.byteLength-n.bytesFilled),u=Object.create(Ct.prototype);Os(u,e,a),e._byobRequest=u}return e._byobRequest}function Qo(e){let n=e._controlledReadableByteStream._state;return n==="errored"?null:n==="closed"?0:e._strategyHWM-e._queueTotalSize}function ir(e,n){let a=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(n!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(n===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(a.bytesFilled+n>a.byteLength)throw new RangeError("bytesWritten out of range")}a.buffer=a.buffer,Go(e,n)}function ar(e,n){let a=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(n.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(n.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(a.byteOffset+a.bytesFilled!==n.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(a.bufferByteLength!==n.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(a.bytesFilled+n.byteLength>a.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let c=n.byteLength;a.buffer=n.buffer,Go(e,c)}function Jo(e,n,a,u,c,p,b){n._controlledReadableByteStream=e,n._pullAgain=!1,n._pulling=!1,n._byobRequest=null,n._queue=n._queueTotalSize=void 0,We(n),n._closeRequested=!1,n._started=!1,n._strategyHWM=p,n._pullAlgorithm=u,n._cancelAlgorithm=c,n._autoAllocateChunkSize=b,n._pendingPullIntos=new te,e._readableStreamController=n;let R=a();F(_(R),()=>{n._started=!0,Ve(n)},E=>{ce(n,E)})}function Cs(e,n,a){let u=Object.create(at.prototype),c=()=>{},p=()=>_(void 0),b=()=>_(void 0);n.start!==void 0&&(c=()=>n.start(u)),n.pull!==void 0&&(p=()=>n.pull(u)),n.cancel!==void 0&&(b=E=>n.cancel(E));let R=n.autoAllocateChunkSize;if(R===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");Jo(e,u,c,p,b,a,R)}function Os(e,n,a){e._associatedReadableByteStreamController=n,e._view=a}function Rn(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function qt(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function Ko(e){return new Bt(e)}function Zo(e,n){e._reader._readIntoRequests.push(n)}function qs(e,n,a){let c=e._reader._readIntoRequests.shift();a?c._closeSteps(n):c._chunkSteps(n)}function Xo(e){return e._reader._readIntoRequests.length}function vn(e){let n=e._reader;return!(n===void 0||!Ye(n))}class Bt{constructor(n){if(ve(n,1,"ReadableStreamBYOBReader"),pn(n,"First parameter"),Ue(n))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!He(n._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");Ro(this,n),this._readIntoRequests=new te}get closed(){return Ye(this)?this._closedPromise:w(sr("closed"))}cancel(n=void 0){return Ye(this)?this._ownerReadableStream===void 0?w(ot("cancel")):sn(this,n):w(sr("cancel"))}read(n){if(!Ye(this))return w(sr("read"));if(!ArrayBuffer.isView(n))return w(new TypeError("view must be an array buffer view"));if(n.byteLength===0)return w(new TypeError("view must have non-zero byteLength"));if(n.buffer.byteLength===0)return w(new TypeError("view's buffer must have non-zero byteLength"));if(er(n.buffer),this._ownerReadableStream===void 0)return w(ot("read from"));let a,u,c=g((b,R)=>{a=b,u=R});return ei(this,n,{_chunkSteps:b=>a({value:b,done:!1}),_closeSteps:b=>a({value:b,done:!0}),_errorSteps:b=>u(b)}),c}releaseLock(){if(!Ye(this))throw sr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");we(this)}}}Object.defineProperties(Bt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Bt.prototype,t.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function Ye(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof Bt}function ei(e,n,a){let u=e._ownerReadableStream;u._disturbed=!0,u._state==="errored"?a._errorSteps(u._storedError):Ts(u._readableStreamController,n,a)}function sr(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function Dt(e,n){let{highWaterMark:a}=e;if(a===void 0)return n;if(Io(a)||a<0)throw new RangeError("Invalid highWaterMark");return a}function ur(e){let{size:n}=e;return n||(()=>1)}function lr(e,n){Re(e,n);let a=e==null?void 0:e.highWaterMark,u=e==null?void 0:e.size;return{highWaterMark:a===void 0?void 0:hn(a),size:u===void 0?void 0:Bs(u,`${n} has member 'size' that`)}}function Bs(e,n){return fe(e,n),a=>hn(e(a))}function Ds(e,n){Re(e,n);let a=e==null?void 0:e.abort,u=e==null?void 0:e.close,c=e==null?void 0:e.start,p=e==null?void 0:e.type,b=e==null?void 0:e.write;return{abort:a===void 0?void 0:ks(a,e,`${n} has member 'abort' that`),close:u===void 0?void 0:Ls(u,e,`${n} has member 'close' that`),start:c===void 0?void 0:Ws(c,e,`${n} has member 'start' that`),write:b===void 0?void 0:Fs(b,e,`${n} has member 'write' that`),type:p}}function ks(e,n,a){return fe(e,a),u=>L(e,n,[u])}function Ls(e,n,a){return fe(e,a),()=>L(e,n,[])}function Ws(e,n,a){return fe(e,a),u=>x(e,n,[u])}function Fs(e,n,a){return fe(e,a),(u,c)=>L(e,n,[u,c])}function ti(e,n){if(!st(e))throw new TypeError(`${n} is not a WritableStream.`)}function Ms(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}let Is=typeof AbortController=="function";function Us(){if(Is)return new AbortController}class kt{constructor(n={},a={}){n===void 0?n=null:Co(n,"First parameter");let u=lr(a,"Second parameter"),c=Ds(n,"First parameter");if(ni(this),c.type!==void 0)throw new RangeError("Invalid type is specified");let b=ur(u),R=Dt(u,1);Xs(this,c,R,b)}get locked(){if(!st(this))throw pr("locked");return ut(this)}abort(n=void 0){return st(this)?ut(this)?w(new TypeError("Cannot abort a stream that already has a writer")):fr(this,n):w(pr("abort"))}close(){return st(this)?ut(this)?w(new TypeError("Cannot close a stream that already has a writer")):ye(this)?w(new TypeError("Cannot close an already-closing stream")):oi(this):w(pr("close"))}getWriter(){if(!st(this))throw pr("getWriter");return ri(this)}}Object.defineProperties(kt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(kt.prototype,t.toStringTag,{value:"WritableStream",configurable:!0});function ri(e){return new Lt(e)}function xs(e,n,a,u,c=1,p=()=>1){let b=Object.create(kt.prototype);ni(b);let R=Object.create(lt.prototype);return fi(b,R,e,n,a,u,c,p),b}function ni(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new te,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function st(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof kt}function ut(e){return e._writer!==void 0}function fr(e,n){var a;if(e._state==="closed"||e._state==="errored")return _(void 0);e._writableStreamController._abortReason=n,(a=e._writableStreamController._abortController)===null||a===void 0||a.abort();let u=e._state;if(u==="closed"||u==="errored")return _(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let c=!1;u==="erroring"&&(c=!0,n=void 0);let p=g((b,R)=>{e._pendingAbortRequest={_promise:void 0,_resolve:b,_reject:R,_reason:n,_wasAlreadyErroring:c}});return e._pendingAbortRequest._promise=p,c||En(e,n),p}function oi(e){let n=e._state;if(n==="closed"||n==="errored")return w(new TypeError(`The stream (in ${n} state) is not in the writable state and cannot be closed`));let a=g((c,p)=>{let b={_resolve:c,_reject:p};e._closeRequest=b}),u=e._writer;return u!==void 0&&e._backpressure&&n==="writable"&&Ln(u),eu(e._writableStreamController),a}function $s(e){return g((a,u)=>{let c={_resolve:a,_reject:u};e._writeRequests.push(c)})}function Tn(e,n){if(e._state==="writable"){En(e,n);return}Pn(e)}function En(e,n){let a=e._writableStreamController;e._state="erroring",e._storedError=n;let u=e._writer;u!==void 0&&ai(u,n),!Vs(e)&&a._started&&Pn(e)}function Pn(e){e._state="errored",e._writableStreamController[Po]();let n=e._storedError;if(e._writeRequests.forEach(c=>{c._reject(n)}),e._writeRequests=new te,e._pendingAbortRequest===void 0){cr(e);return}let a=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,a._wasAlreadyErroring){a._reject(n),cr(e);return}let u=e._writableStreamController[Eo](a._reason);F(u,()=>{a._resolve(),cr(e)},c=>{a._reject(c),cr(e)})}function zs(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function js(e,n){e._inFlightWriteRequest._reject(n),e._inFlightWriteRequest=void 0,Tn(e,n)}function Ns(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,e._state==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let a=e._writer;a!==void 0&&pi(a)}function Hs(e,n){e._inFlightCloseRequest._reject(n),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(n),e._pendingAbortRequest=void 0),Tn(e,n)}function ye(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function Vs(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function Ys(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function Gs(e){e._inFlightWriteRequest=e._writeRequests.shift()}function cr(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let n=e._writer;n!==void 0&&Dn(n,e._storedError)}function An(e,n){let a=e._writer;a!==void 0&&n!==e._backpressure&&(n?su(a):Ln(a)),e._backpressure=n}class Lt{constructor(n){if(ve(n,1,"WritableStreamDefaultWriter"),ti(n,"First parameter"),ut(n))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=n,n._writer=this;let a=n._state;if(a==="writable")!ye(n)&&n._backpressure?br(this):mi(this),mr(this);else if(a==="erroring")kn(this,n._storedError),mr(this);else if(a==="closed")mi(this),iu(this);else{let u=n._storedError;kn(this,u),hi(this,u)}}get closed(){return Ge(this)?this._closedPromise:w(Qe("closed"))}get desiredSize(){if(!Ge(this))throw Qe("desiredSize");if(this._ownerWritableStream===void 0)throw Wt("desiredSize");return Zs(this)}get ready(){return Ge(this)?this._readyPromise:w(Qe("ready"))}abort(n=void 0){return Ge(this)?this._ownerWritableStream===void 0?w(Wt("abort")):Qs(this,n):w(Qe("abort"))}close(){if(!Ge(this))return w(Qe("close"));let n=this._ownerWritableStream;return n===void 0?w(Wt("close")):ye(n)?w(new TypeError("Cannot close an already-closing stream")):ii(this)}releaseLock(){if(!Ge(this))throw Qe("releaseLock");this._ownerWritableStream!==void 0&&si(this)}write(n=void 0){return Ge(this)?this._ownerWritableStream===void 0?w(Wt("write to")):ui(this,n):w(Qe("write"))}}Object.defineProperties(Lt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Lt.prototype,t.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function Ge(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof Lt}function Qs(e,n){let a=e._ownerWritableStream;return fr(a,n)}function ii(e){let n=e._ownerWritableStream;return oi(n)}function Js(e){let n=e._ownerWritableStream,a=n._state;return ye(n)||a==="closed"?_(void 0):a==="errored"?w(n._storedError):ii(e)}function Ks(e,n){e._closedPromiseState==="pending"?Dn(e,n):au(e,n)}function ai(e,n){e._readyPromiseState==="pending"?bi(e,n):uu(e,n)}function Zs(e){let n=e._ownerWritableStream,a=n._state;return a==="errored"||a==="erroring"?null:a==="closed"?0:ci(n._writableStreamController)}function si(e){let n=e._ownerWritableStream,a=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");ai(e,a),Ks(e,a),n._writer=void 0,e._ownerWritableStream=void 0}function ui(e,n){let a=e._ownerWritableStream,u=a._writableStreamController,c=tu(u,n);if(a!==e._ownerWritableStream)return w(Wt("write to"));let p=a._state;if(p==="errored")return w(a._storedError);if(ye(a)||p==="closed")return w(new TypeError("The stream is closing or closed and cannot be written to"));if(p==="erroring")return w(a._storedError);let b=$s(a);return ru(u,n,c),b}let li={};class lt{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!Cn(this))throw Bn("abortReason");return this._abortReason}get signal(){if(!Cn(this))throw Bn("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(n=void 0){if(!Cn(this))throw Bn("error");this._controlledWritableStream._state==="writable"&&di(this,n)}[Eo](n){let a=this._abortAlgorithm(n);return dr(this),a}[Po](){We(this)}}Object.defineProperties(lt.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(lt.prototype,t.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function Cn(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof lt}function fi(e,n,a,u,c,p,b,R){n._controlledWritableStream=e,e._writableStreamController=n,n._queue=void 0,n._queueTotalSize=void 0,We(n),n._abortReason=void 0,n._abortController=Us(),n._started=!1,n._strategySizeAlgorithm=R,n._strategyHWM=b,n._writeAlgorithm=u,n._closeAlgorithm=c,n._abortAlgorithm=p;let E=qn(n);An(e,E);let A=a(),O=_(A);F(O,()=>{n._started=!0,hr(n)},q=>{n._started=!0,Tn(e,q)})}function Xs(e,n,a,u){let c=Object.create(lt.prototype),p=()=>{},b=()=>_(void 0),R=()=>_(void 0),E=()=>_(void 0);n.start!==void 0&&(p=()=>n.start(c)),n.write!==void 0&&(b=A=>n.write(A,c)),n.close!==void 0&&(R=()=>n.close()),n.abort!==void 0&&(E=A=>n.abort(A)),fi(e,c,p,b,R,E,a,u)}function dr(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function eu(e){yn(e,li,0),hr(e)}function tu(e,n){try{return e._strategySizeAlgorithm(n)}catch(a){return On(e,a),1}}function ci(e){return e._strategyHWM-e._queueTotalSize}function ru(e,n,a){try{yn(e,n,a)}catch(c){On(e,c);return}let u=e._controlledWritableStream;if(!ye(u)&&u._state==="writable"){let c=qn(e);An(u,c)}hr(e)}function hr(e){let n=e._controlledWritableStream;if(!e._started||n._inFlightWriteRequest!==void 0)return;if(n._state==="erroring"){Pn(n);return}if(e._queue.length===0)return;let u=vs(e);u===li?nu(e):ou(e,u)}function On(e,n){e._controlledWritableStream._state==="writable"&&di(e,n)}function nu(e){let n=e._controlledWritableStream;Ys(n),bn(e);let a=e._closeAlgorithm();dr(e),F(a,()=>{Ns(n)},u=>{Hs(n,u)})}function ou(e,n){let a=e._controlledWritableStream;Gs(a);let u=e._writeAlgorithm(n);F(u,()=>{zs(a);let c=a._state;if(bn(e),!ye(a)&&c==="writable"){let p=qn(e);An(a,p)}hr(e)},c=>{a._state==="writable"&&dr(e),js(a,c)})}function qn(e){return ci(e)<=0}function di(e,n){let a=e._controlledWritableStream;dr(e),En(a,n)}function pr(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function Bn(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function Qe(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function Wt(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function mr(e){e._closedPromise=g((n,a)=>{e._closedPromise_resolve=n,e._closedPromise_reject=a,e._closedPromiseState="pending"})}function hi(e,n){mr(e),Dn(e,n)}function iu(e){mr(e),pi(e)}function Dn(e,n){e._closedPromise_reject!==void 0&&(G(e._closedPromise),e._closedPromise_reject(n),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function au(e,n){hi(e,n)}function pi(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function br(e){e._readyPromise=g((n,a)=>{e._readyPromise_resolve=n,e._readyPromise_reject=a}),e._readyPromiseState="pending"}function kn(e,n){br(e),bi(e,n)}function mi(e){br(e),Ln(e)}function bi(e,n){e._readyPromise_reject!==void 0&&(G(e._readyPromise),e._readyPromise_reject(n),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function su(e){br(e)}function uu(e,n){kn(e,n)}function Ln(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}let yi=typeof DOMException<"u"?DOMException:void 0;function lu(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function fu(){let e=function(a,u){this.message=a||"",this.name=u||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}let cu=lu(yi)?yi:fu();function _i(e,n,a,u,c,p){let b=it(e),R=ri(n);e._disturbed=!0;let E=!1,A=_(void 0);return g((O,q)=>{let $;if(p!==void 0){if($=()=>{let T=new cu("Aborted","AbortError"),P=[];u||P.push(()=>n._state==="writable"?fr(n,T):_(void 0)),c||P.push(()=>e._state==="readable"?de(e,T):_(void 0)),Q(()=>Promise.all(P.map(M=>M())),!0,T)},p.aborted){$();return}p.addEventListener("abort",$)}function he(){return g((T,P)=>{function M(re){re?T():S(dt(),M,P)}M(!1)})}function dt(){return E?_(!0):S(R._readyPromise,()=>g((T,P)=>{Pt(b,{_chunkSteps:M=>{A=S(ui(R,M),void 0,o),T(!1)},_closeSteps:()=>T(!0),_errorSteps:P})}))}if(Te(e,b._closedPromise,T=>{u?ie(!0,T):Q(()=>fr(n,T),!0,T)}),Te(n,R._closedPromise,T=>{c?ie(!0,T):Q(()=>de(e,T),!0,T)}),V(e,b._closedPromise,()=>{a?ie():Q(()=>Js(R))}),ye(n)||n._state==="closed"){let T=new TypeError("the destination writable stream closed before all data could be piped to it");c?ie(!0,T):Q(()=>de(e,T),!0,T)}G(he());function xe(){let T=A;return S(A,()=>T!==A?xe():void 0)}function Te(T,P,M){T._state==="errored"?M(T._storedError):D(P,M)}function V(T,P,M){T._state==="closed"?M():B(P,M)}function Q(T,P,M){if(E)return;E=!0,n._state==="writable"&&!ye(n)?B(xe(),re):re();function re(){F(T(),()=>Ee(P,M),ht=>Ee(!0,ht))}}function ie(T,P){E||(E=!0,n._state==="writable"&&!ye(n)?B(xe(),()=>Ee(T,P)):Ee(T,P))}function Ee(T,P){si(R),we(b),p!==void 0&&p.removeEventListener("abort",$),T?q(P):O(void 0)}})}class ft{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!yr(this))throw Sr("desiredSize");return Wn(this)}close(){if(!yr(this))throw Sr("close");if(!ct(this))throw new TypeError("The stream is not in a state that permits close");Mt(this)}enqueue(n=void 0){if(!yr(this))throw Sr("enqueue");if(!ct(this))throw new TypeError("The stream is not in a state that permits enqueue");return gr(this,n)}error(n=void 0){if(!yr(this))throw Sr("error");Fe(this,n)}[fn](n){We(this);let a=this._cancelAlgorithm(n);return _r(this),a}[cn](n){let a=this._controlledReadableStream;if(this._queue.length>0){let u=bn(this);this._closeRequested&&this._queue.length===0?(_r(this),It(a)):Ft(this),n._chunkSteps(u)}else Bo(a,n),Ft(this)}}Object.defineProperties(ft.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(ft.prototype,t.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function yr(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof ft}function Ft(e){if(!gi(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let a=e._pullAlgorithm();F(a,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Ft(e))},u=>{Fe(e,u)})}function gi(e){let n=e._controlledReadableStream;return!ct(e)||!e._started?!1:!!(Ue(n)&&Zt(n)>0||Wn(e)>0)}function _r(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Mt(e){if(!ct(e))return;let n=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(_r(e),It(n))}function gr(e,n){if(!ct(e))return;let a=e._controlledReadableStream;if(Ue(a)&&Zt(a)>0)mn(a,n,!1);else{let u;try{u=e._strategySizeAlgorithm(n)}catch(c){throw Fe(e,c),c}try{yn(e,n,u)}catch(c){throw Fe(e,c),c}}Ft(e)}function Fe(e,n){let a=e._controlledReadableStream;a._state==="readable"&&(We(e),_r(e),vi(a,n))}function Wn(e){let n=e._controlledReadableStream._state;return n==="errored"?null:n==="closed"?0:e._strategyHWM-e._queueTotalSize}function du(e){return!gi(e)}function ct(e){let n=e._controlledReadableStream._state;return!e._closeRequested&&n==="readable"}function Si(e,n,a,u,c,p,b){n._controlledReadableStream=e,n._queue=void 0,n._queueTotalSize=void 0,We(n),n._started=!1,n._closeRequested=!1,n._pullAgain=!1,n._pulling=!1,n._strategySizeAlgorithm=b,n._strategyHWM=p,n._pullAlgorithm=u,n._cancelAlgorithm=c,e._readableStreamController=n;let R=a();F(_(R),()=>{n._started=!0,Ft(n)},E=>{Fe(n,E)})}function hu(e,n,a,u){let c=Object.create(ft.prototype),p=()=>{},b=()=>_(void 0),R=()=>_(void 0);n.start!==void 0&&(p=()=>n.start(c)),n.pull!==void 0&&(b=()=>n.pull(c)),n.cancel!==void 0&&(R=E=>n.cancel(E)),Si(e,c,p,b,R,a,u)}function Sr(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function pu(e,n){return He(e._readableStreamController)?bu(e):mu(e)}function mu(e,n){let a=it(e),u=!1,c=!1,p=!1,b=!1,R,E,A,O,q,$=g(V=>{q=V});function he(){return u?(c=!0,_(void 0)):(u=!0,Pt(a,{_chunkSteps:Q=>{C(()=>{c=!1;let ie=Q,Ee=Q;p||gr(A._readableStreamController,ie),b||gr(O._readableStreamController,Ee),u=!1,c&&he()})},_closeSteps:()=>{u=!1,p||Mt(A._readableStreamController),b||Mt(O._readableStreamController),(!p||!b)&&q(void 0)},_errorSteps:()=>{u=!1}}),_(void 0))}function dt(V){if(p=!0,R=V,b){let Q=At([R,E]),ie=de(e,Q);q(ie)}return $}function xe(V){if(b=!0,E=V,p){let Q=At([R,E]),ie=de(e,Q);q(ie)}return $}function Te(){}return A=Fn(Te,he,dt),O=Fn(Te,he,xe),D(a._closedPromise,V=>{Fe(A._readableStreamController,V),Fe(O._readableStreamController,V),(!p||!b)&&q(void 0)}),[A,O]}function bu(e){let n=it(e),a=!1,u=!1,c=!1,p=!1,b=!1,R,E,A,O,q,$=g(T=>{q=T});function he(T){D(T._closedPromise,P=>{T===n&&(ce(A._readableStreamController,P),ce(O._readableStreamController,P),(!p||!b)&&q(void 0))})}function dt(){Ye(n)&&(we(n),n=it(e),he(n)),Pt(n,{_chunkSteps:P=>{C(()=>{u=!1,c=!1;let M=P,re=P;if(!p&&!b)try{re=$o(P)}catch(ht){ce(A._readableStreamController,ht),ce(O._readableStreamController,ht),q(de(e,ht));return}p||or(A._readableStreamController,M),b||or(O._readableStreamController,re),a=!1,u?Te():c&&V()})},_closeSteps:()=>{a=!1,p||Ot(A._readableStreamController),b||Ot(O._readableStreamController),A._readableStreamController._pendingPullIntos.length>0&&ir(A._readableStreamController,0),O._readableStreamController._pendingPullIntos.length>0&&ir(O._readableStreamController,0),(!p||!b)&&q(void 0)},_errorSteps:()=>{a=!1}})}function xe(T,P){Le(n)&&(we(n),n=Ko(e),he(n));let M=P?O:A,re=P?A:O;ei(n,T,{_chunkSteps:pt=>{C(()=>{u=!1,c=!1;let mt=P?b:p;if(P?p:b)mt||ar(M._readableStreamController,pt);else{let Fi;try{Fi=$o(pt)}catch(In){ce(M._readableStreamController,In),ce(re._readableStreamController,In),q(de(e,In));return}mt||ar(M._readableStreamController,pt),or(re._readableStreamController,Fi)}a=!1,u?Te():c&&V()})},_closeSteps:pt=>{a=!1;let mt=P?b:p,Or=P?p:b;mt||Ot(M._readableStreamController),Or||Ot(re._readableStreamController),pt!==void 0&&(mt||ar(M._readableStreamController,pt),!Or&&re._readableStreamController._pendingPullIntos.length>0&&ir(re._readableStreamController,0)),(!mt||!Or)&&q(void 0)},_errorSteps:()=>{a=!1}})}function Te(){if(a)return u=!0,_(void 0);a=!0;let T=wn(A._readableStreamController);return T===null?dt():xe(T._view,!1),_(void 0)}function V(){if(a)return c=!0,_(void 0);a=!0;let T=wn(O._readableStreamController);return T===null?dt():xe(T._view,!0),_(void 0)}function Q(T){if(p=!0,R=T,b){let P=At([R,E]),M=de(e,P);q(M)}return $}function ie(T){if(b=!0,E=T,p){let P=At([R,E]),M=de(e,P);q(M)}return $}function Ee(){}return A=Ri(Ee,Te,Q),O=Ri(Ee,V,ie),he(n),[A,O]}function yu(e,n){Re(e,n);let a=e,u=a==null?void 0:a.autoAllocateChunkSize,c=a==null?void 0:a.cancel,p=a==null?void 0:a.pull,b=a==null?void 0:a.start,R=a==null?void 0:a.type;return{autoAllocateChunkSize:u===void 0?void 0:qo(u,`${n} has member 'autoAllocateChunkSize' that`),cancel:c===void 0?void 0:_u(c,a,`${n} has member 'cancel' that`),pull:p===void 0?void 0:gu(p,a,`${n} has member 'pull' that`),start:b===void 0?void 0:Su(b,a,`${n} has member 'start' that`),type:R===void 0?void 0:wu(R,`${n} has member 'type' that`)}}function _u(e,n,a){return fe(e,a),u=>L(e,n,[u])}function gu(e,n,a){return fe(e,a),u=>L(e,n,[u])}function Su(e,n,a){return fe(e,a),u=>x(e,n,[u])}function wu(e,n){if(e=`${e}`,e!=="bytes")throw new TypeError(`${n} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function Ru(e,n){Re(e,n);let a=e==null?void 0:e.mode;return{mode:a===void 0?void 0:vu(a,`${n} has member 'mode' that`)}}function vu(e,n){if(e=`${e}`,e!=="byob")throw new TypeError(`${n} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function Tu(e,n){Re(e,n);let a=e==null?void 0:e.preventCancel;return{preventCancel:Boolean(a)}}function wi(e,n){Re(e,n);let a=e==null?void 0:e.preventAbort,u=e==null?void 0:e.preventCancel,c=e==null?void 0:e.preventClose,p=e==null?void 0:e.signal;return p!==void 0&&Eu(p,`${n} has member 'signal' that`),{preventAbort:Boolean(a),preventCancel:Boolean(u),preventClose:Boolean(c),signal:p}}function Eu(e,n){if(!Ms(e))throw new TypeError(`${n} is not an AbortSignal.`)}function Pu(e,n){Re(e,n);let a=e==null?void 0:e.readable;dn(a,"readable","ReadableWritablePair"),pn(a,`${n} has member 'readable' that`);let u=e==null?void 0:e.writable;return dn(u,"writable","ReadableWritablePair"),ti(u,`${n} has member 'writable' that`),{readable:a,writable:u}}class Me{constructor(n={},a={}){n===void 0?n=null:Co(n,"First parameter");let u=lr(a,"Second parameter"),c=yu(n,"First parameter");if(Mn(this),c.type==="bytes"){if(u.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let p=Dt(u,0);Cs(this,c,p)}else{let p=ur(u),b=Dt(u,1);hu(this,c,b,p)}}get locked(){if(!Ie(this))throw Je("locked");return Ue(this)}cancel(n=void 0){return Ie(this)?Ue(this)?w(new TypeError("Cannot cancel a stream that already has a reader")):de(this,n):w(Je("cancel"))}getReader(n=void 0){if(!Ie(this))throw Je("getReader");return Ru(n,"First parameter").mode===void 0?it(this):Ko(this)}pipeThrough(n,a={}){if(!Ie(this))throw Je("pipeThrough");ve(n,1,"pipeThrough");let u=Pu(n,"First parameter"),c=wi(a,"Second parameter");if(Ue(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(ut(u.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let p=_i(this,u.writable,c.preventClose,c.preventAbort,c.preventCancel,c.signal);return G(p),u.readable}pipeTo(n,a={}){if(!Ie(this))return w(Je("pipeTo"));if(n===void 0)return w("Parameter 1 is required in 'pipeTo'.");if(!st(n))return w(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let u;try{u=wi(a,"Second parameter")}catch(c){return w(c)}return Ue(this)?w(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):ut(n)?w(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):_i(this,n,u.preventClose,u.preventAbort,u.preventCancel,u.signal)}tee(){if(!Ie(this))throw Je("tee");let n=pu(this);return At(n)}values(n=void 0){if(!Ie(this))throw Je("values");let a=Tu(n,"First parameter");return ws(this,a.preventCancel)}}Object.defineProperties(Me.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Me.prototype,t.toStringTag,{value:"ReadableStream",configurable:!0}),typeof t.asyncIterator=="symbol"&&Object.defineProperty(Me.prototype,t.asyncIterator,{value:Me.prototype.values,writable:!0,configurable:!0});function Fn(e,n,a,u=1,c=()=>1){let p=Object.create(Me.prototype);Mn(p);let b=Object.create(ft.prototype);return Si(p,b,e,n,a,u,c),p}function Ri(e,n,a){let u=Object.create(Me.prototype);Mn(u);let c=Object.create(at.prototype);return Jo(u,c,e,n,a,0,void 0),u}function Mn(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function Ie(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof Me}function Ue(e){return e._reader!==void 0}function de(e,n){if(e._disturbed=!0,e._state==="closed")return _(void 0);if(e._state==="errored")return w(e._storedError);It(e);let a=e._reader;a!==void 0&&Ye(a)&&(a._readIntoRequests.forEach(c=>{c._closeSteps(void 0)}),a._readIntoRequests=new te);let u=e._readableStreamController[fn](n);return U(u,o)}function It(e){e._state="closed";let n=e._reader;n!==void 0&&(To(n),Le(n)&&(n._readRequests.forEach(a=>{a._closeSteps()}),n._readRequests=new te))}function vi(e,n){e._state="errored",e._storedError=n;let a=e._reader;a!==void 0&&(ln(a,n),Le(a)?(a._readRequests.forEach(u=>{u._errorSteps(n)}),a._readRequests=new te):(a._readIntoRequests.forEach(u=>{u._errorSteps(n)}),a._readIntoRequests=new te))}function Je(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function Ti(e,n){Re(e,n);let a=e==null?void 0:e.highWaterMark;return dn(a,"highWaterMark","QueuingStrategyInit"),{highWaterMark:hn(a)}}let Ei=e=>e.byteLength;try{Object.defineProperty(Ei,"name",{value:"size",configurable:!0})}catch{}class wr{constructor(n){ve(n,1,"ByteLengthQueuingStrategy"),n=Ti(n,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=n.highWaterMark}get highWaterMark(){if(!Ai(this))throw Pi("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!Ai(this))throw Pi("size");return Ei}}Object.defineProperties(wr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(wr.prototype,t.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function Pi(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function Ai(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof wr}let Ci=()=>1;try{Object.defineProperty(Ci,"name",{value:"size",configurable:!0})}catch{}class Rr{constructor(n){ve(n,1,"CountQueuingStrategy"),n=Ti(n,"First parameter"),this._countQueuingStrategyHighWaterMark=n.highWaterMark}get highWaterMark(){if(!qi(this))throw Oi("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!qi(this))throw Oi("size");return Ci}}Object.defineProperties(Rr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Rr.prototype,t.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function Oi(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function qi(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof Rr}function Au(e,n){Re(e,n);let a=e==null?void 0:e.flush,u=e==null?void 0:e.readableType,c=e==null?void 0:e.start,p=e==null?void 0:e.transform,b=e==null?void 0:e.writableType;return{flush:a===void 0?void 0:Cu(a,e,`${n} has member 'flush' that`),readableType:u,start:c===void 0?void 0:Ou(c,e,`${n} has member 'start' that`),transform:p===void 0?void 0:qu(p,e,`${n} has member 'transform' that`),writableType:b}}function Cu(e,n,a){return fe(e,a),u=>L(e,n,[u])}function Ou(e,n,a){return fe(e,a),u=>x(e,n,[u])}function qu(e,n,a){return fe(e,a),(u,c)=>L(e,n,[u,c])}class vr{constructor(n={},a={},u={}){n===void 0&&(n=null);let c=lr(a,"Second parameter"),p=lr(u,"Third parameter"),b=Au(n,"First parameter");if(b.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(b.writableType!==void 0)throw new RangeError("Invalid writableType specified");let R=Dt(p,0),E=ur(p),A=Dt(c,1),O=ur(c),q,$=g(he=>{q=he});Bu(this,$,A,O,R,E),ku(this,b),b.start!==void 0?q(b.start(this._transformStreamController)):q(void 0)}get readable(){if(!Bi(this))throw Wi("readable");return this._readable}get writable(){if(!Bi(this))throw Wi("writable");return this._writable}}Object.defineProperties(vr.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(vr.prototype,t.toStringTag,{value:"TransformStream",configurable:!0});function Bu(e,n,a,u,c,p){function b(){return n}function R($){return Fu(e,$)}function E($){return Mu(e,$)}function A(){return Iu(e)}e._writable=xs(b,R,A,E,a,u);function O(){return Uu(e)}function q($){return Er(e,$),_(void 0)}e._readable=Fn(b,O,q,c,p),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,Pr(e,!0),e._transformStreamController=void 0}function Bi(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof vr}function Tr(e,n){Fe(e._readable._readableStreamController,n),Er(e,n)}function Er(e,n){Di(e._transformStreamController),On(e._writable._writableStreamController,n),e._backpressure&&Pr(e,!1)}function Pr(e,n){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=g(a=>{e._backpressureChangePromise_resolve=a}),e._backpressure=n}class Ut{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Ar(this))throw Cr("desiredSize");let n=this._controlledTransformStream._readable._readableStreamController;return Wn(n)}enqueue(n=void 0){if(!Ar(this))throw Cr("enqueue");ki(this,n)}error(n=void 0){if(!Ar(this))throw Cr("error");Lu(this,n)}terminate(){if(!Ar(this))throw Cr("terminate");Wu(this)}}Object.defineProperties(Ut.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Ut.prototype,t.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function Ar(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof Ut}function Du(e,n,a,u){n._controlledTransformStream=e,e._transformStreamController=n,n._transformAlgorithm=a,n._flushAlgorithm=u}function ku(e,n){let a=Object.create(Ut.prototype),u=p=>{try{return ki(a,p),_(void 0)}catch(b){return w(b)}},c=()=>_(void 0);n.transform!==void 0&&(u=p=>n.transform(p,a)),n.flush!==void 0&&(c=()=>n.flush(a)),Du(e,a,u,c)}function Di(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function ki(e,n){let a=e._controlledTransformStream,u=a._readable._readableStreamController;if(!ct(u))throw new TypeError("Readable side is not in a state that permits enqueue");try{gr(u,n)}catch(p){throw Er(a,p),a._readable._storedError}du(u)!==a._backpressure&&Pr(a,!0)}function Lu(e,n){Tr(e._controlledTransformStream,n)}function Li(e,n){let a=e._transformAlgorithm(n);return U(a,void 0,u=>{throw Tr(e._controlledTransformStream,u),u})}function Wu(e){let n=e._controlledTransformStream,a=n._readable._readableStreamController;Mt(a);let u=new TypeError("TransformStream terminated");Er(n,u)}function Fu(e,n){let a=e._transformStreamController;if(e._backpressure){let u=e._backpressureChangePromise;return U(u,()=>{let c=e._writable;if(c._state==="erroring")throw c._storedError;return Li(a,n)})}return Li(a,n)}function Mu(e,n){return Tr(e,n),_(void 0)}function Iu(e){let n=e._readable,a=e._transformStreamController,u=a._flushAlgorithm();return Di(a),U(u,()=>{if(n._state==="errored")throw n._storedError;Mt(n._readableStreamController)},c=>{throw Tr(e,c),n._storedError})}function Uu(e){return Pr(e,!1),e._backpressureChangePromise}function Cr(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function Wi(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}r.ByteLengthQueuingStrategy=wr,r.CountQueuingStrategy=Rr,r.ReadableByteStreamController=at,r.ReadableStream=Me,r.ReadableStreamBYOBReader=Bt,r.ReadableStreamBYOBRequest=Ct,r.ReadableStreamDefaultController=ft,r.ReadableStreamDefaultReader=Et,r.TransformStream=vr,r.TransformStreamDefaultController=Ut,r.WritableStream=kt,r.WritableStreamDefaultController=lt,r.WritableStreamDefaultWriter=Lt,Object.defineProperty(r,"__esModule",{value:!0})})});var Wa=k(()=>{if(!globalThis.ReadableStream)try{let r=require("node:process"),{emitWarning:t}=r;try{r.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),r.emitWarning=t}catch(o){throw r.emitWarning=t,o}}catch{Object.assign(globalThis,La())}try{let{Blob:r}=require("buffer");r&&!r.prototype.stream&&(r.prototype.stream=function(o){let i=0,s=this;return new ReadableStream({type:"bytes",async pull(l){let m=await s.slice(i,Math.min(s.size,i+65536)).arrayBuffer();i+=m.byteLength,l.enqueue(new Uint8Array(m)),i===s.size&&l.close()}})})}catch{}});async function*fo(r,t=!0){for(let o of r)if("stream"in o)yield*o.stream();else if(ArrayBuffer.isView(o))if(t){let i=o.byteOffset,s=o.byteOffset+o.byteLength;for(;i!==s;){let l=Math.min(s-i,Fa),f=o.buffer.slice(i,i+l);i+=f.byteLength,yield new Uint8Array(f)}}else yield o;else{let i=0,s=o;for(;i!==s.size;){let f=await s.slice(i,Math.min(s.size,i+Fa)).arrayBuffer();i+=f.byteLength,yield new Uint8Array(f)}}}var pd,Fa,Ma,dc,Oe,jt=xt(()=>{pd=Pe(Wa(),1);Fa=65536;Ma=class co{#e=[];#t="";#r=0;#n="transparent";constructor(t=[],o={}){if(typeof t!="object"||t===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof t[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof o!="object"&&typeof o!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");o===null&&(o={});let i=new TextEncoder;for(let l of t){let f;ArrayBuffer.isView(l)?f=new Uint8Array(l.buffer.slice(l.byteOffset,l.byteOffset+l.byteLength)):l instanceof ArrayBuffer?f=new Uint8Array(l.slice(0)):l instanceof co?f=l:f=i.encode(`${l}`),this.#r+=ArrayBuffer.isView(f)?f.byteLength:f.size,this.#e.push(f)}this.#n=`${o.endings===void 0?"transparent":o.endings}`;let s=o.type===void 0?"":String(o.type);this.#t=/^[\x20-\x7E]*$/.test(s)?s:""}get size(){return this.#r}get type(){return this.#t}async text(){let t=new TextDecoder,o="";for await(let i of fo(this.#e,!1))o+=t.decode(i,{stream:!0});return o+=t.decode(),o}async arrayBuffer(){let t=new Uint8Array(this.size),o=0;for await(let i of fo(this.#e,!1))t.set(i,o),o+=i.length;return t.buffer}stream(){let t=fo(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(o){let i=await t.next();i.done?o.close():o.enqueue(i.value)},async cancel(){await t.return()}})}slice(t=0,o=this.size,i=""){let{size:s}=this,l=t<0?Math.max(s+t,0):Math.min(t,s),f=o<0?Math.max(s+o,0):Math.min(o,s),m=Math.max(f-l,0),h=this.#e,d=[],y=0;for(let _ of h){if(y>=m)break;let w=ArrayBuffer.isView(_)?_.byteLength:_.size;if(l&&w<=l)l-=w,f-=w;else{let S;ArrayBuffer.isView(_)?(S=_.subarray(l,Math.min(w,f)),y+=S.byteLength):(S=_.slice(l,Math.min(w,f)),y+=S.size),f-=w,d.push(S),l=0}}let g=new co([],{type:String(i).toLowerCase()});return g.#r=m,g.#e=d,g}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](t){return t&&typeof t=="object"&&typeof t.constructor=="function"&&(typeof t.stream=="function"||typeof t.arrayBuffer=="function")&&/^(Blob|File)$/.test(t[Symbol.toStringTag])}};Object.defineProperties(Ma.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});dc=Ma,Oe=dc});var hc,pc,Rt,ho=xt(()=>{jt();hc=class extends Oe{#e=0;#t="";constructor(t,o,i={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(t,i),i===null&&(i={});let s=i.lastModified===void 0?Date.now():Number(i.lastModified);Number.isNaN(s)||(this.#e=s),this.#t=String(o)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](t){return!!t&&t instanceof Oe&&/^(File)$/.test(t[Symbol.toStringTag])}},pc=hc,Rt=pc});function xa(r,t=Oe){var o=`${Ia()}${Ia()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),i=[],s=`--${o}\r
Content-Disposition: form-data; name="`;return r.forEach((l,f)=>typeof l=="string"?i.push(s+po(f)+`"\r
\r
${l.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):i.push(s+po(f)+`"; filename="${po(l.name,1)}"\r
Content-Type: ${l.type||"application/octet-stream"}\r
\r
`,l,`\r
`)),i.push(`--${o}--`),new t(i,{type:"multipart/form-data; boundary="+o})}var Nt,mc,bc,Ia,yc,Ua,po,Xe,et,Kr=xt(()=>{jt();ho();({toStringTag:Nt,iterator:mc,hasInstance:bc}=Symbol),Ia=Math.random,yc="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),Ua=(r,t,o)=>(r+="",/^(Blob|File)$/.test(t&&t[Nt])?[(o=o!==void 0?o+"":t[Nt]=="File"?t.name:"blob",r),t.name!==o||t[Nt]=="blob"?new Rt([t],o,t):t]:[r,t+""]),po=(r,t)=>(t?r:r.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),Xe=(r,t,o)=>{if(t.length<o)throw new TypeError(`Failed to execute '${r}' on 'FormData': ${o} arguments required, but only ${t.length} present.`)},et=class{#e=[];constructor(...t){if(t.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[Nt](){return"FormData"}[mc](){return this.entries()}static[bc](t){return t&&typeof t=="object"&&t[Nt]==="FormData"&&!yc.some(o=>typeof t[o]!="function")}append(...t){Xe("append",arguments,2),this.#e.push(Ua(...t))}delete(t){Xe("delete",arguments,1),t+="",this.#e=this.#e.filter(([o])=>o!==t)}get(t){Xe("get",arguments,1),t+="";for(var o=this.#e,i=o.length,s=0;s<i;s++)if(o[s][0]===t)return o[s][1];return null}getAll(t,o){return Xe("getAll",arguments,1),o=[],t+="",this.#e.forEach(i=>i[0]===t&&o.push(i[1])),o}has(t){return Xe("has",arguments,1),t+="",this.#e.some(o=>o[0]===t)}forEach(t,o){Xe("forEach",arguments,1);for(var[i,s]of this)t.call(o,s,i,this)}set(...t){Xe("set",arguments,2);var o=[],i=!0;t=Ua(...t),this.#e.forEach(s=>{s[0]===t[0]?i&&(i=!o.push(t)):o.push(s)}),i&&o.push(t),this.#e=o}*entries(){yield*this.#e}*keys(){for(var[t]of this)yield t}*values(){for(var[,t]of this)yield t}}});var Ha=k((Ad,Na)=>{if(!globalThis.DOMException)try{let{MessageChannel:r}=require("worker_threads"),t=new r().port1,o=new ArrayBuffer;t.postMessage(o,[o,o])}catch(r){r.constructor.name==="DOMException"&&(globalThis.DOMException=r.constructor)}Na.exports=globalThis.DOMException});var Vt,Va,_c,Xr,bo=xt(()=>{Vt=require("node:fs"),Va=Pe(Ha(),1);ho();jt();({stat:_c}=Vt.promises),Xr=class{#e;#t;constructor(t){this.#e=t.path,this.#t=t.start,this.size=t.size,this.lastModified=t.lastModified}slice(t,o){return new Xr({path:this.#e,lastModified:this.lastModified,size:o-t,start:this.#t+t})}async*stream(){let{mtimeMs:t}=await _c(this.#e);if(t>this.lastModified)throw new Va.default("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*(0,Vt.createReadStream)(this.#e,{start:this.#t,end:this.#t+this.size-1})}get[Symbol.toStringTag](){return"Blob"}}});var Ga={};Hu(Ga,{toFormData:()=>Ec});function Tc(r){let t=r.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!t)return;let o=t[2]||t[3]||"",i=o.slice(o.lastIndexOf("\\")+1);return i=i.replace(/%22/g,'"'),i=i.replace(/&#(\d{4});/g,(s,l)=>String.fromCharCode(l)),i}async function Ec(r,t){if(!/multipart/i.test(t))throw new TypeError("Failed to fetch");let o=t.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!o)throw new TypeError("no or bad content-type header, no multipart boundary");let i=new yo(o[1]||o[2]),s,l,f,m,h,d,y=[],g=new et,_=D=>{f+=B.decode(D,{stream:!0})},w=D=>{y.push(D)},S=()=>{let D=new Rt(y,d,{type:h});g.append(m,D)},F=()=>{g.append(m,f)},B=new TextDecoder("utf-8");B.decode(),i.onPartBegin=function(){i.onPartData=_,i.onPartEnd=F,s="",l="",f="",m="",h="",d=null,y.length=0},i.onHeaderField=function(D){s+=B.decode(D,{stream:!0})},i.onHeaderValue=function(D){l+=B.decode(D,{stream:!0})},i.onHeaderEnd=function(){if(l+=B.decode(),s=s.toLowerCase(),s==="content-disposition"){let D=l.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);D&&(m=D[2]||D[3]||""),d=Tc(l),d&&(i.onPartData=w,i.onPartEnd=S)}else s==="content-type"&&(h=l);l="",s=""};for await(let D of r)i.write(D);return i.end(),g}var ge,I,Ya,Ne,en,tn,gc,Yt,Sc,wc,Rc,vc,tt,yo,Qa=xt(()=>{bo();Kr();ge=0,I={START_BOUNDARY:ge++,HEADER_FIELD_START:ge++,HEADER_FIELD:ge++,HEADER_VALUE_START:ge++,HEADER_VALUE:ge++,HEADER_VALUE_ALMOST_DONE:ge++,HEADERS_ALMOST_DONE:ge++,PART_DATA_START:ge++,PART_DATA:ge++,END:ge++},Ya=1,Ne={PART_BOUNDARY:Ya,LAST_BOUNDARY:Ya*=2},en=10,tn=13,gc=32,Yt=45,Sc=58,wc=97,Rc=122,vc=r=>r|32,tt=()=>{},yo=class{constructor(t){this.index=0,this.flags=0,this.onHeaderEnd=tt,this.onHeaderField=tt,this.onHeadersEnd=tt,this.onHeaderValue=tt,this.onPartBegin=tt,this.onPartData=tt,this.onPartEnd=tt,this.boundaryChars={},t=`\r
--`+t;let o=new Uint8Array(t.length);for(let i=0;i<t.length;i++)o[i]=t.charCodeAt(i),this.boundaryChars[o[i]]=!0;this.boundary=o,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=I.START_BOUNDARY}write(t){let o=0,i=t.length,s=this.index,{lookbehind:l,boundary:f,boundaryChars:m,index:h,state:d,flags:y}=this,g=this.boundary.length,_=g-1,w=t.length,S,F,B=C=>{this[C+"Mark"]=o},D=C=>{delete this[C+"Mark"]},U=(C,x,L,ke)=>{(x===void 0||x!==L)&&this[C](ke&&ke.subarray(x,L))},G=(C,x)=>{let L=C+"Mark";L in this&&(x?(U(C,this[L],o,t),delete this[L]):(U(C,this[L],t.length,t),this[L]=0))};for(o=0;o<i;o++)switch(S=t[o],d){case I.START_BOUNDARY:if(h===f.length-2){if(S===Yt)y|=Ne.LAST_BOUNDARY;else if(S!==tn)return;h++;break}else if(h-1===f.length-2){if(y&Ne.LAST_BOUNDARY&&S===Yt)d=I.END,y=0;else if(!(y&Ne.LAST_BOUNDARY)&&S===en)h=0,U("onPartBegin"),d=I.HEADER_FIELD_START;else return;break}S!==f[h+2]&&(h=-2),S===f[h+2]&&h++;break;case I.HEADER_FIELD_START:d=I.HEADER_FIELD,B("onHeaderField"),h=0;case I.HEADER_FIELD:if(S===tn){D("onHeaderField"),d=I.HEADERS_ALMOST_DONE;break}if(h++,S===Yt)break;if(S===Sc){if(h===1)return;G("onHeaderField",!0),d=I.HEADER_VALUE_START;break}if(F=vc(S),F<wc||F>Rc)return;break;case I.HEADER_VALUE_START:if(S===gc)break;B("onHeaderValue"),d=I.HEADER_VALUE;case I.HEADER_VALUE:S===tn&&(G("onHeaderValue",!0),U("onHeaderEnd"),d=I.HEADER_VALUE_ALMOST_DONE);break;case I.HEADER_VALUE_ALMOST_DONE:if(S!==en)return;d=I.HEADER_FIELD_START;break;case I.HEADERS_ALMOST_DONE:if(S!==en)return;U("onHeadersEnd"),d=I.PART_DATA_START;break;case I.PART_DATA_START:d=I.PART_DATA,B("onPartData");case I.PART_DATA:if(s=h,h===0){for(o+=_;o<w&&!(t[o]in m);)o+=g;o-=_,S=t[o]}if(h<f.length)f[h]===S?(h===0&&G("onPartData",!0),h++):h=0;else if(h===f.length)h++,S===tn?y|=Ne.PART_BOUNDARY:S===Yt?y|=Ne.LAST_BOUNDARY:h=0;else if(h-1===f.length)if(y&Ne.PART_BOUNDARY){if(h=0,S===en){y&=~Ne.PART_BOUNDARY,U("onPartEnd"),U("onPartBegin"),d=I.HEADER_FIELD_START;break}}else y&Ne.LAST_BOUNDARY&&S===Yt?(U("onPartEnd"),d=I.END,y=0):h=0;if(h>0)l[h-1]=S;else if(s>0){let C=new Uint8Array(l.buffer,l.byteOffset,l.byteLength);U("onPartData",0,s,C),s=0,B("onPartData"),o--}break;case I.END:break;default:throw new Error(`Unexpected state entered: ${d}`)}G("onHeaderField"),G("onHeaderValue"),G("onPartData"),this.index=h,this.state=d,this.flags=y}end(){if(this.state===I.HEADER_FIELD_START&&this.index===0||this.state===I.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==I.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var nt=Pe(no());var fs=Pe(require("node:http"),1),cs=Pe(require("node:https"),1),rt=Pe(require("node:zlib"),1),oe=Pe(require("node:stream"),1),Jt=require("node:buffer");function cc(r){if(!/^data:/i.test(r))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');r=r.replace(/\r?\n/g,"");let t=r.indexOf(",");if(t===-1||t<=4)throw new TypeError("malformed data: URI");let o=r.substring(5,t).split(";"),i="",s=!1,l=o[0]||"text/plain",f=l;for(let y=1;y<o.length;y++)o[y]==="base64"?s=!0:(f+=`;${o[y]}`,o[y].indexOf("charset=")===0&&(i=o[y].substring(8)));!o[0]&&!i.length&&(f+=";charset=US-ASCII",i="US-ASCII");let m=s?"base64":"ascii",h=unescape(r.substring(t+1)),d=Buffer.from(h,m);return d.type=l,d.typeFull=f,d.charset=i,d}var Da=cc;var le=Pe(require("node:stream"),1),Be=require("node:util"),ne=require("node:buffer");jt();Kr();var qe=class extends Error{constructor(t,o){super(t),Error.captureStackTrace(this,this.constructor),this.type=o}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var Z=class extends qe{constructor(t,o,i){super(t,o),i&&(this.code=this.errno=i.code,this.erroredSysCall=i.syscall)}};var Zr=Symbol.toStringTag,mo=r=>typeof r=="object"&&typeof r.append=="function"&&typeof r.delete=="function"&&typeof r.get=="function"&&typeof r.getAll=="function"&&typeof r.has=="function"&&typeof r.set=="function"&&typeof r.sort=="function"&&r[Zr]==="URLSearchParams",Ht=r=>r&&typeof r=="object"&&typeof r.arrayBuffer=="function"&&typeof r.type=="string"&&typeof r.stream=="function"&&typeof r.constructor=="function"&&/^(Blob|File)$/.test(r[Zr]),$a=r=>typeof r=="object"&&(r[Zr]==="AbortSignal"||r[Zr]==="EventTarget"),za=(r,t)=>{let o=new URL(t).hostname,i=new URL(r).hostname;return o===i||o.endsWith(`.${i}`)},ja=(r,t)=>{let o=new URL(t).protocol,i=new URL(r).protocol;return o===i};var Pc=(0,Be.promisify)(le.default.pipeline),X=Symbol("Body internals"),Se=class{constructor(t,{size:o=0}={}){let i=null;t===null?t=null:mo(t)?t=ne.Buffer.from(t.toString()):Ht(t)||ne.Buffer.isBuffer(t)||(Be.types.isAnyArrayBuffer(t)?t=ne.Buffer.from(t):ArrayBuffer.isView(t)?t=ne.Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof le.default||(t instanceof et?(t=xa(t),i=t.type.split("=")[1]):t=ne.Buffer.from(String(t))));let s=t;ne.Buffer.isBuffer(t)?s=le.default.Readable.from(t):Ht(t)&&(s=le.default.Readable.from(t.stream())),this[X]={body:t,stream:s,boundary:i,disturbed:!1,error:null},this.size=o,t instanceof le.default&&t.on("error",l=>{let f=l instanceof qe?l:new Z(`Invalid response body while trying to fetch ${this.url}: ${l.message}`,"system",l);this[X].error=f})}get body(){return this[X].stream}get bodyUsed(){return this[X].disturbed}async arrayBuffer(){let{buffer:t,byteOffset:o,byteLength:i}=await _o(this);return t.slice(o,o+i)}async formData(){let t=this.headers.get("content-type");if(t.startsWith("application/x-www-form-urlencoded")){let i=new et,s=new URLSearchParams(await this.text());for(let[l,f]of s)i.append(l,f);return i}let{toFormData:o}=await Promise.resolve().then(()=>(Qa(),Ga));return o(this.body,t)}async blob(){let t=this.headers&&this.headers.get("content-type")||this[X].body&&this[X].body.type||"",o=await this.arrayBuffer();return new Oe([o],{type:t})}async json(){let t=await this.text();return JSON.parse(t)}async text(){let t=await _o(this);return new TextDecoder().decode(t)}buffer(){return _o(this)}};Se.prototype.buffer=(0,Be.deprecate)(Se.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(Se.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,Be.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function _o(r){if(r[X].disturbed)throw new TypeError(`body used already for: ${r.url}`);if(r[X].disturbed=!0,r[X].error)throw r[X].error;let{body:t}=r;if(t===null)return ne.Buffer.alloc(0);if(!(t instanceof le.default))return ne.Buffer.alloc(0);let o=[],i=0;try{for await(let s of t){if(r.size>0&&i+s.length>r.size){let l=new Z(`content size at ${r.url} over limit: ${r.size}`,"max-size");throw t.destroy(l),l}i+=s.length,o.push(s)}}catch(s){throw s instanceof qe?s:new Z(`Invalid response body while trying to fetch ${r.url}: ${s.message}`,"system",s)}if(t.readableEnded===!0||t._readableState.ended===!0)try{return o.every(s=>typeof s=="string")?ne.Buffer.from(o.join("")):ne.Buffer.concat(o,i)}catch(s){throw new Z(`Could not create Buffer from response body for ${r.url}: ${s.message}`,"system",s)}else throw new Z(`Premature close of server response while trying to fetch ${r.url}`)}var vt=(r,t)=>{let o,i,{body:s}=r[X];if(r.bodyUsed)throw new Error("cannot clone body after it is used");return s instanceof le.default&&typeof s.getBoundary!="function"&&(o=new le.PassThrough({highWaterMark:t}),i=new le.PassThrough({highWaterMark:t}),s.pipe(o),s.pipe(i),r[X].stream=o,s=i),s},Ac=(0,Be.deprecate)(r=>r.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),rn=(r,t)=>r===null?null:typeof r=="string"?"text/plain;charset=UTF-8":mo(r)?"application/x-www-form-urlencoded;charset=UTF-8":Ht(r)?r.type||null:ne.Buffer.isBuffer(r)||Be.types.isAnyArrayBuffer(r)||ArrayBuffer.isView(r)?null:r instanceof et?`multipart/form-data; boundary=${t[X].boundary}`:r&&typeof r.getBoundary=="function"?`multipart/form-data;boundary=${Ac(r)}`:r instanceof le.default?null:"text/plain;charset=UTF-8",Ja=r=>{let{body:t}=r[X];return t===null?0:Ht(t)?t.size:ne.Buffer.isBuffer(t)?t.length:t&&typeof t.getLengthSync=="function"&&t.hasKnownLength&&t.hasKnownLength()?t.getLengthSync():null},Ka=async(r,{body:t})=>{t===null?r.end():await Pc(t,r)};var go=require("node:util"),Gt=Pe(require("node:http"),1),nn=typeof Gt.default.validateHeaderName=="function"?Gt.default.validateHeaderName:r=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(r)){let t=new TypeError(`Header name must be a valid HTTP token [${r}]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),t}},So=typeof Gt.default.validateHeaderValue=="function"?Gt.default.validateHeaderValue:(r,t)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(t)){let o=new TypeError(`Invalid character in header content ["${r}"]`);throw Object.defineProperty(o,"code",{value:"ERR_INVALID_CHAR"}),o}},ee=class extends URLSearchParams{constructor(t){let o=[];if(t instanceof ee){let i=t.raw();for(let[s,l]of Object.entries(i))o.push(...l.map(f=>[s,f]))}else if(t!=null)if(typeof t=="object"&&!go.types.isBoxedPrimitive(t)){let i=t[Symbol.iterator];if(i==null)o.push(...Object.entries(t));else{if(typeof i!="function")throw new TypeError("Header pairs must be iterable");o=[...t].map(s=>{if(typeof s!="object"||go.types.isBoxedPrimitive(s))throw new TypeError("Each header pair must be an iterable object");return[...s]}).map(s=>{if(s.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...s]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return o=o.length>0?o.map(([i,s])=>(nn(i),So(i,String(s)),[String(i).toLowerCase(),String(s)])):void 0,super(o),new Proxy(this,{get(i,s,l){switch(s){case"append":case"set":return(f,m)=>(nn(f),So(f,String(m)),URLSearchParams.prototype[s].call(i,String(f).toLowerCase(),String(m)));case"delete":case"has":case"getAll":return f=>(nn(f),URLSearchParams.prototype[s].call(i,String(f).toLowerCase()));case"keys":return()=>(i.sort(),new Set(URLSearchParams.prototype.keys.call(i)).keys());default:return Reflect.get(i,s,l)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(t){let o=this.getAll(t);if(o.length===0)return null;let i=o.join(", ");return/^content-encoding$/i.test(t)&&(i=i.toLowerCase()),i}forEach(t,o=void 0){for(let i of this.keys())Reflect.apply(t,o,[this.get(i),i,this])}*values(){for(let t of this.keys())yield this.get(t)}*entries(){for(let t of this.keys())yield[t,this.get(t)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((t,o)=>(t[o]=this.getAll(o),t),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((t,o)=>{let i=this.getAll(o);return o==="host"?t[o]=i[0]:t[o]=i.length>1?i:i[0],t},{})}};Object.defineProperties(ee.prototype,["get","entries","forEach","values"].reduce((r,t)=>(r[t]={enumerable:!0},r),{}));function Za(r=[]){return new ee(r.reduce((t,o,i,s)=>(i%2===0&&t.push(s.slice(i,i+2)),t),[]).filter(([t,o])=>{try{return nn(t),So(t,String(o)),!0}catch{return!1}}))}var Cc=new Set([301,302,303,307,308]),on=r=>Cc.has(r);var be=Symbol("Response internals"),H=class extends Se{constructor(t=null,o={}){super(t,o);let i=o.status!=null?o.status:200,s=new ee(o.headers);if(t!==null&&!s.has("Content-Type")){let l=rn(t,this);l&&s.append("Content-Type",l)}this[be]={type:"default",url:o.url,status:i,statusText:o.statusText||"",headers:s,counter:o.counter,highWaterMark:o.highWaterMark}}get type(){return this[be].type}get url(){return this[be].url||""}get status(){return this[be].status}get ok(){return this[be].status>=200&&this[be].status<300}get redirected(){return this[be].counter>0}get statusText(){return this[be].statusText}get headers(){return this[be].headers}get highWaterMark(){return this[be].highWaterMark}clone(){return new H(vt(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(t,o=302){if(!on(o))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new H(null,{headers:{location:new URL(t).toString()},status:o})}static error(){let t=new H(null,{status:0,statusText:""});return t[be].type="error",t}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(H.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var ss=require("node:url"),us=require("node:util");var Xa=r=>{if(r.search)return r.search;let t=r.href.length-1,o=r.hash||(r.href[t]==="#"?"#":"");return r.href[t-o.length]==="?"?"?":""};var ts=require("node:net");function es(r,t=!1){return r==null||(r=new URL(r),/^(about|blob|data):$/.test(r.protocol))?"no-referrer":(r.username="",r.password="",r.hash="",t&&(r.pathname="",r.search=""),r)}var rs=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),ns="strict-origin-when-cross-origin";function os(r){if(!rs.has(r))throw new TypeError(`Invalid referrerPolicy: ${r}`);return r}function Oc(r){if(/^(http|ws)s:$/.test(r.protocol))return!0;let t=r.host.replace(/(^\[)|(]$)/g,""),o=(0,ts.isIP)(t);return o===4&&/^127\./.test(t)||o===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(t)?!0:r.host==="localhost"||r.host.endsWith(".localhost")?!1:r.protocol==="file:"}function Tt(r){return/^about:(blank|srcdoc)$/.test(r)||r.protocol==="data:"||/^(blob|filesystem):$/.test(r.protocol)?!0:Oc(r)}function is(r,{referrerURLCallback:t,referrerOriginCallback:o}={}){if(r.referrer==="no-referrer"||r.referrerPolicy==="")return null;let i=r.referrerPolicy;if(r.referrer==="about:client")return"no-referrer";let s=r.referrer,l=es(s),f=es(s,!0);l.toString().length>4096&&(l=f),t&&(l=t(l)),o&&(f=o(f));let m=new URL(r.url);switch(i){case"no-referrer":return"no-referrer";case"origin":return f;case"unsafe-url":return l;case"strict-origin":return Tt(l)&&!Tt(m)?"no-referrer":f.toString();case"strict-origin-when-cross-origin":return l.origin===m.origin?l:Tt(l)&&!Tt(m)?"no-referrer":f;case"same-origin":return l.origin===m.origin?l:"no-referrer";case"origin-when-cross-origin":return l.origin===m.origin?l:f;case"no-referrer-when-downgrade":return Tt(l)&&!Tt(m)?"no-referrer":l;default:throw new TypeError(`Invalid referrerPolicy: ${i}`)}}function as(r){let t=(r.get("referrer-policy")||"").split(/[,\s]+/),o="";for(let i of t)i&&rs.has(i)&&(o=i);return o}var j=Symbol("Request internals"),Qt=r=>typeof r=="object"&&typeof r[j]=="object",qc=(0,us.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),De=class extends Se{constructor(t,o={}){let i;if(Qt(t)?i=new URL(t.url):(i=new URL(t),t={}),i.username!==""||i.password!=="")throw new TypeError(`${i} is an url with embedded credentials.`);let s=o.method||t.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(s)&&(s=s.toUpperCase()),!Qt(o)&&"data"in o&&qc(),(o.body!=null||Qt(t)&&t.body!==null)&&(s==="GET"||s==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let l=o.body?o.body:Qt(t)&&t.body!==null?vt(t):null;super(l,{size:o.size||t.size||0});let f=new ee(o.headers||t.headers||{});if(l!==null&&!f.has("Content-Type")){let d=rn(l,this);d&&f.set("Content-Type",d)}let m=Qt(t)?t.signal:null;if("signal"in o&&(m=o.signal),m!=null&&!$a(m))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let h=o.referrer==null?t.referrer:o.referrer;if(h==="")h="no-referrer";else if(h){let d=new URL(h);h=/^about:(\/\/)?client$/.test(d)?"client":d}else h=void 0;this[j]={method:s,redirect:o.redirect||t.redirect||"follow",headers:f,parsedURL:i,signal:m,referrer:h},this.follow=o.follow===void 0?t.follow===void 0?20:t.follow:o.follow,this.compress=o.compress===void 0?t.compress===void 0?!0:t.compress:o.compress,this.counter=o.counter||t.counter||0,this.agent=o.agent||t.agent,this.highWaterMark=o.highWaterMark||t.highWaterMark||16384,this.insecureHTTPParser=o.insecureHTTPParser||t.insecureHTTPParser||!1,this.referrerPolicy=o.referrerPolicy||t.referrerPolicy||""}get method(){return this[j].method}get url(){return(0,ss.format)(this[j].parsedURL)}get headers(){return this[j].headers}get redirect(){return this[j].redirect}get signal(){return this[j].signal}get referrer(){if(this[j].referrer==="no-referrer")return"";if(this[j].referrer==="client")return"about:client";if(this[j].referrer)return this[j].referrer.toString()}get referrerPolicy(){return this[j].referrerPolicy}set referrerPolicy(t){this[j].referrerPolicy=os(t)}clone(){return new De(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(De.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var ls=r=>{let{parsedURL:t}=r[j],o=new ee(r[j].headers);o.has("Accept")||o.set("Accept","*/*");let i=null;if(r.body===null&&/^(post|put)$/i.test(r.method)&&(i="0"),r.body!==null){let m=Ja(r);typeof m=="number"&&!Number.isNaN(m)&&(i=String(m))}i&&o.set("Content-Length",i),r.referrerPolicy===""&&(r.referrerPolicy=ns),r.referrer&&r.referrer!=="no-referrer"?r[j].referrer=is(r):r[j].referrer="no-referrer",r[j].referrer instanceof URL&&o.set("Referer",r.referrer),o.has("User-Agent")||o.set("User-Agent","node-fetch"),r.compress&&!o.has("Accept-Encoding")&&o.set("Accept-Encoding","gzip, deflate, br");let{agent:s}=r;typeof s=="function"&&(s=s(t)),!o.has("Connection")&&!s&&o.set("Connection","close");let l=Xa(t),f={path:t.pathname+l,method:r.method,headers:o[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:r.insecureHTTPParser,agent:s};return{parsedURL:t,options:f}};var an=class extends qe{constructor(t,o="aborted"){super(t,o)}};Kr();bo();var Bc=new Set(["data:","http:","https:"]);async function Kt(r,t){return new Promise((o,i)=>{let s=new De(r,t),{parsedURL:l,options:f}=ls(s);if(!Bc.has(l.protocol))throw new TypeError(`node-fetch cannot load ${r}. URL scheme "${l.protocol.replace(/:$/,"")}" is not supported.`);if(l.protocol==="data:"){let S=Da(s.url),F=new H(S,{headers:{"Content-Type":S.typeFull}});o(F);return}let m=(l.protocol==="https:"?cs.default:fs.default).request,{signal:h}=s,d=null,y=()=>{let S=new an("The operation was aborted.");i(S),s.body&&s.body instanceof oe.default.Readable&&s.body.destroy(S),!(!d||!d.body)&&d.body.emit("error",S)};if(h&&h.aborted){y();return}let g=()=>{y(),w()},_=m(l.toString(),f);h&&h.addEventListener("abort",g);let w=()=>{_.abort(),h&&h.removeEventListener("abort",g)};_.on("error",S=>{i(new Z(`request to ${s.url} failed, reason: ${S.message}`,"system",S)),w()}),Dc(_,S=>{d&&d.body&&d.body.destroy(S)}),process.version<"v14"&&_.on("socket",S=>{let F;S.prependListener("end",()=>{F=S._eventsCount}),S.prependListener("close",B=>{if(d&&F<S._eventsCount&&!B){let D=new Error("Premature close");D.code="ERR_STREAM_PREMATURE_CLOSE",d.body.emit("error",D)}})}),_.on("response",S=>{_.setTimeout(0);let F=Za(S.rawHeaders);if(on(S.statusCode)){let C=F.get("Location"),x=null;try{x=C===null?null:new URL(C,s.url)}catch{if(s.redirect!=="manual"){i(new Z(`uri requested responds with an invalid redirect URL: ${C}`,"invalid-redirect")),w();return}}switch(s.redirect){case"error":i(new Z(`uri requested responds with a redirect, redirect mode is set to error: ${s.url}`,"no-redirect")),w();return;case"manual":break;case"follow":{if(x===null)break;if(s.counter>=s.follow){i(new Z(`maximum redirect reached at: ${s.url}`,"max-redirect")),w();return}let L={headers:new ee(s.headers),follow:s.follow,counter:s.counter+1,agent:s.agent,compress:s.compress,method:s.method,body:vt(s),signal:s.signal,size:s.size,referrer:s.referrer,referrerPolicy:s.referrerPolicy};if(!za(s.url,x)||!ja(s.url,x))for(let te of["authorization","www-authenticate","cookie","cookie2"])L.headers.delete(te);if(S.statusCode!==303&&s.body&&t.body instanceof oe.default.Readable){i(new Z("Cannot follow redirect with body being a readable stream","unsupported-redirect")),w();return}(S.statusCode===303||(S.statusCode===301||S.statusCode===302)&&s.method==="POST")&&(L.method="GET",L.body=void 0,L.headers.delete("content-length"));let ke=as(F);ke&&(L.referrerPolicy=ke),o(Kt(new De(x,L))),w();return}default:return i(new TypeError(`Redirect option '${s.redirect}' is not a valid value of RequestRedirect`))}}h&&S.once("end",()=>{h.removeEventListener("abort",g)});let B=(0,oe.pipeline)(S,new oe.PassThrough,C=>{C&&i(C)});process.version<"v12.10"&&S.on("aborted",g);let D={url:s.url,status:S.statusCode,statusText:S.statusMessage,headers:F,size:s.size,counter:s.counter,highWaterMark:s.highWaterMark},U=F.get("Content-Encoding");if(!s.compress||s.method==="HEAD"||U===null||S.statusCode===204||S.statusCode===304){d=new H(B,D),o(d);return}let G={flush:rt.default.Z_SYNC_FLUSH,finishFlush:rt.default.Z_SYNC_FLUSH};if(U==="gzip"||U==="x-gzip"){B=(0,oe.pipeline)(B,rt.default.createGunzip(G),C=>{C&&i(C)}),d=new H(B,D),o(d);return}if(U==="deflate"||U==="x-deflate"){let C=(0,oe.pipeline)(S,new oe.PassThrough,x=>{x&&i(x)});C.once("data",x=>{(x[0]&15)===8?B=(0,oe.pipeline)(B,rt.default.createInflate(),L=>{L&&i(L)}):B=(0,oe.pipeline)(B,rt.default.createInflateRaw(),L=>{L&&i(L)}),d=new H(B,D),o(d)}),C.once("end",()=>{d||(d=new H(B,D),o(d))});return}if(U==="br"){B=(0,oe.pipeline)(B,rt.default.createBrotliDecompress(),C=>{C&&i(C)}),d=new H(B,D),o(d);return}d=new H(B,D),o(d)}),Ka(_,s).catch(i)})}function Dc(r,t){let o=Jt.Buffer.from(`0\r
\r
`),i=!1,s=!1,l;r.on("response",f=>{let{headers:m}=f;i=m["transfer-encoding"]==="chunked"&&!m["content-length"]}),r.on("socket",f=>{let m=()=>{if(i&&!s){let d=new Error("Premature close");d.code="ERR_STREAM_PREMATURE_CLOSE",t(d)}},h=d=>{s=Jt.Buffer.compare(d.slice(-5),o)===0,!s&&l&&(s=Jt.Buffer.compare(l.slice(-3),o.slice(0,3))===0&&Jt.Buffer.compare(d.slice(-2),o.slice(3))===0),l=d};f.prependListener("close",m),f.on("data",h),r.on("close",()=>{f.removeListener("close",m),f.removeListener("data",h)})})}var wo=`Juno/${process.env.GITHUB_HEAD_REF} - Preview`,ds=`https://${process.env.SHOPIFY_SHOP}/admin/api/2023-01`,hs={"User-Agent":"Shopify Theme Action","Content-Type":"application/json","X-Shopify-Access-Token":process.env.SHOPIFY_PASSWORD};async function kc(){ps("Retrieve preview theme id");let{themes:r}=await Kt(`${ds}/themes.json`,{headers:hs}).then(o=>o.json()),t=r.find(o=>o.name.includes(wo));if(!t){nt.notice(`Preview theme [${wo}] not found. Skipping.`);return}ps("Deleting preview theme"),await Kt(`${ds}/themes/${t.id}.json`,{method:"DELETE",headers:hs}),nt.info(`Preview theme [${wo}] has been deleted`)}function ps(r){nt.info(`
==============================
${r}
==============================
`)}try{kc()}catch(r){nt.setFailed(r)}
/*! fetch-blob. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */
/*! formdata-polyfill. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */
/*! node-domexception. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */
