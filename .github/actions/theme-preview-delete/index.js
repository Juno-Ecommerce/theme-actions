var gl=Object.create;var Xn=Object.defineProperty;var wl=Object.getOwnPropertyDescriptor;var Sl=Object.getOwnPropertyNames;var vl=Object.getPrototypeOf,Rl=Object.prototype.hasOwnProperty;var Qt=(r,t)=>()=>(r&&(t=r(r=0)),t);var I=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),Tl=(r,t)=>{for(var i in t)Xn(r,i,{get:t[i],enumerable:!0})},El=(r,t,i,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of Sl(t))!Rl.call(r,a)&&a!==i&&Xn(r,a,{get:()=>t[a],enumerable:!(o=wl(t,a))||o.enumerable});return r};var ye=(r,t,i)=>(i=r!=null?gl(vl(r)):{},El(t||!r||!r.__esModule?Xn(i,"default",{value:r,enumerable:!0}):i,r));var xr=I(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.toCommandProperties=vt.toCommandValue=void 0;function Pl(r){return r==null?"":typeof r=="string"||r instanceof String?r:JSON.stringify(r)}vt.toCommandValue=Pl;function Al(r){return Object.keys(r).length?{title:r.title,file:r.file,line:r.startLine,endLine:r.endLine,col:r.startColumn,endColumn:r.endColumn}:{}}vt.toCommandProperties=Al});var as=I(fe=>{"use strict";var Cl=fe&&fe.__createBinding||(Object.create?function(r,t,i,o){o===void 0&&(o=i),Object.defineProperty(r,o,{enumerable:!0,get:function(){return t[i]}})}:function(r,t,i,o){o===void 0&&(o=i),r[o]=t[i]}),Ol=fe&&fe.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),ql=fe&&fe.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var i in r)i!=="default"&&Object.hasOwnProperty.call(r,i)&&Cl(t,r,i);return Ol(t,r),t};Object.defineProperty(fe,"__esModule",{value:!0});fe.issue=fe.issueCommand=void 0;var Bl=ql(require("os")),os=xr();function ss(r,t,i){let o=new Zn(r,t,i);process.stdout.write(o.toString()+Bl.EOL)}fe.issueCommand=ss;function kl(r,t=""){ss(r,{},t)}fe.issue=kl;var is="::",Zn=class{constructor(t,i,o){t||(t="missing.command"),this.command=t,this.properties=i,this.message=o}toString(){let t=is+this.command;if(this.properties&&Object.keys(this.properties).length>0){t+=" ";let i=!0;for(let o in this.properties)if(this.properties.hasOwnProperty(o)){let a=this.properties[o];a&&(i?i=!1:t+=",",t+=`${o}=${Il(a)}`)}}return t+=`${is}${Dl(this.message)}`,t}};function Dl(r){return os.toCommandValue(r).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function Il(r){return os.toCommandValue(r).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}});var ti=I(ei=>{"use strict";Object.defineProperty(ei,"__esModule",{value:!0});ei.default=Ll;var Wl=Ml(require("crypto"));function Ml(r){return r&&r.__esModule?r:{default:r}}var $r=new Uint8Array(256),Ur=$r.length;function Ll(){return Ur>$r.length-16&&(Wl.default.randomFillSync($r),Ur=0),$r.slice(Ur,Ur+=16)}});var us=I(zr=>{"use strict";Object.defineProperty(zr,"__esModule",{value:!0});zr.default=void 0;var Fl=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;zr.default=Fl});var Yt=I(Nr=>{"use strict";Object.defineProperty(Nr,"__esModule",{value:!0});Nr.default=void 0;var xl=Ul(us());function Ul(r){return r&&r.__esModule?r:{default:r}}function $l(r){return typeof r=="string"&&xl.default.test(r)}var zl=$l;Nr.default=zl});var Gt=I(jr=>{"use strict";Object.defineProperty(jr,"__esModule",{value:!0});jr.default=void 0;var Nl=jl(Yt());function jl(r){return r&&r.__esModule?r:{default:r}}var H=[];for(let r=0;r<256;++r)H.push((r+256).toString(16).substr(1));function Hl(r,t=0){let i=(H[r[t+0]]+H[r[t+1]]+H[r[t+2]]+H[r[t+3]]+"-"+H[r[t+4]]+H[r[t+5]]+"-"+H[r[t+6]]+H[r[t+7]]+"-"+H[r[t+8]]+H[r[t+9]]+"-"+H[r[t+10]]+H[r[t+11]]+H[r[t+12]]+H[r[t+13]]+H[r[t+14]]+H[r[t+15]]).toLowerCase();if(!(0,Nl.default)(i))throw TypeError("Stringified UUID is invalid");return i}var Vl=Hl;jr.default=Vl});var cs=I(Hr=>{"use strict";Object.defineProperty(Hr,"__esModule",{value:!0});Hr.default=void 0;var Ql=fs(ti()),Yl=fs(Gt());function fs(r){return r&&r.__esModule?r:{default:r}}var ls,ri,ni=0,ii=0;function Gl(r,t,i){let o=t&&i||0,a=t||new Array(16);r=r||{};let u=r.node||ls,f=r.clockseq!==void 0?r.clockseq:ri;if(u==null||f==null){let g=r.random||(r.rng||Ql.default)();u==null&&(u=ls=[g[0]|1,g[1],g[2],g[3],g[4],g[5]]),f==null&&(f=ri=(g[6]<<8|g[7])&16383)}let m=r.msecs!==void 0?r.msecs:Date.now(),d=r.nsecs!==void 0?r.nsecs:ii+1,h=m-ni+(d-ii)/1e4;if(h<0&&r.clockseq===void 0&&(f=f+1&16383),(h<0||m>ni)&&r.nsecs===void 0&&(d=0),d>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");ni=m,ii=d,ri=f,m+=122192928e5;let _=((m&268435455)*1e4+d)%4294967296;a[o++]=_>>>24&255,a[o++]=_>>>16&255,a[o++]=_>>>8&255,a[o++]=_&255;let b=m/4294967296*1e4&268435455;a[o++]=b>>>8&255,a[o++]=b&255,a[o++]=b>>>24&15|16,a[o++]=b>>>16&255,a[o++]=f>>>8|128,a[o++]=f&255;for(let g=0;g<6;++g)a[o+g]=u[g];return t||(0,Yl.default)(a)}var Jl=Gl;Hr.default=Jl});var oi=I(Vr=>{"use strict";Object.defineProperty(Vr,"__esModule",{value:!0});Vr.default=void 0;var Kl=Xl(Yt());function Xl(r){return r&&r.__esModule?r:{default:r}}function Zl(r){if(!(0,Kl.default)(r))throw TypeError("Invalid UUID");let t,i=new Uint8Array(16);return i[0]=(t=parseInt(r.slice(0,8),16))>>>24,i[1]=t>>>16&255,i[2]=t>>>8&255,i[3]=t&255,i[4]=(t=parseInt(r.slice(9,13),16))>>>8,i[5]=t&255,i[6]=(t=parseInt(r.slice(14,18),16))>>>8,i[7]=t&255,i[8]=(t=parseInt(r.slice(19,23),16))>>>8,i[9]=t&255,i[10]=(t=parseInt(r.slice(24,36),16))/1099511627776&255,i[11]=t/4294967296&255,i[12]=t>>>24&255,i[13]=t>>>16&255,i[14]=t>>>8&255,i[15]=t&255,i}var ef=Zl;Vr.default=ef});var si=I(it=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0});it.default=of;it.URL=it.DNS=void 0;var tf=ds(Gt()),rf=ds(oi());function ds(r){return r&&r.__esModule?r:{default:r}}function nf(r){r=unescape(encodeURIComponent(r));let t=[];for(let i=0;i<r.length;++i)t.push(r.charCodeAt(i));return t}var hs="6ba7b810-9dad-11d1-80b4-00c04fd430c8";it.DNS=hs;var ms="6ba7b811-9dad-11d1-80b4-00c04fd430c8";it.URL=ms;function of(r,t,i){function o(a,u,f,m){if(typeof a=="string"&&(a=nf(a)),typeof u=="string"&&(u=(0,rf.default)(u)),u.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let d=new Uint8Array(16+a.length);if(d.set(u),d.set(a,u.length),d=i(d),d[6]=d[6]&15|t,d[8]=d[8]&63|128,f){m=m||0;for(let h=0;h<16;++h)f[m+h]=d[h];return f}return(0,tf.default)(d)}try{o.name=r}catch{}return o.DNS=hs,o.URL=ms,o}});var ps=I(Qr=>{"use strict";Object.defineProperty(Qr,"__esModule",{value:!0});Qr.default=void 0;var sf=af(require("crypto"));function af(r){return r&&r.__esModule?r:{default:r}}function uf(r){return Array.isArray(r)?r=Buffer.from(r):typeof r=="string"&&(r=Buffer.from(r,"utf8")),sf.default.createHash("md5").update(r).digest()}var lf=uf;Qr.default=lf});var _s=I(Yr=>{"use strict";Object.defineProperty(Yr,"__esModule",{value:!0});Yr.default=void 0;var ff=bs(si()),cf=bs(ps());function bs(r){return r&&r.__esModule?r:{default:r}}var df=(0,ff.default)("v3",48,cf.default),hf=df;Yr.default=hf});var gs=I(Gr=>{"use strict";Object.defineProperty(Gr,"__esModule",{value:!0});Gr.default=void 0;var mf=ys(ti()),pf=ys(Gt());function ys(r){return r&&r.__esModule?r:{default:r}}function bf(r,t,i){r=r||{};let o=r.random||(r.rng||mf.default)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t){i=i||0;for(let a=0;a<16;++a)t[i+a]=o[a];return t}return(0,pf.default)(o)}var _f=bf;Gr.default=_f});var ws=I(Jr=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0});Jr.default=void 0;var yf=gf(require("crypto"));function gf(r){return r&&r.__esModule?r:{default:r}}function wf(r){return Array.isArray(r)?r=Buffer.from(r):typeof r=="string"&&(r=Buffer.from(r,"utf8")),yf.default.createHash("sha1").update(r).digest()}var Sf=wf;Jr.default=Sf});var vs=I(Kr=>{"use strict";Object.defineProperty(Kr,"__esModule",{value:!0});Kr.default=void 0;var vf=Ss(si()),Rf=Ss(ws());function Ss(r){return r&&r.__esModule?r:{default:r}}var Tf=(0,vf.default)("v5",80,Rf.default),Ef=Tf;Kr.default=Ef});var Rs=I(Xr=>{"use strict";Object.defineProperty(Xr,"__esModule",{value:!0});Xr.default=void 0;var Pf="00000000-0000-0000-0000-000000000000";Xr.default=Pf});var Ts=I(Zr=>{"use strict";Object.defineProperty(Zr,"__esModule",{value:!0});Zr.default=void 0;var Af=Cf(Yt());function Cf(r){return r&&r.__esModule?r:{default:r}}function Of(r){if(!(0,Af.default)(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}var qf=Of;Zr.default=qf});var Es=I(ge=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0});Object.defineProperty(ge,"v1",{enumerable:!0,get:function(){return Bf.default}});Object.defineProperty(ge,"v3",{enumerable:!0,get:function(){return kf.default}});Object.defineProperty(ge,"v4",{enumerable:!0,get:function(){return Df.default}});Object.defineProperty(ge,"v5",{enumerable:!0,get:function(){return If.default}});Object.defineProperty(ge,"NIL",{enumerable:!0,get:function(){return Wf.default}});Object.defineProperty(ge,"version",{enumerable:!0,get:function(){return Mf.default}});Object.defineProperty(ge,"validate",{enumerable:!0,get:function(){return Lf.default}});Object.defineProperty(ge,"stringify",{enumerable:!0,get:function(){return Ff.default}});Object.defineProperty(ge,"parse",{enumerable:!0,get:function(){return xf.default}});var Bf=ke(cs()),kf=ke(_s()),Df=ke(gs()),If=ke(vs()),Wf=ke(Rs()),Mf=ke(Ts()),Lf=ke(Yt()),Ff=ke(Gt()),xf=ke(oi());function ke(r){return r&&r.__esModule?r:{default:r}}});var Os=I(ce=>{"use strict";var Uf=ce&&ce.__createBinding||(Object.create?function(r,t,i,o){o===void 0&&(o=i),Object.defineProperty(r,o,{enumerable:!0,get:function(){return t[i]}})}:function(r,t,i,o){o===void 0&&(o=i),r[o]=t[i]}),$f=ce&&ce.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),As=ce&&ce.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var i in r)i!=="default"&&Object.hasOwnProperty.call(r,i)&&Uf(t,r,i);return $f(t,r),t};Object.defineProperty(ce,"__esModule",{value:!0});ce.prepareKeyValueMessage=ce.issueFileCommand=void 0;var Ps=As(require("fs")),ai=As(require("os")),zf=Es(),Cs=xr();function Nf(r,t){let i=process.env[`GITHUB_${r}`];if(!i)throw new Error(`Unable to find environment variable for file command ${r}`);if(!Ps.existsSync(i))throw new Error(`Missing file at path: ${i}`);Ps.appendFileSync(i,`${Cs.toCommandValue(t)}${ai.EOL}`,{encoding:"utf8"})}ce.issueFileCommand=Nf;function jf(r,t){let i=`ghadelimiter_${zf.v4()}`,o=Cs.toCommandValue(t);if(r.includes(i))throw new Error(`Unexpected input: name should not contain the delimiter "${i}"`);if(o.includes(i))throw new Error(`Unexpected input: value should not contain the delimiter "${i}"`);return`${r}<<${i}${ai.EOL}${o}${ai.EOL}${i}`}ce.prepareKeyValueMessage=jf});var Bs=I(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});Rt.checkBypass=Rt.getProxyUrl=void 0;function Hf(r){let t=r.protocol==="https:";if(qs(r))return;let i=(()=>t?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY)();if(i)return new URL(i)}Rt.getProxyUrl=Hf;function qs(r){if(!r.hostname)return!1;let t=process.env.no_proxy||process.env.NO_PROXY||"";if(!t)return!1;let i;r.port?i=Number(r.port):r.protocol==="http:"?i=80:r.protocol==="https:"&&(i=443);let o=[r.hostname.toUpperCase()];typeof i=="number"&&o.push(`${o[0]}:${i}`);for(let a of t.split(",").map(u=>u.trim().toUpperCase()).filter(u=>u))if(o.some(u=>u===a))return!0;return!1}Rt.checkBypass=qs});var Ws=I(Tt=>{"use strict";var zd=require("net"),Vf=require("tls"),ui=require("http"),ks=require("https"),Qf=require("events"),Nd=require("assert"),Yf=require("util");Tt.httpOverHttp=Gf;Tt.httpsOverHttp=Jf;Tt.httpOverHttps=Kf;Tt.httpsOverHttps=Xf;function Gf(r){var t=new De(r);return t.request=ui.request,t}function Jf(r){var t=new De(r);return t.request=ui.request,t.createSocket=Ds,t.defaultPort=443,t}function Kf(r){var t=new De(r);return t.request=ks.request,t}function Xf(r){var t=new De(r);return t.request=ks.request,t.createSocket=Ds,t.defaultPort=443,t}function De(r){var t=this;t.options=r||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||ui.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",function(o,a,u,f){for(var m=Is(a,u,f),d=0,h=t.requests.length;d<h;++d){var _=t.requests[d];if(_.host===m.host&&_.port===m.port){t.requests.splice(d,1),_.request.onSocket(o);return}}o.destroy(),t.removeSocket(o)})}Yf.inherits(De,Qf.EventEmitter);De.prototype.addRequest=function(t,i,o,a){var u=this,f=li({request:t},u.options,Is(i,o,a));if(u.sockets.length>=this.maxSockets){u.requests.push(f);return}u.createSocket(f,function(m){m.on("free",d),m.on("close",h),m.on("agentRemove",h),t.onSocket(m);function d(){u.emit("free",m,f)}function h(_){u.removeSocket(m),m.removeListener("free",d),m.removeListener("close",h),m.removeListener("agentRemove",h)}})};De.prototype.createSocket=function(t,i){var o=this,a={};o.sockets.push(a);var u=li({},o.proxyOptions,{method:"CONNECT",path:t.host+":"+t.port,agent:!1,headers:{host:t.host+":"+t.port}});t.localAddress&&(u.localAddress=t.localAddress),u.proxyAuth&&(u.headers=u.headers||{},u.headers["Proxy-Authorization"]="Basic "+new Buffer(u.proxyAuth).toString("base64")),Qe("making CONNECT request");var f=o.request(u);f.useChunkedEncodingByDefault=!1,f.once("response",m),f.once("upgrade",d),f.once("connect",h),f.once("error",_),f.end();function m(b){b.upgrade=!0}function d(b,g,w){process.nextTick(function(){h(b,g,w)})}function h(b,g,w){if(f.removeAllListeners(),g.removeAllListeners(),b.statusCode!==200){Qe("tunneling socket could not be established, statusCode=%d",b.statusCode),g.destroy();var S=new Error("tunneling socket could not be established, statusCode="+b.statusCode);S.code="ECONNRESET",t.request.emit("error",S),o.removeSocket(a);return}if(w.length>0){Qe("got illegal response body from proxy"),g.destroy();var S=new Error("got illegal response body from proxy");S.code="ECONNRESET",t.request.emit("error",S),o.removeSocket(a);return}return Qe("tunneling connection has established"),o.sockets[o.sockets.indexOf(a)]=g,i(g)}function _(b){f.removeAllListeners(),Qe(`tunneling socket could not be established, cause=%s
`,b.message,b.stack);var g=new Error("tunneling socket could not be established, cause="+b.message);g.code="ECONNRESET",t.request.emit("error",g),o.removeSocket(a)}};De.prototype.removeSocket=function(t){var i=this.sockets.indexOf(t);if(i!==-1){this.sockets.splice(i,1);var o=this.requests.shift();o&&this.createSocket(o,function(a){o.request.onSocket(a)})}};function Ds(r,t){var i=this;De.prototype.createSocket.call(i,r,function(o){var a=r.request.getHeader("host"),u=li({},i.options,{socket:o,servername:a?a.replace(/:.*$/,""):r.host}),f=Vf.connect(0,u);i.sockets[i.sockets.indexOf(o)]=f,t(f)})}function Is(r,t,i){return typeof r=="string"?{host:r,port:t,localAddress:i}:r}function li(r){for(var t=1,i=arguments.length;t<i;++t){var o=arguments[t];if(typeof o=="object")for(var a=Object.keys(o),u=0,f=a.length;u<f;++u){var m=a[u];o[m]!==void 0&&(r[m]=o[m])}}return r}var Qe;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?Qe=function(){var r=Array.prototype.slice.call(arguments);typeof r[0]=="string"?r[0]="TUNNEL: "+r[0]:r.unshift("TUNNEL:"),console.error.apply(console,r)}:Qe=function(){};Tt.debug=Qe});var Ls=I((Hd,Ms)=>{Ms.exports=Ws()});var xs=I(M=>{"use strict";var Zf=M&&M.__createBinding||(Object.create?function(r,t,i,o){o===void 0&&(o=i),Object.defineProperty(r,o,{enumerable:!0,get:function(){return t[i]}})}:function(r,t,i,o){o===void 0&&(o=i),r[o]=t[i]}),ec=M&&M.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),on=M&&M.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var i in r)i!=="default"&&Object.hasOwnProperty.call(r,i)&&Zf(t,r,i);return ec(t,r),t},N=M&&M.__awaiter||function(r,t,i,o){function a(u){return u instanceof i?u:new i(function(f){f(u)})}return new(i||(i=Promise))(function(u,f){function m(_){try{h(o.next(_))}catch(b){f(b)}}function d(_){try{h(o.throw(_))}catch(b){f(b)}}function h(_){_.done?u(_.value):a(_.value).then(m,d)}h((o=o.apply(r,t||[])).next())})};Object.defineProperty(M,"__esModule",{value:!0});M.HttpClient=M.isHttps=M.HttpClientResponse=M.HttpClientError=M.getProxyUrl=M.MediaTypes=M.Headers=M.HttpCodes=void 0;var en=on(require("http")),fi=on(require("https")),Fs=on(Bs()),tn=on(Ls()),we;(function(r){r[r.OK=200]="OK",r[r.MultipleChoices=300]="MultipleChoices",r[r.MovedPermanently=301]="MovedPermanently",r[r.ResourceMoved=302]="ResourceMoved",r[r.SeeOther=303]="SeeOther",r[r.NotModified=304]="NotModified",r[r.UseProxy=305]="UseProxy",r[r.SwitchProxy=306]="SwitchProxy",r[r.TemporaryRedirect=307]="TemporaryRedirect",r[r.PermanentRedirect=308]="PermanentRedirect",r[r.BadRequest=400]="BadRequest",r[r.Unauthorized=401]="Unauthorized",r[r.PaymentRequired=402]="PaymentRequired",r[r.Forbidden=403]="Forbidden",r[r.NotFound=404]="NotFound",r[r.MethodNotAllowed=405]="MethodNotAllowed",r[r.NotAcceptable=406]="NotAcceptable",r[r.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",r[r.RequestTimeout=408]="RequestTimeout",r[r.Conflict=409]="Conflict",r[r.Gone=410]="Gone",r[r.TooManyRequests=429]="TooManyRequests",r[r.InternalServerError=500]="InternalServerError",r[r.NotImplemented=501]="NotImplemented",r[r.BadGateway=502]="BadGateway",r[r.ServiceUnavailable=503]="ServiceUnavailable",r[r.GatewayTimeout=504]="GatewayTimeout"})(we=M.HttpCodes||(M.HttpCodes={}));var G;(function(r){r.Accept="accept",r.ContentType="content-type"})(G=M.Headers||(M.Headers={}));var Ye;(function(r){r.ApplicationJson="application/json"})(Ye=M.MediaTypes||(M.MediaTypes={}));function tc(r){let t=Fs.getProxyUrl(new URL(r));return t?t.href:""}M.getProxyUrl=tc;var rc=[we.MovedPermanently,we.ResourceMoved,we.SeeOther,we.TemporaryRedirect,we.PermanentRedirect],nc=[we.BadGateway,we.ServiceUnavailable,we.GatewayTimeout],ic=["OPTIONS","GET","DELETE","HEAD"],oc=10,sc=5,Et=class extends Error{constructor(t,i){super(t),this.name="HttpClientError",this.statusCode=i,Object.setPrototypeOf(this,Et.prototype)}};M.HttpClientError=Et;var nn=class{constructor(t){this.message=t}readBody(){return N(this,void 0,void 0,function*(){return new Promise(t=>N(this,void 0,void 0,function*(){let i=Buffer.alloc(0);this.message.on("data",o=>{i=Buffer.concat([i,o])}),this.message.on("end",()=>{t(i.toString())})}))})}};M.HttpClientResponse=nn;function ac(r){return new URL(r).protocol==="https:"}M.isHttps=ac;var ci=class{constructor(t,i,o){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=t,this.handlers=i||[],this.requestOptions=o,o&&(o.ignoreSslError!=null&&(this._ignoreSslError=o.ignoreSslError),this._socketTimeout=o.socketTimeout,o.allowRedirects!=null&&(this._allowRedirects=o.allowRedirects),o.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=o.allowRedirectDowngrade),o.maxRedirects!=null&&(this._maxRedirects=Math.max(o.maxRedirects,0)),o.keepAlive!=null&&(this._keepAlive=o.keepAlive),o.allowRetries!=null&&(this._allowRetries=o.allowRetries),o.maxRetries!=null&&(this._maxRetries=o.maxRetries))}options(t,i){return N(this,void 0,void 0,function*(){return this.request("OPTIONS",t,null,i||{})})}get(t,i){return N(this,void 0,void 0,function*(){return this.request("GET",t,null,i||{})})}del(t,i){return N(this,void 0,void 0,function*(){return this.request("DELETE",t,null,i||{})})}post(t,i,o){return N(this,void 0,void 0,function*(){return this.request("POST",t,i,o||{})})}patch(t,i,o){return N(this,void 0,void 0,function*(){return this.request("PATCH",t,i,o||{})})}put(t,i,o){return N(this,void 0,void 0,function*(){return this.request("PUT",t,i,o||{})})}head(t,i){return N(this,void 0,void 0,function*(){return this.request("HEAD",t,null,i||{})})}sendStream(t,i,o,a){return N(this,void 0,void 0,function*(){return this.request(t,i,o,a)})}getJson(t,i={}){return N(this,void 0,void 0,function*(){i[G.Accept]=this._getExistingOrDefaultHeader(i,G.Accept,Ye.ApplicationJson);let o=yield this.get(t,i);return this._processResponse(o,this.requestOptions)})}postJson(t,i,o={}){return N(this,void 0,void 0,function*(){let a=JSON.stringify(i,null,2);o[G.Accept]=this._getExistingOrDefaultHeader(o,G.Accept,Ye.ApplicationJson),o[G.ContentType]=this._getExistingOrDefaultHeader(o,G.ContentType,Ye.ApplicationJson);let u=yield this.post(t,a,o);return this._processResponse(u,this.requestOptions)})}putJson(t,i,o={}){return N(this,void 0,void 0,function*(){let a=JSON.stringify(i,null,2);o[G.Accept]=this._getExistingOrDefaultHeader(o,G.Accept,Ye.ApplicationJson),o[G.ContentType]=this._getExistingOrDefaultHeader(o,G.ContentType,Ye.ApplicationJson);let u=yield this.put(t,a,o);return this._processResponse(u,this.requestOptions)})}patchJson(t,i,o={}){return N(this,void 0,void 0,function*(){let a=JSON.stringify(i,null,2);o[G.Accept]=this._getExistingOrDefaultHeader(o,G.Accept,Ye.ApplicationJson),o[G.ContentType]=this._getExistingOrDefaultHeader(o,G.ContentType,Ye.ApplicationJson);let u=yield this.patch(t,a,o);return this._processResponse(u,this.requestOptions)})}request(t,i,o,a){return N(this,void 0,void 0,function*(){if(this._disposed)throw new Error("Client has already been disposed.");let u=new URL(i),f=this._prepareRequest(t,u,a),m=this._allowRetries&&ic.includes(t)?this._maxRetries+1:1,d=0,h;do{if(h=yield this.requestRaw(f,o),h&&h.message&&h.message.statusCode===we.Unauthorized){let b;for(let g of this.handlers)if(g.canHandleAuthentication(h)){b=g;break}return b?b.handleAuthentication(this,f,o):h}let _=this._maxRedirects;for(;h.message.statusCode&&rc.includes(h.message.statusCode)&&this._allowRedirects&&_>0;){let b=h.message.headers.location;if(!b)break;let g=new URL(b);if(u.protocol==="https:"&&u.protocol!==g.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(yield h.readBody(),g.hostname!==u.hostname)for(let w in a)w.toLowerCase()==="authorization"&&delete a[w];f=this._prepareRequest(t,g,a),h=yield this.requestRaw(f,o),_--}if(!h.message.statusCode||!nc.includes(h.message.statusCode))return h;d+=1,d<m&&(yield h.readBody(),yield this._performExponentialBackoff(d))}while(d<m);return h})}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(t,i){return N(this,void 0,void 0,function*(){return new Promise((o,a)=>{function u(f,m){f?a(f):m?o(m):a(new Error("Unknown error"))}this.requestRawWithCallback(t,i,u)})})}requestRawWithCallback(t,i,o){typeof i=="string"&&(t.options.headers||(t.options.headers={}),t.options.headers["Content-Length"]=Buffer.byteLength(i,"utf8"));let a=!1;function u(d,h){a||(a=!0,o(d,h))}let f=t.httpModule.request(t.options,d=>{let h=new nn(d);u(void 0,h)}),m;f.on("socket",d=>{m=d}),f.setTimeout(this._socketTimeout||3*6e4,()=>{m&&m.end(),u(new Error(`Request timeout: ${t.options.path}`))}),f.on("error",function(d){u(d)}),i&&typeof i=="string"&&f.write(i,"utf8"),i&&typeof i!="string"?(i.on("close",function(){f.end()}),i.pipe(f)):f.end()}getAgent(t){let i=new URL(t);return this._getAgent(i)}_prepareRequest(t,i,o){let a={};a.parsedUrl=i;let u=a.parsedUrl.protocol==="https:";a.httpModule=u?fi:en;let f=u?443:80;if(a.options={},a.options.host=a.parsedUrl.hostname,a.options.port=a.parsedUrl.port?parseInt(a.parsedUrl.port):f,a.options.path=(a.parsedUrl.pathname||"")+(a.parsedUrl.search||""),a.options.method=t,a.options.headers=this._mergeHeaders(o),this.userAgent!=null&&(a.options.headers["user-agent"]=this.userAgent),a.options.agent=this._getAgent(a.parsedUrl),this.handlers)for(let m of this.handlers)m.prepareRequest(a.options);return a}_mergeHeaders(t){return this.requestOptions&&this.requestOptions.headers?Object.assign({},rn(this.requestOptions.headers),rn(t||{})):rn(t||{})}_getExistingOrDefaultHeader(t,i,o){let a;return this.requestOptions&&this.requestOptions.headers&&(a=rn(this.requestOptions.headers)[i]),t[i]||a||o}_getAgent(t){let i,o=Fs.getProxyUrl(t),a=o&&o.hostname;if(this._keepAlive&&a&&(i=this._proxyAgent),this._keepAlive&&!a&&(i=this._agent),i)return i;let u=t.protocol==="https:",f=100;if(this.requestOptions&&(f=this.requestOptions.maxSockets||en.globalAgent.maxSockets),o&&o.hostname){let m={maxSockets:f,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(o.username||o.password)&&{proxyAuth:`${o.username}:${o.password}`}),{host:o.hostname,port:o.port})},d,h=o.protocol==="https:";u?d=h?tn.httpsOverHttps:tn.httpsOverHttp:d=h?tn.httpOverHttps:tn.httpOverHttp,i=d(m),this._proxyAgent=i}if(this._keepAlive&&!i){let m={keepAlive:this._keepAlive,maxSockets:f};i=u?new fi.Agent(m):new en.Agent(m),this._agent=i}return i||(i=u?fi.globalAgent:en.globalAgent),u&&this._ignoreSslError&&(i.options=Object.assign(i.options||{},{rejectUnauthorized:!1})),i}_performExponentialBackoff(t){return N(this,void 0,void 0,function*(){t=Math.min(oc,t);let i=sc*Math.pow(2,t);return new Promise(o=>setTimeout(()=>o(),i))})}_processResponse(t,i){return N(this,void 0,void 0,function*(){return new Promise((o,a)=>N(this,void 0,void 0,function*(){let u=t.message.statusCode||0,f={statusCode:u,result:null,headers:{}};u===we.NotFound&&o(f);function m(_,b){if(typeof b=="string"){let g=new Date(b);if(!isNaN(g.valueOf()))return g}return b}let d,h;try{h=yield t.readBody(),h&&h.length>0&&(i&&i.deserializeDates?d=JSON.parse(h,m):d=JSON.parse(h),f.result=d),f.headers=t.message.headers}catch{}if(u>299){let _;d&&d.message?_=d.message:h&&h.length>0?_=h:_=`Failed request: (${u})`;let b=new Et(_,u);b.result=f.result,a(b)}else o(f)}))})}};M.HttpClient=ci;var rn=r=>Object.keys(r).reduce((t,i)=>(t[i.toLowerCase()]=r[i],t),{})});var Us=I(Re=>{"use strict";var pi=Re&&Re.__awaiter||function(r,t,i,o){function a(u){return u instanceof i?u:new i(function(f){f(u)})}return new(i||(i=Promise))(function(u,f){function m(_){try{h(o.next(_))}catch(b){f(b)}}function d(_){try{h(o.throw(_))}catch(b){f(b)}}function h(_){_.done?u(_.value):a(_.value).then(m,d)}h((o=o.apply(r,t||[])).next())})};Object.defineProperty(Re,"__esModule",{value:!0});Re.PersonalAccessTokenCredentialHandler=Re.BearerCredentialHandler=Re.BasicCredentialHandler=void 0;var di=class{constructor(t,i){this.username=t,this.password=i}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return pi(this,void 0,void 0,function*(){throw new Error("not implemented")})}};Re.BasicCredentialHandler=di;var hi=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Bearer ${this.token}`}canHandleAuthentication(){return!1}handleAuthentication(){return pi(this,void 0,void 0,function*(){throw new Error("not implemented")})}};Re.BearerCredentialHandler=hi;var mi=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`PAT:${this.token}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return pi(this,void 0,void 0,function*(){throw new Error("not implemented")})}};Re.PersonalAccessTokenCredentialHandler=mi});var Ns=I(Pt=>{"use strict";var $s=Pt&&Pt.__awaiter||function(r,t,i,o){function a(u){return u instanceof i?u:new i(function(f){f(u)})}return new(i||(i=Promise))(function(u,f){function m(_){try{h(o.next(_))}catch(b){f(b)}}function d(_){try{h(o.throw(_))}catch(b){f(b)}}function h(_){_.done?u(_.value):a(_.value).then(m,d)}h((o=o.apply(r,t||[])).next())})};Object.defineProperty(Pt,"__esModule",{value:!0});Pt.OidcClient=void 0;var uc=xs(),lc=Us(),zs=sn(),Ge=class{static createHttpClient(t=!0,i=10){let o={allowRetries:t,maxRetries:i};return new uc.HttpClient("actions/oidc-client",[new lc.BearerCredentialHandler(Ge.getRequestToken())],o)}static getRequestToken(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return t}static getIDTokenUrl(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return t}static getCall(t){var i;return $s(this,void 0,void 0,function*(){let u=(i=(yield Ge.createHttpClient().getJson(t).catch(f=>{throw new Error(`Failed to get ID Token. 
 
        Error Code : ${f.statusCode}
 
        Error Message: ${f.result.message}`)})).result)===null||i===void 0?void 0:i.value;if(!u)throw new Error("Response json body do not have ID Token field");return u})}static getIDToken(t){return $s(this,void 0,void 0,function*(){try{let i=Ge.getIDTokenUrl();if(t){let a=encodeURIComponent(t);i=`${i}&audience=${a}`}zs.debug(`ID token url is ${i}`);let o=yield Ge.getCall(i);return zs.setSecret(o),o}catch(i){throw new Error(`Error message: ${i.message}`)}})}};Pt.OidcClient=Ge});var gi=I(Z=>{"use strict";var bi=Z&&Z.__awaiter||function(r,t,i,o){function a(u){return u instanceof i?u:new i(function(f){f(u)})}return new(i||(i=Promise))(function(u,f){function m(_){try{h(o.next(_))}catch(b){f(b)}}function d(_){try{h(o.throw(_))}catch(b){f(b)}}function h(_){_.done?u(_.value):a(_.value).then(m,d)}h((o=o.apply(r,t||[])).next())})};Object.defineProperty(Z,"__esModule",{value:!0});Z.summary=Z.markdownSummary=Z.SUMMARY_DOCS_URL=Z.SUMMARY_ENV_VAR=void 0;var fc=require("os"),_i=require("fs"),{access:cc,appendFile:dc,writeFile:hc}=_i.promises;Z.SUMMARY_ENV_VAR="GITHUB_STEP_SUMMARY";Z.SUMMARY_DOCS_URL="https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary";var yi=class{constructor(){this._buffer=""}filePath(){return bi(this,void 0,void 0,function*(){if(this._filePath)return this._filePath;let t=process.env[Z.SUMMARY_ENV_VAR];if(!t)throw new Error(`Unable to find environment variable for $${Z.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`);try{yield cc(t,_i.constants.R_OK|_i.constants.W_OK)}catch{throw new Error(`Unable to access summary file: '${t}'. Check if the file has correct read/write permissions.`)}return this._filePath=t,this._filePath})}wrap(t,i,o={}){let a=Object.entries(o).map(([u,f])=>` ${u}="${f}"`).join("");return i?`<${t}${a}>${i}</${t}>`:`<${t}${a}>`}write(t){return bi(this,void 0,void 0,function*(){let i=!!(t!=null&&t.overwrite),o=yield this.filePath();return yield(i?hc:dc)(o,this._buffer,{encoding:"utf8"}),this.emptyBuffer()})}clear(){return bi(this,void 0,void 0,function*(){return this.emptyBuffer().write({overwrite:!0})})}stringify(){return this._buffer}isEmptyBuffer(){return this._buffer.length===0}emptyBuffer(){return this._buffer="",this}addRaw(t,i=!1){return this._buffer+=t,i?this.addEOL():this}addEOL(){return this.addRaw(fc.EOL)}addCodeBlock(t,i){let o=Object.assign({},i&&{lang:i}),a=this.wrap("pre",this.wrap("code",t),o);return this.addRaw(a).addEOL()}addList(t,i=!1){let o=i?"ol":"ul",a=t.map(f=>this.wrap("li",f)).join(""),u=this.wrap(o,a);return this.addRaw(u).addEOL()}addTable(t){let i=t.map(a=>{let u=a.map(f=>{if(typeof f=="string")return this.wrap("td",f);let{header:m,data:d,colspan:h,rowspan:_}=f,b=m?"th":"td",g=Object.assign(Object.assign({},h&&{colspan:h}),_&&{rowspan:_});return this.wrap(b,d,g)}).join("");return this.wrap("tr",u)}).join(""),o=this.wrap("table",i);return this.addRaw(o).addEOL()}addDetails(t,i){let o=this.wrap("details",this.wrap("summary",t)+i);return this.addRaw(o).addEOL()}addImage(t,i,o){let{width:a,height:u}=o||{},f=Object.assign(Object.assign({},a&&{width:a}),u&&{height:u}),m=this.wrap("img",null,Object.assign({src:t,alt:i},f));return this.addRaw(m).addEOL()}addHeading(t,i){let o=`h${i}`,a=["h1","h2","h3","h4","h5","h6"].includes(o)?o:"h1",u=this.wrap(a,t);return this.addRaw(u).addEOL()}addSeparator(){let t=this.wrap("hr",null);return this.addRaw(t).addEOL()}addBreak(){let t=this.wrap("br",null);return this.addRaw(t).addEOL()}addQuote(t,i){let o=Object.assign({},i&&{cite:i}),a=this.wrap("blockquote",t,o);return this.addRaw(a).addEOL()}addLink(t,i){let o=this.wrap("a",t,{href:i});return this.addRaw(o).addEOL()}},js=new yi;Z.markdownSummary=js;Z.summary=js});var Hs=I(ee=>{"use strict";var mc=ee&&ee.__createBinding||(Object.create?function(r,t,i,o){o===void 0&&(o=i),Object.defineProperty(r,o,{enumerable:!0,get:function(){return t[i]}})}:function(r,t,i,o){o===void 0&&(o=i),r[o]=t[i]}),pc=ee&&ee.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),bc=ee&&ee.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var i in r)i!=="default"&&Object.hasOwnProperty.call(r,i)&&mc(t,r,i);return pc(t,r),t};Object.defineProperty(ee,"__esModule",{value:!0});ee.toPlatformPath=ee.toWin32Path=ee.toPosixPath=void 0;var _c=bc(require("path"));function yc(r){return r.replace(/[\\]/g,"/")}ee.toPosixPath=yc;function gc(r){return r.replace(/[/]/g,"\\")}ee.toWin32Path=gc;function wc(r){return r.replace(/[/\\]/g,_c.sep)}ee.toPlatformPath=wc});var sn=I(R=>{"use strict";var Sc=R&&R.__createBinding||(Object.create?function(r,t,i,o){o===void 0&&(o=i),Object.defineProperty(r,o,{enumerable:!0,get:function(){return t[i]}})}:function(r,t,i,o){o===void 0&&(o=i),r[o]=t[i]}),vc=R&&R.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),Vs=R&&R.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var i in r)i!=="default"&&Object.hasOwnProperty.call(r,i)&&Sc(t,r,i);return vc(t,r),t},Qs=R&&R.__awaiter||function(r,t,i,o){function a(u){return u instanceof i?u:new i(function(f){f(u)})}return new(i||(i=Promise))(function(u,f){function m(_){try{h(o.next(_))}catch(b){f(b)}}function d(_){try{h(o.throw(_))}catch(b){f(b)}}function h(_){_.done?u(_.value):a(_.value).then(m,d)}h((o=o.apply(r,t||[])).next())})};Object.defineProperty(R,"__esModule",{value:!0});R.getIDToken=R.getState=R.saveState=R.group=R.endGroup=R.startGroup=R.info=R.notice=R.warning=R.error=R.debug=R.isDebug=R.setFailed=R.setCommandEcho=R.setOutput=R.getBooleanInput=R.getMultilineInput=R.getInput=R.addPath=R.setSecret=R.exportVariable=R.ExitCode=void 0;var de=as(),ot=Os(),At=xr(),Ys=Vs(require("os")),Rc=Vs(require("path")),Tc=Ns(),Gs;(function(r){r[r.Success=0]="Success",r[r.Failure=1]="Failure"})(Gs=R.ExitCode||(R.ExitCode={}));function Ec(r,t){let i=At.toCommandValue(t);if(process.env[r]=i,process.env.GITHUB_ENV||"")return ot.issueFileCommand("ENV",ot.prepareKeyValueMessage(r,t));de.issueCommand("set-env",{name:r},i)}R.exportVariable=Ec;function Pc(r){de.issueCommand("add-mask",{},r)}R.setSecret=Pc;function Ac(r){process.env.GITHUB_PATH||""?ot.issueFileCommand("PATH",r):de.issueCommand("add-path",{},r),process.env.PATH=`${r}${Rc.delimiter}${process.env.PATH}`}R.addPath=Ac;function wi(r,t){let i=process.env[`INPUT_${r.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!i)throw new Error(`Input required and not supplied: ${r}`);return t&&t.trimWhitespace===!1?i:i.trim()}R.getInput=wi;function Cc(r,t){let i=wi(r,t).split(`
`).filter(o=>o!=="");return t&&t.trimWhitespace===!1?i:i.map(o=>o.trim())}R.getMultilineInput=Cc;function Oc(r,t){let i=["true","True","TRUE"],o=["false","False","FALSE"],a=wi(r,t);if(i.includes(a))return!0;if(o.includes(a))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${r}
Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}R.getBooleanInput=Oc;function qc(r,t){if(process.env.GITHUB_OUTPUT||"")return ot.issueFileCommand("OUTPUT",ot.prepareKeyValueMessage(r,t));process.stdout.write(Ys.EOL),de.issueCommand("set-output",{name:r},At.toCommandValue(t))}R.setOutput=qc;function Bc(r){de.issue("echo",r?"on":"off")}R.setCommandEcho=Bc;function kc(r){process.exitCode=Gs.Failure,Js(r)}R.setFailed=kc;function Dc(){return process.env.RUNNER_DEBUG==="1"}R.isDebug=Dc;function Ic(r){de.issueCommand("debug",{},r)}R.debug=Ic;function Js(r,t={}){de.issueCommand("error",At.toCommandProperties(t),r instanceof Error?r.toString():r)}R.error=Js;function Wc(r,t={}){de.issueCommand("warning",At.toCommandProperties(t),r instanceof Error?r.toString():r)}R.warning=Wc;function Mc(r,t={}){de.issueCommand("notice",At.toCommandProperties(t),r instanceof Error?r.toString():r)}R.notice=Mc;function Lc(r){process.stdout.write(r+Ys.EOL)}R.info=Lc;function Ks(r){de.issue("group",r)}R.startGroup=Ks;function Xs(){de.issue("endgroup")}R.endGroup=Xs;function Fc(r,t){return Qs(this,void 0,void 0,function*(){Ks(r);let i;try{i=yield t()}finally{Xs()}return i})}R.group=Fc;function xc(r,t){if(process.env.GITHUB_STATE||"")return ot.issueFileCommand("STATE",ot.prepareKeyValueMessage(r,t));de.issueCommand("save-state",{name:r},At.toCommandValue(t))}R.saveState=xc;function Uc(r){return process.env[`STATE_${r}`]||""}R.getState=Uc;function $c(r){return Qs(this,void 0,void 0,function*(){return yield Tc.OidcClient.getIDToken(r)})}R.getIDToken=$c;var zc=gi();Object.defineProperty(R,"summary",{enumerable:!0,get:function(){return zc.summary}});var Nc=gi();Object.defineProperty(R,"markdownSummary",{enumerable:!0,get:function(){return Nc.markdownSummary}});var Si=Hs();Object.defineProperty(R,"toPosixPath",{enumerable:!0,get:function(){return Si.toPosixPath}});Object.defineProperty(R,"toWin32Path",{enumerable:!0,get:function(){return Si.toWin32Path}});Object.defineProperty(R,"toPlatformPath",{enumerable:!0,get:function(){return Si.toPlatformPath}})});var ea=I((Xd,vi)=>{"use strict";var jc=Object.prototype.hasOwnProperty,J="~";function Jt(){}Object.create&&(Jt.prototype=Object.create(null),new Jt().__proto__||(J=!1));function Hc(r,t,i){this.fn=r,this.context=t,this.once=i||!1}function Zs(r,t,i,o,a){if(typeof i!="function")throw new TypeError("The listener must be a function");var u=new Hc(i,o||r,a),f=J?J+t:t;return r._events[f]?r._events[f].fn?r._events[f]=[r._events[f],u]:r._events[f].push(u):(r._events[f]=u,r._eventsCount++),r}function an(r,t){--r._eventsCount===0?r._events=new Jt:delete r._events[t]}function V(){this._events=new Jt,this._eventsCount=0}V.prototype.eventNames=function(){var t=[],i,o;if(this._eventsCount===0)return t;for(o in i=this._events)jc.call(i,o)&&t.push(J?o.slice(1):o);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(i)):t};V.prototype.listeners=function(t){var i=J?J+t:t,o=this._events[i];if(!o)return[];if(o.fn)return[o.fn];for(var a=0,u=o.length,f=new Array(u);a<u;a++)f[a]=o[a].fn;return f};V.prototype.listenerCount=function(t){var i=J?J+t:t,o=this._events[i];return o?o.fn?1:o.length:0};V.prototype.emit=function(t,i,o,a,u,f){var m=J?J+t:t;if(!this._events[m])return!1;var d=this._events[m],h=arguments.length,_,b;if(d.fn){switch(d.once&&this.removeListener(t,d.fn,void 0,!0),h){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,i),!0;case 3:return d.fn.call(d.context,i,o),!0;case 4:return d.fn.call(d.context,i,o,a),!0;case 5:return d.fn.call(d.context,i,o,a,u),!0;case 6:return d.fn.call(d.context,i,o,a,u,f),!0}for(b=1,_=new Array(h-1);b<h;b++)_[b-1]=arguments[b];d.fn.apply(d.context,_)}else{var g=d.length,w;for(b=0;b<g;b++)switch(d[b].once&&this.removeListener(t,d[b].fn,void 0,!0),h){case 1:d[b].fn.call(d[b].context);break;case 2:d[b].fn.call(d[b].context,i);break;case 3:d[b].fn.call(d[b].context,i,o);break;case 4:d[b].fn.call(d[b].context,i,o,a);break;default:if(!_)for(w=1,_=new Array(h-1);w<h;w++)_[w-1]=arguments[w];d[b].fn.apply(d[b].context,_)}}return!0};V.prototype.on=function(t,i,o){return Zs(this,t,i,o,!1)};V.prototype.once=function(t,i,o){return Zs(this,t,i,o,!0)};V.prototype.removeListener=function(t,i,o,a){var u=J?J+t:t;if(!this._events[u])return this;if(!i)return an(this,u),this;var f=this._events[u];if(f.fn)f.fn===i&&(!a||f.once)&&(!o||f.context===o)&&an(this,u);else{for(var m=0,d=[],h=f.length;m<h;m++)(f[m].fn!==i||a&&!f[m].once||o&&f[m].context!==o)&&d.push(f[m]);d.length?this._events[u]=d.length===1?d[0]:d:an(this,u)}return this};V.prototype.removeAllListeners=function(t){var i;return t?(i=J?J+t:t,this._events[i]&&an(this,i)):(this._events=new Jt,this._eventsCount=0),this};V.prototype.off=V.prototype.removeListener;V.prototype.addListener=V.prototype.on;V.prefixed=J;V.EventEmitter=V;typeof vi<"u"&&(vi.exports=V)});var da=I((fn,ca)=>{(function(r,t){typeof fn=="object"&&typeof ca<"u"?t(fn):typeof define=="function"&&define.amd?define(["exports"],t):(r=typeof globalThis<"u"?globalThis:r||self,t(r.WebStreamsPolyfill={}))})(fn,function(r){"use strict";let t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function i(){}function o(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}let a=o();function u(e){return typeof e=="object"&&e!==null||typeof e=="function"}let f=i,m=Promise,d=Promise.prototype.then,h=Promise.resolve.bind(m),_=Promise.reject.bind(m);function b(e){return new m(e)}function g(e){return h(e)}function w(e){return _(e)}function S(e,n,s){return d.call(e,n,s)}function L(e,n,s){S(S(e,n,s),void 0,f)}function k(e,n){L(e,n)}function D(e,n){L(e,void 0,n)}function U(e,n,s){return S(e,n,s)}function K(e){S(e,void 0,f)}let O=(()=>{let e=a&&a.queueMicrotask;if(typeof e=="function")return e;let n=g(void 0);return s=>S(n,s)})();function $(e,n,s){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,n,s)}function W(e,n,s){try{return g($(e,n,s))}catch(l){return w(l)}}let xe=16384;class ie{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(n){let s=this._back,l=s;s._elements.length===xe-1&&(l={_elements:[],_next:void 0}),s._elements.push(n),l!==s&&(this._back=l,s._next=l),++this._size}shift(){let n=this._front,s=n,l=this._cursor,c=l+1,p=n._elements,y=p[l];return c===xe&&(s=n._next,c=0),--this._size,this._cursor=c,n!==s&&(this._front=s),p[l]=void 0,y}forEach(n){let s=this._cursor,l=this._front,c=l._elements;for(;(s!==c.length||l._next!==void 0)&&!(s===c.length&&(l=l._next,c=l._elements,s=0,c.length===0));)n(c[s]),++s}peek(){let n=this._front,s=this._cursor;return n._elements[s]}}function zi(e,n){e._ownerReadableStream=n,n._reader=e,n._state==="readable"?Sn(e):n._state==="closed"?Ya(e):Ni(e,n._storedError)}function wn(e,n){let s=e._ownerReadableStream;return be(s,n)}function Ae(e){e._ownerReadableStream._state==="readable"?vn(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):Ga(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function ft(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function Sn(e){e._closedPromise=b((n,s)=>{e._closedPromise_resolve=n,e._closedPromise_reject=s})}function Ni(e,n){Sn(e),vn(e,n)}function Ya(e){Sn(e),ji(e)}function vn(e,n){e._closedPromise_reject!==void 0&&(K(e._closedPromise),e._closedPromise_reject(n),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function Ga(e,n){Ni(e,n)}function ji(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let Hi=t("[[AbortSteps]]"),Vi=t("[[ErrorSteps]]"),Rn=t("[[CancelSteps]]"),Tn=t("[[PullSteps]]"),Qi=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},Ja=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function Ka(e){return typeof e=="object"||typeof e=="function"}function Ce(e,n){if(e!==void 0&&!Ka(e))throw new TypeError(`${n} is not an object.`)}function me(e,n){if(typeof e!="function")throw new TypeError(`${n} is not a function.`)}function Xa(e){return typeof e=="object"&&e!==null||typeof e=="function"}function Yi(e,n){if(!Xa(e))throw new TypeError(`${n} is not an object.`)}function Oe(e,n,s){if(e===void 0)throw new TypeError(`Parameter ${n} is required in '${s}'.`)}function En(e,n,s){if(e===void 0)throw new TypeError(`${n} is required in '${s}'.`)}function Pn(e){return Number(e)}function Gi(e){return e===0?0:e}function Za(e){return Gi(Ja(e))}function Ji(e,n){let l=Number.MAX_SAFE_INTEGER,c=Number(e);if(c=Gi(c),!Qi(c))throw new TypeError(`${n} is not a finite number`);if(c=Za(c),c<0||c>l)throw new TypeError(`${n} is outside the accepted range of ${0} to ${l}, inclusive`);return!Qi(c)||c===0?0:c}function An(e,n){if(!je(e))throw new TypeError(`${n} is not a ReadableStream.`)}function ct(e){return new kt(e)}function Ki(e,n){e._reader._readRequests.push(n)}function Cn(e,n,s){let c=e._reader._readRequests.shift();s?c._closeSteps():c._chunkSteps(n)}function ar(e){return e._reader._readRequests.length}function Xi(e){let n=e._reader;return!(n===void 0||!Ue(n))}class kt{constructor(n){if(Oe(n,1,"ReadableStreamDefaultReader"),An(n,"First parameter"),He(n))throw new TypeError("This stream has already been locked for exclusive reading by another reader");zi(this,n),this._readRequests=new ie}get closed(){return Ue(this)?this._closedPromise:w(ur("closed"))}cancel(n=void 0){return Ue(this)?this._ownerReadableStream===void 0?w(ft("cancel")):wn(this,n):w(ur("cancel"))}read(){if(!Ue(this))return w(ur("read"));if(this._ownerReadableStream===void 0)return w(ft("read from"));let n,s,l=b((p,y)=>{n=p,s=y});return Dt(this,{_chunkSteps:p=>n({value:p,done:!1}),_closeSteps:()=>n({value:void 0,done:!0}),_errorSteps:p=>s(p)}),l}releaseLock(){if(!Ue(this))throw ur("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");Ae(this)}}}Object.defineProperties(kt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(kt.prototype,t.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function Ue(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof kt}function Dt(e,n){let s=e._ownerReadableStream;s._disturbed=!0,s._state==="closed"?n._closeSteps():s._state==="errored"?n._errorSteps(s._storedError):s._readableStreamController[Tn](n)}function ur(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}let Zi=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class eo{constructor(n,s){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=n,this._preventCancel=s}next(){let n=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?U(this._ongoingPromise,n,n):n(),this._ongoingPromise}return(n){let s=()=>this._returnSteps(n);return this._ongoingPromise?U(this._ongoingPromise,s,s):s()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let n=this._reader;if(n._ownerReadableStream===void 0)return w(ft("iterate"));let s,l,c=b((y,v)=>{s=y,l=v});return Dt(n,{_chunkSteps:y=>{this._ongoingPromise=void 0,O(()=>s({value:y,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,Ae(n),s({value:void 0,done:!0})},_errorSteps:y=>{this._ongoingPromise=void 0,this._isFinished=!0,Ae(n),l(y)}}),c}_returnSteps(n){if(this._isFinished)return Promise.resolve({value:n,done:!0});this._isFinished=!0;let s=this._reader;if(s._ownerReadableStream===void 0)return w(ft("finish iterating"));if(!this._preventCancel){let l=wn(s,n);return Ae(s),U(l,()=>({value:n,done:!0}))}return Ae(s),g({value:n,done:!0})}}let to={next(){return ro(this)?this._asyncIteratorImpl.next():w(no("next"))},return(e){return ro(this)?this._asyncIteratorImpl.return(e):w(no("return"))}};Zi!==void 0&&Object.setPrototypeOf(to,Zi);function eu(e,n){let s=ct(e),l=new eo(s,n),c=Object.create(to);return c._asyncIteratorImpl=l,c}function ro(e){if(!u(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof eo}catch{return!1}}function no(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}let io=Number.isNaN||function(e){return e!==e};function It(e){return e.slice()}function oo(e,n,s,l,c){new Uint8Array(e).set(new Uint8Array(s,l,c),n)}function Sd(e){return e}function lr(e){return!1}function so(e,n,s){if(e.slice)return e.slice(n,s);let l=s-n,c=new ArrayBuffer(l);return oo(c,0,e,n,l),c}function tu(e){return!(typeof e!="number"||io(e)||e<0)}function ao(e){let n=so(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(n)}function On(e){let n=e._queue.shift();return e._queueTotalSize-=n.size,e._queueTotalSize<0&&(e._queueTotalSize=0),n.value}function qn(e,n,s){if(!tu(s)||s===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:n,size:s}),e._queueTotalSize+=s}function ru(e){return e._queue.peek().value}function $e(e){e._queue=new ie,e._queueTotalSize=0}class Wt{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!Bn(this))throw Wn("view");return this._view}respond(n){if(!Bn(this))throw Wn("respond");if(Oe(n,1,"respond"),n=Ji(n,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");lr(this._view.buffer),mr(this._associatedReadableByteStreamController,n)}respondWithNewView(n){if(!Bn(this))throw Wn("respondWithNewView");if(Oe(n,1,"respondWithNewView"),!ArrayBuffer.isView(n))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");lr(n.buffer),pr(this._associatedReadableByteStreamController,n)}}Object.defineProperties(Wt.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Wt.prototype,t.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class dt{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!Xe(this))throw Lt("byobRequest");return In(this)}get desiredSize(){if(!Xe(this))throw Lt("desiredSize");return bo(this)}close(){if(!Xe(this))throw Lt("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let n=this._controlledReadableByteStream._state;if(n!=="readable")throw new TypeError(`The stream (in ${n} state) is not in the readable state and cannot be closed`);Mt(this)}enqueue(n){if(!Xe(this))throw Lt("enqueue");if(Oe(n,1,"enqueue"),!ArrayBuffer.isView(n))throw new TypeError("chunk must be an array buffer view");if(n.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(n.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let s=this._controlledReadableByteStream._state;if(s!=="readable")throw new TypeError(`The stream (in ${s} state) is not in the readable state and cannot be enqueued to`);hr(this,n)}error(n=void 0){if(!Xe(this))throw Lt("error");pe(this,n)}[Rn](n){uo(this),$e(this);let s=this._cancelAlgorithm(n);return dr(this),s}[Tn](n){let s=this._controlledReadableByteStream;if(this._queueTotalSize>0){let c=this._queue.shift();this._queueTotalSize-=c.byteLength,ho(this);let p=new Uint8Array(c.buffer,c.byteOffset,c.byteLength);n._chunkSteps(p);return}let l=this._autoAllocateChunkSize;if(l!==void 0){let c;try{c=new ArrayBuffer(l)}catch(y){n._errorSteps(y);return}let p={buffer:c,bufferByteLength:l,byteOffset:0,byteLength:l,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(p)}Ki(s,n),Ze(this)}}Object.defineProperties(dt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(dt.prototype,t.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function Xe(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof dt}function Bn(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof Wt}function Ze(e){if(!su(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let s=e._pullAlgorithm();L(s,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Ze(e))},l=>{pe(e,l)})}function uo(e){Dn(e),e._pendingPullIntos=new ie}function kn(e,n){let s=!1;e._state==="closed"&&(s=!0);let l=lo(n);n.readerType==="default"?Cn(e,l,s):lu(e,l,s)}function lo(e){let n=e.bytesFilled,s=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,n/s)}function fr(e,n,s,l){e._queue.push({buffer:n,byteOffset:s,byteLength:l}),e._queueTotalSize+=l}function fo(e,n){let s=n.elementSize,l=n.bytesFilled-n.bytesFilled%s,c=Math.min(e._queueTotalSize,n.byteLength-n.bytesFilled),p=n.bytesFilled+c,y=p-p%s,v=c,E=!1;y>l&&(v=y-n.bytesFilled,E=!0);let C=e._queue;for(;v>0;){let q=C.peek(),B=Math.min(v,q.byteLength),z=n.byteOffset+n.bytesFilled;oo(n.buffer,z,q.buffer,q.byteOffset,B),q.byteLength===B?C.shift():(q.byteOffset+=B,q.byteLength-=B),e._queueTotalSize-=B,co(e,B,n),v-=B}return E}function co(e,n,s){s.bytesFilled+=n}function ho(e){e._queueTotalSize===0&&e._closeRequested?(dr(e),Ht(e._controlledReadableByteStream)):Ze(e)}function Dn(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function mo(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let n=e._pendingPullIntos.peek();fo(e,n)&&(cr(e),kn(e._controlledReadableByteStream,n))}}function nu(e,n,s){let l=e._controlledReadableByteStream,c=1;n.constructor!==DataView&&(c=n.constructor.BYTES_PER_ELEMENT);let p=n.constructor,y=n.buffer,v={buffer:y,bufferByteLength:y.byteLength,byteOffset:n.byteOffset,byteLength:n.byteLength,bytesFilled:0,elementSize:c,viewConstructor:p,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(v),go(l,s);return}if(l._state==="closed"){let E=new p(v.buffer,v.byteOffset,0);s._closeSteps(E);return}if(e._queueTotalSize>0){if(fo(e,v)){let E=lo(v);ho(e),s._chunkSteps(E);return}if(e._closeRequested){let E=new TypeError("Insufficient bytes to fill elements in the given buffer");pe(e,E),s._errorSteps(E);return}}e._pendingPullIntos.push(v),go(l,s),Ze(e)}function iu(e,n){let s=e._controlledReadableByteStream;if(Mn(s))for(;wo(s)>0;){let l=cr(e);kn(s,l)}}function ou(e,n,s){if(co(e,n,s),s.bytesFilled<s.elementSize)return;cr(e);let l=s.bytesFilled%s.elementSize;if(l>0){let c=s.byteOffset+s.bytesFilled,p=so(s.buffer,c-l,c);fr(e,p,0,p.byteLength)}s.bytesFilled-=l,kn(e._controlledReadableByteStream,s),mo(e)}function po(e,n){let s=e._pendingPullIntos.peek();Dn(e),e._controlledReadableByteStream._state==="closed"?iu(e):ou(e,n,s),Ze(e)}function cr(e){return e._pendingPullIntos.shift()}function su(e){let n=e._controlledReadableByteStream;return n._state!=="readable"||e._closeRequested||!e._started?!1:!!(Xi(n)&&ar(n)>0||Mn(n)&&wo(n)>0||bo(e)>0)}function dr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function Mt(e){let n=e._controlledReadableByteStream;if(!(e._closeRequested||n._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){let l=new TypeError("Insufficient bytes to fill elements in the given buffer");throw pe(e,l),l}dr(e),Ht(n)}}function hr(e,n){let s=e._controlledReadableByteStream;if(e._closeRequested||s._state!=="readable")return;let l=n.buffer,c=n.byteOffset,p=n.byteLength,y=l;if(e._pendingPullIntos.length>0){let v=e._pendingPullIntos.peek();lr(v.buffer),v.buffer=v.buffer}if(Dn(e),Xi(s))if(ar(s)===0)fr(e,y,c,p);else{e._pendingPullIntos.length>0&&cr(e);let v=new Uint8Array(y,c,p);Cn(s,v,!1)}else Mn(s)?(fr(e,y,c,p),mo(e)):fr(e,y,c,p);Ze(e)}function pe(e,n){let s=e._controlledReadableByteStream;s._state==="readable"&&(uo(e),$e(e),dr(e),jo(s,n))}function In(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let n=e._pendingPullIntos.peek(),s=new Uint8Array(n.buffer,n.byteOffset+n.bytesFilled,n.byteLength-n.bytesFilled),l=Object.create(Wt.prototype);uu(l,e,s),e._byobRequest=l}return e._byobRequest}function bo(e){let n=e._controlledReadableByteStream._state;return n==="errored"?null:n==="closed"?0:e._strategyHWM-e._queueTotalSize}function mr(e,n){let s=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(n!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(n===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(s.bytesFilled+n>s.byteLength)throw new RangeError("bytesWritten out of range")}s.buffer=s.buffer,po(e,n)}function pr(e,n){let s=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(n.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(n.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(s.byteOffset+s.bytesFilled!==n.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(s.bufferByteLength!==n.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(s.bytesFilled+n.byteLength>s.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let c=n.byteLength;s.buffer=n.buffer,po(e,c)}function _o(e,n,s,l,c,p,y){n._controlledReadableByteStream=e,n._pullAgain=!1,n._pulling=!1,n._byobRequest=null,n._queue=n._queueTotalSize=void 0,$e(n),n._closeRequested=!1,n._started=!1,n._strategyHWM=p,n._pullAlgorithm=l,n._cancelAlgorithm=c,n._autoAllocateChunkSize=y,n._pendingPullIntos=new ie,e._readableStreamController=n;let v=s();L(g(v),()=>{n._started=!0,Ze(n)},E=>{pe(n,E)})}function au(e,n,s){let l=Object.create(dt.prototype),c=()=>{},p=()=>g(void 0),y=()=>g(void 0);n.start!==void 0&&(c=()=>n.start(l)),n.pull!==void 0&&(p=()=>n.pull(l)),n.cancel!==void 0&&(y=E=>n.cancel(E));let v=n.autoAllocateChunkSize;if(v===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");_o(e,l,c,p,y,s,v)}function uu(e,n,s){e._associatedReadableByteStreamController=n,e._view=s}function Wn(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function Lt(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function yo(e){return new Ft(e)}function go(e,n){e._reader._readIntoRequests.push(n)}function lu(e,n,s){let c=e._reader._readIntoRequests.shift();s?c._closeSteps(n):c._chunkSteps(n)}function wo(e){return e._reader._readIntoRequests.length}function Mn(e){let n=e._reader;return!(n===void 0||!et(n))}class Ft{constructor(n){if(Oe(n,1,"ReadableStreamBYOBReader"),An(n,"First parameter"),He(n))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!Xe(n._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");zi(this,n),this._readIntoRequests=new ie}get closed(){return et(this)?this._closedPromise:w(br("closed"))}cancel(n=void 0){return et(this)?this._ownerReadableStream===void 0?w(ft("cancel")):wn(this,n):w(br("cancel"))}read(n){if(!et(this))return w(br("read"));if(!ArrayBuffer.isView(n))return w(new TypeError("view must be an array buffer view"));if(n.byteLength===0)return w(new TypeError("view must have non-zero byteLength"));if(n.buffer.byteLength===0)return w(new TypeError("view's buffer must have non-zero byteLength"));if(lr(n.buffer),this._ownerReadableStream===void 0)return w(ft("read from"));let s,l,c=b((y,v)=>{s=y,l=v});return So(this,n,{_chunkSteps:y=>s({value:y,done:!1}),_closeSteps:y=>s({value:y,done:!0}),_errorSteps:y=>l(y)}),c}releaseLock(){if(!et(this))throw br("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");Ae(this)}}}Object.defineProperties(Ft.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Ft.prototype,t.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function et(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof Ft}function So(e,n,s){let l=e._ownerReadableStream;l._disturbed=!0,l._state==="errored"?s._errorSteps(l._storedError):nu(l._readableStreamController,n,s)}function br(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function xt(e,n){let{highWaterMark:s}=e;if(s===void 0)return n;if(io(s)||s<0)throw new RangeError("Invalid highWaterMark");return s}function _r(e){let{size:n}=e;return n||(()=>1)}function yr(e,n){Ce(e,n);let s=e==null?void 0:e.highWaterMark,l=e==null?void 0:e.size;return{highWaterMark:s===void 0?void 0:Pn(s),size:l===void 0?void 0:fu(l,`${n} has member 'size' that`)}}function fu(e,n){return me(e,n),s=>Pn(e(s))}function cu(e,n){Ce(e,n);let s=e==null?void 0:e.abort,l=e==null?void 0:e.close,c=e==null?void 0:e.start,p=e==null?void 0:e.type,y=e==null?void 0:e.write;return{abort:s===void 0?void 0:du(s,e,`${n} has member 'abort' that`),close:l===void 0?void 0:hu(l,e,`${n} has member 'close' that`),start:c===void 0?void 0:mu(c,e,`${n} has member 'start' that`),write:y===void 0?void 0:pu(y,e,`${n} has member 'write' that`),type:p}}function du(e,n,s){return me(e,s),l=>W(e,n,[l])}function hu(e,n,s){return me(e,s),()=>W(e,n,[])}function mu(e,n,s){return me(e,s),l=>$(e,n,[l])}function pu(e,n,s){return me(e,s),(l,c)=>W(e,n,[l,c])}function vo(e,n){if(!ht(e))throw new TypeError(`${n} is not a WritableStream.`)}function bu(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}let _u=typeof AbortController=="function";function yu(){if(_u)return new AbortController}class Ut{constructor(n={},s={}){n===void 0?n=null:Yi(n,"First parameter");let l=yr(s,"Second parameter"),c=cu(n,"First parameter");if(To(this),c.type!==void 0)throw new RangeError("Invalid type is specified");let y=_r(l),v=xt(l,1);ku(this,c,v,y)}get locked(){if(!ht(this))throw Rr("locked");return mt(this)}abort(n=void 0){return ht(this)?mt(this)?w(new TypeError("Cannot abort a stream that already has a writer")):gr(this,n):w(Rr("abort"))}close(){return ht(this)?mt(this)?w(new TypeError("Cannot close a stream that already has a writer")):ve(this)?w(new TypeError("Cannot close an already-closing stream")):Eo(this):w(Rr("close"))}getWriter(){if(!ht(this))throw Rr("getWriter");return Ro(this)}}Object.defineProperties(Ut.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Ut.prototype,t.toStringTag,{value:"WritableStream",configurable:!0});function Ro(e){return new $t(e)}function gu(e,n,s,l,c=1,p=()=>1){let y=Object.create(Ut.prototype);To(y);let v=Object.create(pt.prototype);return Bo(y,v,e,n,s,l,c,p),y}function To(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new ie,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function ht(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof Ut}function mt(e){return e._writer!==void 0}function gr(e,n){var s;if(e._state==="closed"||e._state==="errored")return g(void 0);e._writableStreamController._abortReason=n,(s=e._writableStreamController._abortController)===null||s===void 0||s.abort();let l=e._state;if(l==="closed"||l==="errored")return g(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let c=!1;l==="erroring"&&(c=!0,n=void 0);let p=b((y,v)=>{e._pendingAbortRequest={_promise:void 0,_resolve:y,_reject:v,_reason:n,_wasAlreadyErroring:c}});return e._pendingAbortRequest._promise=p,c||Fn(e,n),p}function Eo(e){let n=e._state;if(n==="closed"||n==="errored")return w(new TypeError(`The stream (in ${n} state) is not in the writable state and cannot be closed`));let s=b((c,p)=>{let y={_resolve:c,_reject:p};e._closeRequest=y}),l=e._writer;return l!==void 0&&e._backpressure&&n==="writable"&&Qn(l),Du(e._writableStreamController),s}function wu(e){return b((s,l)=>{let c={_resolve:s,_reject:l};e._writeRequests.push(c)})}function Ln(e,n){if(e._state==="writable"){Fn(e,n);return}xn(e)}function Fn(e,n){let s=e._writableStreamController;e._state="erroring",e._storedError=n;let l=e._writer;l!==void 0&&Ao(l,n),!Eu(e)&&s._started&&xn(e)}function xn(e){e._state="errored",e._writableStreamController[Vi]();let n=e._storedError;if(e._writeRequests.forEach(c=>{c._reject(n)}),e._writeRequests=new ie,e._pendingAbortRequest===void 0){wr(e);return}let s=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,s._wasAlreadyErroring){s._reject(n),wr(e);return}let l=e._writableStreamController[Hi](s._reason);L(l,()=>{s._resolve(),wr(e)},c=>{s._reject(c),wr(e)})}function Su(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function vu(e,n){e._inFlightWriteRequest._reject(n),e._inFlightWriteRequest=void 0,Ln(e,n)}function Ru(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,e._state==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let s=e._writer;s!==void 0&&Wo(s)}function Tu(e,n){e._inFlightCloseRequest._reject(n),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(n),e._pendingAbortRequest=void 0),Ln(e,n)}function ve(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function Eu(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function Pu(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function Au(e){e._inFlightWriteRequest=e._writeRequests.shift()}function wr(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let n=e._writer;n!==void 0&&Hn(n,e._storedError)}function Un(e,n){let s=e._writer;s!==void 0&&n!==e._backpressure&&(n?Uu(s):Qn(s)),e._backpressure=n}class $t{constructor(n){if(Oe(n,1,"WritableStreamDefaultWriter"),vo(n,"First parameter"),mt(n))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=n,n._writer=this;let s=n._state;if(s==="writable")!ve(n)&&n._backpressure?Er(this):Mo(this),Tr(this);else if(s==="erroring")Vn(this,n._storedError),Tr(this);else if(s==="closed")Mo(this),Fu(this);else{let l=n._storedError;Vn(this,l),Io(this,l)}}get closed(){return tt(this)?this._closedPromise:w(rt("closed"))}get desiredSize(){if(!tt(this))throw rt("desiredSize");if(this._ownerWritableStream===void 0)throw zt("desiredSize");return Bu(this)}get ready(){return tt(this)?this._readyPromise:w(rt("ready"))}abort(n=void 0){return tt(this)?this._ownerWritableStream===void 0?w(zt("abort")):Cu(this,n):w(rt("abort"))}close(){if(!tt(this))return w(rt("close"));let n=this._ownerWritableStream;return n===void 0?w(zt("close")):ve(n)?w(new TypeError("Cannot close an already-closing stream")):Po(this)}releaseLock(){if(!tt(this))throw rt("releaseLock");this._ownerWritableStream!==void 0&&Co(this)}write(n=void 0){return tt(this)?this._ownerWritableStream===void 0?w(zt("write to")):Oo(this,n):w(rt("write"))}}Object.defineProperties($t.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty($t.prototype,t.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function tt(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof $t}function Cu(e,n){let s=e._ownerWritableStream;return gr(s,n)}function Po(e){let n=e._ownerWritableStream;return Eo(n)}function Ou(e){let n=e._ownerWritableStream,s=n._state;return ve(n)||s==="closed"?g(void 0):s==="errored"?w(n._storedError):Po(e)}function qu(e,n){e._closedPromiseState==="pending"?Hn(e,n):xu(e,n)}function Ao(e,n){e._readyPromiseState==="pending"?Lo(e,n):$u(e,n)}function Bu(e){let n=e._ownerWritableStream,s=n._state;return s==="errored"||s==="erroring"?null:s==="closed"?0:ko(n._writableStreamController)}function Co(e){let n=e._ownerWritableStream,s=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Ao(e,s),qu(e,s),n._writer=void 0,e._ownerWritableStream=void 0}function Oo(e,n){let s=e._ownerWritableStream,l=s._writableStreamController,c=Iu(l,n);if(s!==e._ownerWritableStream)return w(zt("write to"));let p=s._state;if(p==="errored")return w(s._storedError);if(ve(s)||p==="closed")return w(new TypeError("The stream is closing or closed and cannot be written to"));if(p==="erroring")return w(s._storedError);let y=wu(s);return Wu(l,n,c),y}let qo={};class pt{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!$n(this))throw jn("abortReason");return this._abortReason}get signal(){if(!$n(this))throw jn("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(n=void 0){if(!$n(this))throw jn("error");this._controlledWritableStream._state==="writable"&&Do(this,n)}[Hi](n){let s=this._abortAlgorithm(n);return Sr(this),s}[Vi](){$e(this)}}Object.defineProperties(pt.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(pt.prototype,t.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function $n(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof pt}function Bo(e,n,s,l,c,p,y,v){n._controlledWritableStream=e,e._writableStreamController=n,n._queue=void 0,n._queueTotalSize=void 0,$e(n),n._abortReason=void 0,n._abortController=yu(),n._started=!1,n._strategySizeAlgorithm=v,n._strategyHWM=y,n._writeAlgorithm=l,n._closeAlgorithm=c,n._abortAlgorithm=p;let E=Nn(n);Un(e,E);let C=s(),q=g(C);L(q,()=>{n._started=!0,vr(n)},B=>{n._started=!0,Ln(e,B)})}function ku(e,n,s,l){let c=Object.create(pt.prototype),p=()=>{},y=()=>g(void 0),v=()=>g(void 0),E=()=>g(void 0);n.start!==void 0&&(p=()=>n.start(c)),n.write!==void 0&&(y=C=>n.write(C,c)),n.close!==void 0&&(v=()=>n.close()),n.abort!==void 0&&(E=C=>n.abort(C)),Bo(e,c,p,y,v,E,s,l)}function Sr(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Du(e){qn(e,qo,0),vr(e)}function Iu(e,n){try{return e._strategySizeAlgorithm(n)}catch(s){return zn(e,s),1}}function ko(e){return e._strategyHWM-e._queueTotalSize}function Wu(e,n,s){try{qn(e,n,s)}catch(c){zn(e,c);return}let l=e._controlledWritableStream;if(!ve(l)&&l._state==="writable"){let c=Nn(e);Un(l,c)}vr(e)}function vr(e){let n=e._controlledWritableStream;if(!e._started||n._inFlightWriteRequest!==void 0)return;if(n._state==="erroring"){xn(n);return}if(e._queue.length===0)return;let l=ru(e);l===qo?Mu(e):Lu(e,l)}function zn(e,n){e._controlledWritableStream._state==="writable"&&Do(e,n)}function Mu(e){let n=e._controlledWritableStream;Pu(n),On(e);let s=e._closeAlgorithm();Sr(e),L(s,()=>{Ru(n)},l=>{Tu(n,l)})}function Lu(e,n){let s=e._controlledWritableStream;Au(s);let l=e._writeAlgorithm(n);L(l,()=>{Su(s);let c=s._state;if(On(e),!ve(s)&&c==="writable"){let p=Nn(e);Un(s,p)}vr(e)},c=>{s._state==="writable"&&Sr(e),vu(s,c)})}function Nn(e){return ko(e)<=0}function Do(e,n){let s=e._controlledWritableStream;Sr(e),Fn(s,n)}function Rr(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function jn(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function rt(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function zt(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function Tr(e){e._closedPromise=b((n,s)=>{e._closedPromise_resolve=n,e._closedPromise_reject=s,e._closedPromiseState="pending"})}function Io(e,n){Tr(e),Hn(e,n)}function Fu(e){Tr(e),Wo(e)}function Hn(e,n){e._closedPromise_reject!==void 0&&(K(e._closedPromise),e._closedPromise_reject(n),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function xu(e,n){Io(e,n)}function Wo(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function Er(e){e._readyPromise=b((n,s)=>{e._readyPromise_resolve=n,e._readyPromise_reject=s}),e._readyPromiseState="pending"}function Vn(e,n){Er(e),Lo(e,n)}function Mo(e){Er(e),Qn(e)}function Lo(e,n){e._readyPromise_reject!==void 0&&(K(e._readyPromise),e._readyPromise_reject(n),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function Uu(e){Er(e)}function $u(e,n){Vn(e,n)}function Qn(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}let Fo=typeof DOMException<"u"?DOMException:void 0;function zu(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function Nu(){let e=function(s,l){this.message=s||"",this.name=l||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}let ju=zu(Fo)?Fo:Nu();function xo(e,n,s,l,c,p){let y=ct(e),v=Ro(n);e._disturbed=!0;let E=!1,C=g(void 0);return b((q,B)=>{let z;if(p!==void 0){if(z=()=>{let T=new ju("Aborted","AbortError"),A=[];l||A.push(()=>n._state==="writable"?gr(n,T):g(void 0)),c||A.push(()=>e._state==="readable"?be(e,T):g(void 0)),X(()=>Promise.all(A.map(F=>F())),!0,T)},p.aborted){z();return}p.addEventListener("abort",z)}function _e(){return b((T,A)=>{function F(oe){oe?T():S(yt(),F,A)}F(!1)})}function yt(){return E?g(!0):S(v._readyPromise,()=>b((T,A)=>{Dt(y,{_chunkSteps:F=>{C=S(Oo(v,F),void 0,i),T(!1)},_closeSteps:()=>T(!0),_errorSteps:A})}))}if(qe(e,y._closedPromise,T=>{l?le(!0,T):X(()=>gr(n,T),!0,T)}),qe(n,v._closedPromise,T=>{c?le(!0,T):X(()=>be(e,T),!0,T)}),Y(e,y._closedPromise,()=>{s?le():X(()=>Ou(v))}),ve(n)||n._state==="closed"){let T=new TypeError("the destination writable stream closed before all data could be piped to it");c?le(!0,T):X(()=>be(e,T),!0,T)}K(_e());function Ve(){let T=C;return S(C,()=>T!==C?Ve():void 0)}function qe(T,A,F){T._state==="errored"?F(T._storedError):D(A,F)}function Y(T,A,F){T._state==="closed"?F():k(A,F)}function X(T,A,F){if(E)return;E=!0,n._state==="writable"&&!ve(n)?k(Ve(),oe):oe();function oe(){L(T(),()=>Be(A,F),gt=>Be(!0,gt))}}function le(T,A){E||(E=!0,n._state==="writable"&&!ve(n)?k(Ve(),()=>Be(T,A)):Be(T,A))}function Be(T,A){Co(v),Ae(y),p!==void 0&&p.removeEventListener("abort",z),T?B(A):q(void 0)}})}class bt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Pr(this))throw Or("desiredSize");return Yn(this)}close(){if(!Pr(this))throw Or("close");if(!_t(this))throw new TypeError("The stream is not in a state that permits close");jt(this)}enqueue(n=void 0){if(!Pr(this))throw Or("enqueue");if(!_t(this))throw new TypeError("The stream is not in a state that permits enqueue");return Cr(this,n)}error(n=void 0){if(!Pr(this))throw Or("error");ze(this,n)}[Rn](n){$e(this);let s=this._cancelAlgorithm(n);return Ar(this),s}[Tn](n){let s=this._controlledReadableStream;if(this._queue.length>0){let l=On(this);this._closeRequested&&this._queue.length===0?(Ar(this),Ht(s)):Nt(this),n._chunkSteps(l)}else Ki(s,n),Nt(this)}}Object.defineProperties(bt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(bt.prototype,t.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function Pr(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof bt}function Nt(e){if(!Uo(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let s=e._pullAlgorithm();L(s,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Nt(e))},l=>{ze(e,l)})}function Uo(e){let n=e._controlledReadableStream;return!_t(e)||!e._started?!1:!!(He(n)&&ar(n)>0||Yn(e)>0)}function Ar(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function jt(e){if(!_t(e))return;let n=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(Ar(e),Ht(n))}function Cr(e,n){if(!_t(e))return;let s=e._controlledReadableStream;if(He(s)&&ar(s)>0)Cn(s,n,!1);else{let l;try{l=e._strategySizeAlgorithm(n)}catch(c){throw ze(e,c),c}try{qn(e,n,l)}catch(c){throw ze(e,c),c}}Nt(e)}function ze(e,n){let s=e._controlledReadableStream;s._state==="readable"&&($e(e),Ar(e),jo(s,n))}function Yn(e){let n=e._controlledReadableStream._state;return n==="errored"?null:n==="closed"?0:e._strategyHWM-e._queueTotalSize}function Hu(e){return!Uo(e)}function _t(e){let n=e._controlledReadableStream._state;return!e._closeRequested&&n==="readable"}function $o(e,n,s,l,c,p,y){n._controlledReadableStream=e,n._queue=void 0,n._queueTotalSize=void 0,$e(n),n._started=!1,n._closeRequested=!1,n._pullAgain=!1,n._pulling=!1,n._strategySizeAlgorithm=y,n._strategyHWM=p,n._pullAlgorithm=l,n._cancelAlgorithm=c,e._readableStreamController=n;let v=s();L(g(v),()=>{n._started=!0,Nt(n)},E=>{ze(n,E)})}function Vu(e,n,s,l){let c=Object.create(bt.prototype),p=()=>{},y=()=>g(void 0),v=()=>g(void 0);n.start!==void 0&&(p=()=>n.start(c)),n.pull!==void 0&&(y=()=>n.pull(c)),n.cancel!==void 0&&(v=E=>n.cancel(E)),$o(e,c,p,y,v,s,l)}function Or(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function Qu(e,n){return Xe(e._readableStreamController)?Gu(e):Yu(e)}function Yu(e,n){let s=ct(e),l=!1,c=!1,p=!1,y=!1,v,E,C,q,B,z=b(Y=>{B=Y});function _e(){return l?(c=!0,g(void 0)):(l=!0,Dt(s,{_chunkSteps:X=>{O(()=>{c=!1;let le=X,Be=X;p||Cr(C._readableStreamController,le),y||Cr(q._readableStreamController,Be),l=!1,c&&_e()})},_closeSteps:()=>{l=!1,p||jt(C._readableStreamController),y||jt(q._readableStreamController),(!p||!y)&&B(void 0)},_errorSteps:()=>{l=!1}}),g(void 0))}function yt(Y){if(p=!0,v=Y,y){let X=It([v,E]),le=be(e,X);B(le)}return z}function Ve(Y){if(y=!0,E=Y,p){let X=It([v,E]),le=be(e,X);B(le)}return z}function qe(){}return C=Gn(qe,_e,yt),q=Gn(qe,_e,Ve),D(s._closedPromise,Y=>{ze(C._readableStreamController,Y),ze(q._readableStreamController,Y),(!p||!y)&&B(void 0)}),[C,q]}function Gu(e){let n=ct(e),s=!1,l=!1,c=!1,p=!1,y=!1,v,E,C,q,B,z=b(T=>{B=T});function _e(T){D(T._closedPromise,A=>{T===n&&(pe(C._readableStreamController,A),pe(q._readableStreamController,A),(!p||!y)&&B(void 0))})}function yt(){et(n)&&(Ae(n),n=ct(e),_e(n)),Dt(n,{_chunkSteps:A=>{O(()=>{l=!1,c=!1;let F=A,oe=A;if(!p&&!y)try{oe=ao(A)}catch(gt){pe(C._readableStreamController,gt),pe(q._readableStreamController,gt),B(be(e,gt));return}p||hr(C._readableStreamController,F),y||hr(q._readableStreamController,oe),s=!1,l?qe():c&&Y()})},_closeSteps:()=>{s=!1,p||Mt(C._readableStreamController),y||Mt(q._readableStreamController),C._readableStreamController._pendingPullIntos.length>0&&mr(C._readableStreamController,0),q._readableStreamController._pendingPullIntos.length>0&&mr(q._readableStreamController,0),(!p||!y)&&B(void 0)},_errorSteps:()=>{s=!1}})}function Ve(T,A){Ue(n)&&(Ae(n),n=yo(e),_e(n));let F=A?q:C,oe=A?C:q;So(n,T,{_chunkSteps:wt=>{O(()=>{l=!1,c=!1;let St=A?y:p;if(A?p:y)St||pr(F._readableStreamController,wt);else{let ns;try{ns=ao(wt)}catch(Kn){pe(F._readableStreamController,Kn),pe(oe._readableStreamController,Kn),B(be(e,Kn));return}St||pr(F._readableStreamController,wt),hr(oe._readableStreamController,ns)}s=!1,l?qe():c&&Y()})},_closeSteps:wt=>{s=!1;let St=A?y:p,Fr=A?p:y;St||Mt(F._readableStreamController),Fr||Mt(oe._readableStreamController),wt!==void 0&&(St||pr(F._readableStreamController,wt),!Fr&&oe._readableStreamController._pendingPullIntos.length>0&&mr(oe._readableStreamController,0)),(!St||!Fr)&&B(void 0)},_errorSteps:()=>{s=!1}})}function qe(){if(s)return l=!0,g(void 0);s=!0;let T=In(C._readableStreamController);return T===null?yt():Ve(T._view,!1),g(void 0)}function Y(){if(s)return c=!0,g(void 0);s=!0;let T=In(q._readableStreamController);return T===null?yt():Ve(T._view,!0),g(void 0)}function X(T){if(p=!0,v=T,y){let A=It([v,E]),F=be(e,A);B(F)}return z}function le(T){if(y=!0,E=T,p){let A=It([v,E]),F=be(e,A);B(F)}return z}function Be(){}return C=No(Be,qe,X),q=No(Be,Y,le),_e(n),[C,q]}function Ju(e,n){Ce(e,n);let s=e,l=s==null?void 0:s.autoAllocateChunkSize,c=s==null?void 0:s.cancel,p=s==null?void 0:s.pull,y=s==null?void 0:s.start,v=s==null?void 0:s.type;return{autoAllocateChunkSize:l===void 0?void 0:Ji(l,`${n} has member 'autoAllocateChunkSize' that`),cancel:c===void 0?void 0:Ku(c,s,`${n} has member 'cancel' that`),pull:p===void 0?void 0:Xu(p,s,`${n} has member 'pull' that`),start:y===void 0?void 0:Zu(y,s,`${n} has member 'start' that`),type:v===void 0?void 0:el(v,`${n} has member 'type' that`)}}function Ku(e,n,s){return me(e,s),l=>W(e,n,[l])}function Xu(e,n,s){return me(e,s),l=>W(e,n,[l])}function Zu(e,n,s){return me(e,s),l=>$(e,n,[l])}function el(e,n){if(e=`${e}`,e!=="bytes")throw new TypeError(`${n} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function tl(e,n){Ce(e,n);let s=e==null?void 0:e.mode;return{mode:s===void 0?void 0:rl(s,`${n} has member 'mode' that`)}}function rl(e,n){if(e=`${e}`,e!=="byob")throw new TypeError(`${n} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function nl(e,n){Ce(e,n);let s=e==null?void 0:e.preventCancel;return{preventCancel:Boolean(s)}}function zo(e,n){Ce(e,n);let s=e==null?void 0:e.preventAbort,l=e==null?void 0:e.preventCancel,c=e==null?void 0:e.preventClose,p=e==null?void 0:e.signal;return p!==void 0&&il(p,`${n} has member 'signal' that`),{preventAbort:Boolean(s),preventCancel:Boolean(l),preventClose:Boolean(c),signal:p}}function il(e,n){if(!bu(e))throw new TypeError(`${n} is not an AbortSignal.`)}function ol(e,n){Ce(e,n);let s=e==null?void 0:e.readable;En(s,"readable","ReadableWritablePair"),An(s,`${n} has member 'readable' that`);let l=e==null?void 0:e.writable;return En(l,"writable","ReadableWritablePair"),vo(l,`${n} has member 'writable' that`),{readable:s,writable:l}}class Ne{constructor(n={},s={}){n===void 0?n=null:Yi(n,"First parameter");let l=yr(s,"Second parameter"),c=Ju(n,"First parameter");if(Jn(this),c.type==="bytes"){if(l.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let p=xt(l,0);au(this,c,p)}else{let p=_r(l),y=xt(l,1);Vu(this,c,y,p)}}get locked(){if(!je(this))throw nt("locked");return He(this)}cancel(n=void 0){return je(this)?He(this)?w(new TypeError("Cannot cancel a stream that already has a reader")):be(this,n):w(nt("cancel"))}getReader(n=void 0){if(!je(this))throw nt("getReader");return tl(n,"First parameter").mode===void 0?ct(this):yo(this)}pipeThrough(n,s={}){if(!je(this))throw nt("pipeThrough");Oe(n,1,"pipeThrough");let l=ol(n,"First parameter"),c=zo(s,"Second parameter");if(He(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(mt(l.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let p=xo(this,l.writable,c.preventClose,c.preventAbort,c.preventCancel,c.signal);return K(p),l.readable}pipeTo(n,s={}){if(!je(this))return w(nt("pipeTo"));if(n===void 0)return w("Parameter 1 is required in 'pipeTo'.");if(!ht(n))return w(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let l;try{l=zo(s,"Second parameter")}catch(c){return w(c)}return He(this)?w(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):mt(n)?w(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):xo(this,n,l.preventClose,l.preventAbort,l.preventCancel,l.signal)}tee(){if(!je(this))throw nt("tee");let n=Qu(this);return It(n)}values(n=void 0){if(!je(this))throw nt("values");let s=nl(n,"First parameter");return eu(this,s.preventCancel)}}Object.defineProperties(Ne.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Ne.prototype,t.toStringTag,{value:"ReadableStream",configurable:!0}),typeof t.asyncIterator=="symbol"&&Object.defineProperty(Ne.prototype,t.asyncIterator,{value:Ne.prototype.values,writable:!0,configurable:!0});function Gn(e,n,s,l=1,c=()=>1){let p=Object.create(Ne.prototype);Jn(p);let y=Object.create(bt.prototype);return $o(p,y,e,n,s,l,c),p}function No(e,n,s){let l=Object.create(Ne.prototype);Jn(l);let c=Object.create(dt.prototype);return _o(l,c,e,n,s,0,void 0),l}function Jn(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function je(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof Ne}function He(e){return e._reader!==void 0}function be(e,n){if(e._disturbed=!0,e._state==="closed")return g(void 0);if(e._state==="errored")return w(e._storedError);Ht(e);let s=e._reader;s!==void 0&&et(s)&&(s._readIntoRequests.forEach(c=>{c._closeSteps(void 0)}),s._readIntoRequests=new ie);let l=e._readableStreamController[Rn](n);return U(l,i)}function Ht(e){e._state="closed";let n=e._reader;n!==void 0&&(ji(n),Ue(n)&&(n._readRequests.forEach(s=>{s._closeSteps()}),n._readRequests=new ie))}function jo(e,n){e._state="errored",e._storedError=n;let s=e._reader;s!==void 0&&(vn(s,n),Ue(s)?(s._readRequests.forEach(l=>{l._errorSteps(n)}),s._readRequests=new ie):(s._readIntoRequests.forEach(l=>{l._errorSteps(n)}),s._readIntoRequests=new ie))}function nt(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function Ho(e,n){Ce(e,n);let s=e==null?void 0:e.highWaterMark;return En(s,"highWaterMark","QueuingStrategyInit"),{highWaterMark:Pn(s)}}let Vo=e=>e.byteLength;try{Object.defineProperty(Vo,"name",{value:"size",configurable:!0})}catch{}class qr{constructor(n){Oe(n,1,"ByteLengthQueuingStrategy"),n=Ho(n,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=n.highWaterMark}get highWaterMark(){if(!Yo(this))throw Qo("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!Yo(this))throw Qo("size");return Vo}}Object.defineProperties(qr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(qr.prototype,t.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function Qo(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function Yo(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof qr}let Go=()=>1;try{Object.defineProperty(Go,"name",{value:"size",configurable:!0})}catch{}class Br{constructor(n){Oe(n,1,"CountQueuingStrategy"),n=Ho(n,"First parameter"),this._countQueuingStrategyHighWaterMark=n.highWaterMark}get highWaterMark(){if(!Ko(this))throw Jo("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!Ko(this))throw Jo("size");return Go}}Object.defineProperties(Br.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Br.prototype,t.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function Jo(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function Ko(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof Br}function sl(e,n){Ce(e,n);let s=e==null?void 0:e.flush,l=e==null?void 0:e.readableType,c=e==null?void 0:e.start,p=e==null?void 0:e.transform,y=e==null?void 0:e.writableType;return{flush:s===void 0?void 0:al(s,e,`${n} has member 'flush' that`),readableType:l,start:c===void 0?void 0:ul(c,e,`${n} has member 'start' that`),transform:p===void 0?void 0:ll(p,e,`${n} has member 'transform' that`),writableType:y}}function al(e,n,s){return me(e,s),l=>W(e,n,[l])}function ul(e,n,s){return me(e,s),l=>$(e,n,[l])}function ll(e,n,s){return me(e,s),(l,c)=>W(e,n,[l,c])}class kr{constructor(n={},s={},l={}){n===void 0&&(n=null);let c=yr(s,"Second parameter"),p=yr(l,"Third parameter"),y=sl(n,"First parameter");if(y.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(y.writableType!==void 0)throw new RangeError("Invalid writableType specified");let v=xt(p,0),E=_r(p),C=xt(c,1),q=_r(c),B,z=b(_e=>{B=_e});fl(this,z,C,q,v,E),dl(this,y),y.start!==void 0?B(y.start(this._transformStreamController)):B(void 0)}get readable(){if(!Xo(this))throw rs("readable");return this._readable}get writable(){if(!Xo(this))throw rs("writable");return this._writable}}Object.defineProperties(kr.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(kr.prototype,t.toStringTag,{value:"TransformStream",configurable:!0});function fl(e,n,s,l,c,p){function y(){return n}function v(z){return pl(e,z)}function E(z){return bl(e,z)}function C(){return _l(e)}e._writable=gu(y,v,C,E,s,l);function q(){return yl(e)}function B(z){return Ir(e,z),g(void 0)}e._readable=Gn(y,q,B,c,p),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,Wr(e,!0),e._transformStreamController=void 0}function Xo(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof kr}function Dr(e,n){ze(e._readable._readableStreamController,n),Ir(e,n)}function Ir(e,n){Zo(e._transformStreamController),zn(e._writable._writableStreamController,n),e._backpressure&&Wr(e,!1)}function Wr(e,n){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=b(s=>{e._backpressureChangePromise_resolve=s}),e._backpressure=n}class Vt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Mr(this))throw Lr("desiredSize");let n=this._controlledTransformStream._readable._readableStreamController;return Yn(n)}enqueue(n=void 0){if(!Mr(this))throw Lr("enqueue");es(this,n)}error(n=void 0){if(!Mr(this))throw Lr("error");hl(this,n)}terminate(){if(!Mr(this))throw Lr("terminate");ml(this)}}Object.defineProperties(Vt.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Vt.prototype,t.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function Mr(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof Vt}function cl(e,n,s,l){n._controlledTransformStream=e,e._transformStreamController=n,n._transformAlgorithm=s,n._flushAlgorithm=l}function dl(e,n){let s=Object.create(Vt.prototype),l=p=>{try{return es(s,p),g(void 0)}catch(y){return w(y)}},c=()=>g(void 0);n.transform!==void 0&&(l=p=>n.transform(p,s)),n.flush!==void 0&&(c=()=>n.flush(s)),cl(e,s,l,c)}function Zo(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function es(e,n){let s=e._controlledTransformStream,l=s._readable._readableStreamController;if(!_t(l))throw new TypeError("Readable side is not in a state that permits enqueue");try{Cr(l,n)}catch(p){throw Ir(s,p),s._readable._storedError}Hu(l)!==s._backpressure&&Wr(s,!0)}function hl(e,n){Dr(e._controlledTransformStream,n)}function ts(e,n){let s=e._transformAlgorithm(n);return U(s,void 0,l=>{throw Dr(e._controlledTransformStream,l),l})}function ml(e){let n=e._controlledTransformStream,s=n._readable._readableStreamController;jt(s);let l=new TypeError("TransformStream terminated");Ir(n,l)}function pl(e,n){let s=e._transformStreamController;if(e._backpressure){let l=e._backpressureChangePromise;return U(l,()=>{let c=e._writable;if(c._state==="erroring")throw c._storedError;return ts(s,n)})}return ts(s,n)}function bl(e,n){return Dr(e,n),g(void 0)}function _l(e){let n=e._readable,s=e._transformStreamController,l=s._flushAlgorithm();return Zo(s),U(l,()=>{if(n._state==="errored")throw n._storedError;jt(n._readableStreamController)},c=>{throw Dr(e,c),n._storedError})}function yl(e){return Wr(e,!1),e._backpressureChangePromise}function Lr(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function rs(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}r.ByteLengthQueuingStrategy=qr,r.CountQueuingStrategy=Br,r.ReadableByteStreamController=dt,r.ReadableStream=Ne,r.ReadableStreamBYOBReader=Ft,r.ReadableStreamBYOBRequest=Wt,r.ReadableStreamDefaultController=bt,r.ReadableStreamDefaultReader=kt,r.TransformStream=kr,r.TransformStreamDefaultController=Vt,r.WritableStream=Ut,r.WritableStreamDefaultController=pt,r.WritableStreamDefaultWriter=$t,Object.defineProperty(r,"__esModule",{value:!0})})});var ha=I(()=>{if(!globalThis.ReadableStream)try{let r=require("node:process"),{emitWarning:t}=r;try{r.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),r.emitWarning=t}catch(i){throw r.emitWarning=t,i}}catch{Object.assign(globalThis,da())}try{let{Blob:r}=require("buffer");r&&!r.prototype.stream&&(r.prototype.stream=function(i){let o=0,a=this;return new ReadableStream({type:"bytes",async pull(u){let m=await a.slice(o,Math.min(a.size,o+65536)).arrayBuffer();o+=m.byteLength,u.enqueue(new Uint8Array(m)),o===a.size&&u.close()}})})}catch{}});async function*Bi(r,t=!0){for(let i of r)if("stream"in i)yield*i.stream();else if(ArrayBuffer.isView(i))if(t){let o=i.byteOffset,a=i.byteOffset+i.byteLength;for(;o!==a;){let u=Math.min(a-o,ma),f=i.buffer.slice(o,o+u);o+=f.byteLength,yield new Uint8Array(f)}}else yield i;else{let o=0,a=i;for(;o!==a.size;){let f=await a.slice(o,Math.min(a.size,o+ma)).arrayBuffer();o+=f.byteLength,yield new Uint8Array(f)}}}var hh,ma,pa,Zc,We,Xt=Qt(()=>{hh=ye(ha(),1);ma=65536;pa=class ki{#e=[];#t="";#r=0;#n="transparent";constructor(t=[],i={}){if(typeof t!="object"||t===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof t[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof i!="object"&&typeof i!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");i===null&&(i={});let o=new TextEncoder;for(let u of t){let f;ArrayBuffer.isView(u)?f=new Uint8Array(u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength)):u instanceof ArrayBuffer?f=new Uint8Array(u.slice(0)):u instanceof ki?f=u:f=o.encode(`${u}`),this.#r+=ArrayBuffer.isView(f)?f.byteLength:f.size,this.#e.push(f)}this.#n=`${i.endings===void 0?"transparent":i.endings}`;let a=i.type===void 0?"":String(i.type);this.#t=/^[\x20-\x7E]*$/.test(a)?a:""}get size(){return this.#r}get type(){return this.#t}async text(){let t=new TextDecoder,i="";for await(let o of Bi(this.#e,!1))i+=t.decode(o,{stream:!0});return i+=t.decode(),i}async arrayBuffer(){let t=new Uint8Array(this.size),i=0;for await(let o of Bi(this.#e,!1))t.set(o,i),i+=o.length;return t.buffer}stream(){let t=Bi(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(i){let o=await t.next();o.done?i.close():i.enqueue(o.value)},async cancel(){await t.return()}})}slice(t=0,i=this.size,o=""){let{size:a}=this,u=t<0?Math.max(a+t,0):Math.min(t,a),f=i<0?Math.max(a+i,0):Math.min(i,a),m=Math.max(f-u,0),d=this.#e,h=[],_=0;for(let g of d){if(_>=m)break;let w=ArrayBuffer.isView(g)?g.byteLength:g.size;if(u&&w<=u)u-=w,f-=w;else{let S;ArrayBuffer.isView(g)?(S=g.subarray(u,Math.min(w,f)),_+=S.byteLength):(S=g.slice(u,Math.min(w,f)),_+=S.size),f-=w,h.push(S),u=0}}let b=new ki([],{type:String(o).toLowerCase()});return b.#r=m,b.#e=h,b}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](t){return t&&typeof t=="object"&&typeof t.constructor=="function"&&(typeof t.stream=="function"||typeof t.arrayBuffer=="function")&&/^(Blob|File)$/.test(t[Symbol.toStringTag])}};Object.defineProperties(pa.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});Zc=pa,We=Zc});var ed,td,Ct,Di=Qt(()=>{Xt();ed=class extends We{#e=0;#t="";constructor(t,i,o={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(t,o),o===null&&(o={});let a=o.lastModified===void 0?Date.now():Number(o.lastModified);Number.isNaN(a)||(this.#e=a),this.#t=String(i)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](t){return!!t&&t instanceof We&&/^(File)$/.test(t[Symbol.toStringTag])}},td=ed,Ct=td});function ya(r,t=We){var i=`${ba()}${ba()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),o=[],a=`--${i}\r
Content-Disposition: form-data; name="`;return r.forEach((u,f)=>typeof u=="string"?o.push(a+Ii(f)+`"\r
\r
${u.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):o.push(a+Ii(f)+`"; filename="${Ii(u.name,1)}"\r
Content-Type: ${u.type||"application/octet-stream"}\r
\r
`,u,`\r
`)),o.push(`--${i}--`),new t(o,{type:"multipart/form-data; boundary="+i})}var Zt,rd,nd,ba,id,_a,Ii,st,at,cn=Qt(()=>{Xt();Di();({toStringTag:Zt,iterator:rd,hasInstance:nd}=Symbol),ba=Math.random,id="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),_a=(r,t,i)=>(r+="",/^(Blob|File)$/.test(t&&t[Zt])?[(i=i!==void 0?i+"":t[Zt]=="File"?t.name:"blob",r),t.name!==i||t[Zt]=="blob"?new Ct([t],i,t):t]:[r,t+""]),Ii=(r,t)=>(t?r:r.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),st=(r,t,i)=>{if(t.length<i)throw new TypeError(`Failed to execute '${r}' on 'FormData': ${i} arguments required, but only ${t.length} present.`)},at=class{#e=[];constructor(...t){if(t.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[Zt](){return"FormData"}[rd](){return this.entries()}static[nd](t){return t&&typeof t=="object"&&t[Zt]==="FormData"&&!id.some(i=>typeof t[i]!="function")}append(...t){st("append",arguments,2),this.#e.push(_a(...t))}delete(t){st("delete",arguments,1),t+="",this.#e=this.#e.filter(([i])=>i!==t)}get(t){st("get",arguments,1),t+="";for(var i=this.#e,o=i.length,a=0;a<o;a++)if(i[a][0]===t)return i[a][1];return null}getAll(t,i){return st("getAll",arguments,1),i=[],t+="",this.#e.forEach(o=>o[0]===t&&i.push(o[1])),i}has(t){return st("has",arguments,1),t+="",this.#e.some(i=>i[0]===t)}forEach(t,i){st("forEach",arguments,1);for(var[o,a]of this)t.call(i,a,o,this)}set(...t){st("set",arguments,2);var i=[],o=!0;t=_a(...t),this.#e.forEach(a=>{a[0]===t[0]?o&&(o=!i.push(t)):i.push(a)}),o&&i.push(t),this.#e=i}*entries(){yield*this.#e}*keys(){for(var[t]of this)yield t}*values(){for(var[,t]of this)yield t}}});var Ra=I((Ph,va)=>{if(!globalThis.DOMException)try{let{MessageChannel:r}=require("worker_threads"),t=new r().port1,i=new ArrayBuffer;t.postMessage(i,[i,i])}catch(r){r.constructor.name==="DOMException"&&(globalThis.DOMException=r.constructor)}va.exports=globalThis.DOMException});var tr,Ta,od,hn,Mi=Qt(()=>{tr=require("node:fs"),Ta=ye(Ra(),1);Di();Xt();({stat:od}=tr.promises),hn=class{#e;#t;constructor(t){this.#e=t.path,this.#t=t.start,this.size=t.size,this.lastModified=t.lastModified}slice(t,i){return new hn({path:this.#e,lastModified:this.lastModified,size:i-t,start:this.#t+t})}async*stream(){let{mtimeMs:t}=await od(this.#e);if(t>this.lastModified)throw new Ta.default("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*(0,tr.createReadStream)(this.#e,{start:this.#t,end:this.#t+this.size-1})}get[Symbol.toStringTag](){return"Blob"}}});var Pa={};Tl(Pa,{toFormData:()=>dd});function cd(r){let t=r.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!t)return;let i=t[2]||t[3]||"",o=i.slice(i.lastIndexOf("\\")+1);return o=o.replace(/%22/g,'"'),o=o.replace(/&#(\d{4});/g,(a,u)=>String.fromCharCode(u)),o}async function dd(r,t){if(!/multipart/i.test(t))throw new TypeError("Failed to fetch");let i=t.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!i)throw new TypeError("no or bad content-type header, no multipart boundary");let o=new Li(i[1]||i[2]),a,u,f,m,d,h,_=[],b=new at,g=D=>{f+=k.decode(D,{stream:!0})},w=D=>{_.push(D)},S=()=>{let D=new Ct(_,h,{type:d});b.append(m,D)},L=()=>{b.append(m,f)},k=new TextDecoder("utf-8");k.decode(),o.onPartBegin=function(){o.onPartData=g,o.onPartEnd=L,a="",u="",f="",m="",d="",h=null,_.length=0},o.onHeaderField=function(D){a+=k.decode(D,{stream:!0})},o.onHeaderValue=function(D){u+=k.decode(D,{stream:!0})},o.onHeaderEnd=function(){if(u+=k.decode(),a=a.toLowerCase(),a==="content-disposition"){let D=u.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);D&&(m=D[2]||D[3]||""),h=cd(u),h&&(o.onPartData=w,o.onPartEnd=S)}else a==="content-type"&&(d=u);u="",a=""};for await(let D of r)o.write(D);return o.end(),b}var Ee,x,Ea,Ke,mn,pn,sd,rr,ad,ud,ld,fd,ut,Li,Aa=Qt(()=>{Mi();cn();Ee=0,x={START_BOUNDARY:Ee++,HEADER_FIELD_START:Ee++,HEADER_FIELD:Ee++,HEADER_VALUE_START:Ee++,HEADER_VALUE:Ee++,HEADER_VALUE_ALMOST_DONE:Ee++,HEADERS_ALMOST_DONE:Ee++,PART_DATA_START:Ee++,PART_DATA:Ee++,END:Ee++},Ea=1,Ke={PART_BOUNDARY:Ea,LAST_BOUNDARY:Ea*=2},mn=10,pn=13,sd=32,rr=45,ad=58,ud=97,ld=122,fd=r=>r|32,ut=()=>{},Li=class{constructor(t){this.index=0,this.flags=0,this.onHeaderEnd=ut,this.onHeaderField=ut,this.onHeadersEnd=ut,this.onHeaderValue=ut,this.onPartBegin=ut,this.onPartData=ut,this.onPartEnd=ut,this.boundaryChars={},t=`\r
--`+t;let i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o),this.boundaryChars[i[o]]=!0;this.boundary=i,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=x.START_BOUNDARY}write(t){let i=0,o=t.length,a=this.index,{lookbehind:u,boundary:f,boundaryChars:m,index:d,state:h,flags:_}=this,b=this.boundary.length,g=b-1,w=t.length,S,L,k=O=>{this[O+"Mark"]=i},D=O=>{delete this[O+"Mark"]},U=(O,$,W,xe)=>{($===void 0||$!==W)&&this[O](xe&&xe.subarray($,W))},K=(O,$)=>{let W=O+"Mark";W in this&&($?(U(O,this[W],i,t),delete this[W]):(U(O,this[W],t.length,t),this[W]=0))};for(i=0;i<o;i++)switch(S=t[i],h){case x.START_BOUNDARY:if(d===f.length-2){if(S===rr)_|=Ke.LAST_BOUNDARY;else if(S!==pn)return;d++;break}else if(d-1===f.length-2){if(_&Ke.LAST_BOUNDARY&&S===rr)h=x.END,_=0;else if(!(_&Ke.LAST_BOUNDARY)&&S===mn)d=0,U("onPartBegin"),h=x.HEADER_FIELD_START;else return;break}S!==f[d+2]&&(d=-2),S===f[d+2]&&d++;break;case x.HEADER_FIELD_START:h=x.HEADER_FIELD,k("onHeaderField"),d=0;case x.HEADER_FIELD:if(S===pn){D("onHeaderField"),h=x.HEADERS_ALMOST_DONE;break}if(d++,S===rr)break;if(S===ad){if(d===1)return;K("onHeaderField",!0),h=x.HEADER_VALUE_START;break}if(L=fd(S),L<ud||L>ld)return;break;case x.HEADER_VALUE_START:if(S===sd)break;k("onHeaderValue"),h=x.HEADER_VALUE;case x.HEADER_VALUE:S===pn&&(K("onHeaderValue",!0),U("onHeaderEnd"),h=x.HEADER_VALUE_ALMOST_DONE);break;case x.HEADER_VALUE_ALMOST_DONE:if(S!==mn)return;h=x.HEADER_FIELD_START;break;case x.HEADERS_ALMOST_DONE:if(S!==mn)return;U("onHeadersEnd"),h=x.PART_DATA_START;break;case x.PART_DATA_START:h=x.PART_DATA,k("onPartData");case x.PART_DATA:if(a=d,d===0){for(i+=g;i<w&&!(t[i]in m);)i+=b;i-=g,S=t[i]}if(d<f.length)f[d]===S?(d===0&&K("onPartData",!0),d++):d=0;else if(d===f.length)d++,S===pn?_|=Ke.PART_BOUNDARY:S===rr?_|=Ke.LAST_BOUNDARY:d=0;else if(d-1===f.length)if(_&Ke.PART_BOUNDARY){if(d=0,S===mn){_&=~Ke.PART_BOUNDARY,U("onPartEnd"),U("onPartBegin"),h=x.HEADER_FIELD_START;break}}else _&Ke.LAST_BOUNDARY&&S===rr?(U("onPartEnd"),h=x.END,_=0):d=0;if(d>0)u[d-1]=S;else if(a>0){let O=new Uint8Array(u.buffer,u.byteOffset,u.byteLength);U("onPartData",0,a,O),a=0,k("onPartData"),i--}break;case x.END:break;default:throw new Error(`Unexpected state entered: ${h}`)}K("onHeaderField"),K("onHeaderValue"),K("onPartData"),this.index=d,this.state=h,this.flags=_}end(){if(this.state===x.HEADER_FIELD_START&&this.index===0||this.state===x.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==x.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var Bt=ye(sn());var ja=ye(sn());var Kc=ye(ea(),1);var un=class extends Error{constructor(t){super(t),this.name="TimeoutError"}};var Vc;Vc=new WeakMap;var Ie=function(r,t,i,o,a){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?r!==t||!a:!t.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?a.call(r,i):a?a.value=i:t.set(r,i),i},P=function(r,t,i,o){if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?r!==t||!o:!t.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?o:i==="a"?o.call(r):o?o.value:t.get(r)},se,Ri,Ti,Kt,ta,Ei,Pi,Te,ln,Ai,Qc,Je,ra,na,Yc,ia,oa,Gc,sa,aa,ua,Ci,Oi,qi,la,Jc,uh=new un;Ri=new WeakMap,Ti=new WeakMap,Kt=new WeakMap,ta=new WeakMap,Ei=new WeakMap,Pi=new WeakMap,Te=new WeakMap,ln=new WeakMap,Ai=new WeakMap,Qc=new WeakMap,Je=new WeakMap,ra=new WeakMap,na=new WeakMap,Yc=new WeakMap,se=new WeakSet,ia=function(){return P(this,Ti,"f")||P(this,Kt,"f")<P(this,ta,"f")},oa=function(){return P(this,Je,"f")<P(this,ra,"f")},Gc=function(){var t;Ie(this,Je,(t=P(this,Je,"f"),t--,t),"f"),P(this,se,"m",Ci).call(this),this.emit("next")},sa=function(){this.emit("empty"),P(this,Je,"f")===0&&this.emit("idle")},aa=function(){P(this,se,"m",qi).call(this),P(this,se,"m",Oi).call(this),Ie(this,ln,void 0,"f")},ua=function(){let t=Date.now();if(P(this,Te,"f")===void 0){let i=P(this,Pi,"f")-t;if(i<0)Ie(this,Kt,P(this,Ri,"f")?P(this,Je,"f"):0,"f");else return P(this,ln,"f")===void 0&&Ie(this,ln,setTimeout(()=>{P(this,se,"m",aa).call(this)},i),"f"),!0}return!1},Ci=function(){if(P(this,Ai,"f").size===0)return P(this,Te,"f")&&clearInterval(P(this,Te,"f")),Ie(this,Te,void 0,"f"),P(this,se,"m",sa).call(this),!1;if(!P(this,na,"f")){let t=!P(this,se,"a",ua);if(P(this,se,"a",ia)&&P(this,se,"a",oa)){let i=P(this,Ai,"f").dequeue();return i?(this.emit("active"),i(),t&&P(this,se,"m",Oi).call(this),!0):!1}}return!1},Oi=function(){P(this,Ti,"f")||P(this,Te,"f")!==void 0||(Ie(this,Te,setInterval(()=>{P(this,se,"m",qi).call(this)},P(this,Ei,"f")),"f"),Ie(this,Pi,Date.now()+P(this,Ei,"f"),"f"))},qi=function(){P(this,Kt,"f")===0&&P(this,Je,"f")===0&&P(this,Te,"f")&&(clearInterval(P(this,Te,"f")),Ie(this,Te,void 0,"f")),Ie(this,Kt,P(this,Ri,"f")?P(this,Je,"f"):0,"f"),P(this,se,"m",la).call(this)},la=function(){for(;P(this,se,"m",Ci).call(this););},Jc=async function(t,i){return new Promise(o=>{let a=()=>{i&&!i()||(this.off(t,a),o())};this.on(t,a)})};var za=ye(require("node:http"),1),Na=ye(require("node:https"),1),lt=ye(require("node:zlib"),1),ue=ye(require("node:stream"),1),or=require("node:buffer");function Xc(r){if(!/^data:/i.test(r))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');r=r.replace(/\r?\n/g,"");let t=r.indexOf(",");if(t===-1||t<=4)throw new TypeError("malformed data: URI");let i=r.substring(5,t).split(";"),o="",a=!1,u=i[0]||"text/plain",f=u;for(let _=1;_<i.length;_++)i[_]==="base64"?a=!0:(f+=`;${i[_]}`,i[_].indexOf("charset=")===0&&(o=i[_].substring(8)));!i[0]&&!o.length&&(f+=";charset=US-ASCII",o="US-ASCII");let m=a?"base64":"ascii",d=unescape(r.substring(t+1)),h=Buffer.from(d,m);return h.type=u,h.typeFull=f,h.charset=o,h}var fa=Xc;var he=ye(require("node:stream"),1),Le=require("node:util"),ae=require("node:buffer");Xt();cn();var Me=class extends Error{constructor(t,i){super(t),Error.captureStackTrace(this,this.constructor),this.type=i}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var te=class extends Me{constructor(t,i,o){super(t,i),o&&(this.code=this.errno=o.code,this.erroredSysCall=o.syscall)}};var dn=Symbol.toStringTag,Wi=r=>typeof r=="object"&&typeof r.append=="function"&&typeof r.delete=="function"&&typeof r.get=="function"&&typeof r.getAll=="function"&&typeof r.has=="function"&&typeof r.set=="function"&&typeof r.sort=="function"&&r[dn]==="URLSearchParams",er=r=>r&&typeof r=="object"&&typeof r.arrayBuffer=="function"&&typeof r.type=="string"&&typeof r.stream=="function"&&typeof r.constructor=="function"&&/^(Blob|File)$/.test(r[dn]),ga=r=>typeof r=="object"&&(r[dn]==="AbortSignal"||r[dn]==="EventTarget"),wa=(r,t)=>{let i=new URL(t).hostname,o=new URL(r).hostname;return i===o||i.endsWith(`.${o}`)},Sa=(r,t)=>{let i=new URL(t).protocol,o=new URL(r).protocol;return i===o};var hd=(0,Le.promisify)(he.default.pipeline),re=Symbol("Body internals"),Pe=class{constructor(t,{size:i=0}={}){let o=null;t===null?t=null:Wi(t)?t=ae.Buffer.from(t.toString()):er(t)||ae.Buffer.isBuffer(t)||(Le.types.isAnyArrayBuffer(t)?t=ae.Buffer.from(t):ArrayBuffer.isView(t)?t=ae.Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof he.default||(t instanceof at?(t=ya(t),o=t.type.split("=")[1]):t=ae.Buffer.from(String(t))));let a=t;ae.Buffer.isBuffer(t)?a=he.default.Readable.from(t):er(t)&&(a=he.default.Readable.from(t.stream())),this[re]={body:t,stream:a,boundary:o,disturbed:!1,error:null},this.size=i,t instanceof he.default&&t.on("error",u=>{let f=u instanceof Me?u:new te(`Invalid response body while trying to fetch ${this.url}: ${u.message}`,"system",u);this[re].error=f})}get body(){return this[re].stream}get bodyUsed(){return this[re].disturbed}async arrayBuffer(){let{buffer:t,byteOffset:i,byteLength:o}=await Fi(this);return t.slice(i,i+o)}async formData(){let t=this.headers.get("content-type");if(t.startsWith("application/x-www-form-urlencoded")){let o=new at,a=new URLSearchParams(await this.text());for(let[u,f]of a)o.append(u,f);return o}let{toFormData:i}=await Promise.resolve().then(()=>(Aa(),Pa));return i(this.body,t)}async blob(){let t=this.headers&&this.headers.get("content-type")||this[re].body&&this[re].body.type||"",i=await this.arrayBuffer();return new We([i],{type:t})}async json(){let t=await this.text();return JSON.parse(t)}async text(){let t=await Fi(this);return new TextDecoder().decode(t)}buffer(){return Fi(this)}};Pe.prototype.buffer=(0,Le.deprecate)(Pe.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(Pe.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,Le.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function Fi(r){if(r[re].disturbed)throw new TypeError(`body used already for: ${r.url}`);if(r[re].disturbed=!0,r[re].error)throw r[re].error;let{body:t}=r;if(t===null)return ae.Buffer.alloc(0);if(!(t instanceof he.default))return ae.Buffer.alloc(0);let i=[],o=0;try{for await(let a of t){if(r.size>0&&o+a.length>r.size){let u=new te(`content size at ${r.url} over limit: ${r.size}`,"max-size");throw t.destroy(u),u}o+=a.length,i.push(a)}}catch(a){throw a instanceof Me?a:new te(`Invalid response body while trying to fetch ${r.url}: ${a.message}`,"system",a)}if(t.readableEnded===!0||t._readableState.ended===!0)try{return i.every(a=>typeof a=="string")?ae.Buffer.from(i.join("")):ae.Buffer.concat(i,o)}catch(a){throw new te(`Could not create Buffer from response body for ${r.url}: ${a.message}`,"system",a)}else throw new te(`Premature close of server response while trying to fetch ${r.url}`)}var Ot=(r,t)=>{let i,o,{body:a}=r[re];if(r.bodyUsed)throw new Error("cannot clone body after it is used");return a instanceof he.default&&typeof a.getBoundary!="function"&&(i=new he.PassThrough({highWaterMark:t}),o=new he.PassThrough({highWaterMark:t}),a.pipe(i),a.pipe(o),r[re].stream=i,a=o),a},md=(0,Le.deprecate)(r=>r.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),bn=(r,t)=>r===null?null:typeof r=="string"?"text/plain;charset=UTF-8":Wi(r)?"application/x-www-form-urlencoded;charset=UTF-8":er(r)?r.type||null:ae.Buffer.isBuffer(r)||Le.types.isAnyArrayBuffer(r)||ArrayBuffer.isView(r)?null:r instanceof at?`multipart/form-data; boundary=${t[re].boundary}`:r&&typeof r.getBoundary=="function"?`multipart/form-data;boundary=${md(r)}`:r instanceof he.default?null:"text/plain;charset=UTF-8",Ca=r=>{let{body:t}=r[re];return t===null?0:er(t)?t.size:ae.Buffer.isBuffer(t)?t.length:t&&typeof t.getLengthSync=="function"&&t.hasKnownLength&&t.hasKnownLength()?t.getLengthSync():null},Oa=async(r,{body:t})=>{t===null?r.end():await hd(t,r)};var xi=require("node:util"),nr=ye(require("node:http"),1),_n=typeof nr.default.validateHeaderName=="function"?nr.default.validateHeaderName:r=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(r)){let t=new TypeError(`Header name must be a valid HTTP token [${r}]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),t}},Ui=typeof nr.default.validateHeaderValue=="function"?nr.default.validateHeaderValue:(r,t)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(t)){let i=new TypeError(`Invalid character in header content ["${r}"]`);throw Object.defineProperty(i,"code",{value:"ERR_INVALID_CHAR"}),i}},ne=class extends URLSearchParams{constructor(t){let i=[];if(t instanceof ne){let o=t.raw();for(let[a,u]of Object.entries(o))i.push(...u.map(f=>[a,f]))}else if(t!=null)if(typeof t=="object"&&!xi.types.isBoxedPrimitive(t)){let o=t[Symbol.iterator];if(o==null)i.push(...Object.entries(t));else{if(typeof o!="function")throw new TypeError("Header pairs must be iterable");i=[...t].map(a=>{if(typeof a!="object"||xi.types.isBoxedPrimitive(a))throw new TypeError("Each header pair must be an iterable object");return[...a]}).map(a=>{if(a.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...a]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return i=i.length>0?i.map(([o,a])=>(_n(o),Ui(o,String(a)),[String(o).toLowerCase(),String(a)])):void 0,super(i),new Proxy(this,{get(o,a,u){switch(a){case"append":case"set":return(f,m)=>(_n(f),Ui(f,String(m)),URLSearchParams.prototype[a].call(o,String(f).toLowerCase(),String(m)));case"delete":case"has":case"getAll":return f=>(_n(f),URLSearchParams.prototype[a].call(o,String(f).toLowerCase()));case"keys":return()=>(o.sort(),new Set(URLSearchParams.prototype.keys.call(o)).keys());default:return Reflect.get(o,a,u)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(t){let i=this.getAll(t);if(i.length===0)return null;let o=i.join(", ");return/^content-encoding$/i.test(t)&&(o=o.toLowerCase()),o}forEach(t,i=void 0){for(let o of this.keys())Reflect.apply(t,i,[this.get(o),o,this])}*values(){for(let t of this.keys())yield this.get(t)}*entries(){for(let t of this.keys())yield[t,this.get(t)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((t,i)=>(t[i]=this.getAll(i),t),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((t,i)=>{let o=this.getAll(i);return i==="host"?t[i]=o[0]:t[i]=o.length>1?o:o[0],t},{})}};Object.defineProperties(ne.prototype,["get","entries","forEach","values"].reduce((r,t)=>(r[t]={enumerable:!0},r),{}));function qa(r=[]){return new ne(r.reduce((t,i,o,a)=>(o%2===0&&t.push(a.slice(o,o+2)),t),[]).filter(([t,i])=>{try{return _n(t),Ui(t,String(i)),!0}catch{return!1}}))}var pd=new Set([301,302,303,307,308]),yn=r=>pd.has(r);var Se=Symbol("Response internals"),Q=class extends Pe{constructor(t=null,i={}){super(t,i);let o=i.status!=null?i.status:200,a=new ne(i.headers);if(t!==null&&!a.has("Content-Type")){let u=bn(t,this);u&&a.append("Content-Type",u)}this[Se]={type:"default",url:i.url,status:o,statusText:i.statusText||"",headers:a,counter:i.counter,highWaterMark:i.highWaterMark}}get type(){return this[Se].type}get url(){return this[Se].url||""}get status(){return this[Se].status}get ok(){return this[Se].status>=200&&this[Se].status<300}get redirected(){return this[Se].counter>0}get statusText(){return this[Se].statusText}get headers(){return this[Se].headers}get highWaterMark(){return this[Se].highWaterMark}clone(){return new Q(Ot(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(t,i=302){if(!yn(i))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new Q(null,{headers:{location:new URL(t).toString()},status:i})}static error(){let t=new Q(null,{status:0,statusText:""});return t[Se].type="error",t}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(Q.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var xa=require("node:url"),Ua=require("node:util");var Ba=r=>{if(r.search)return r.search;let t=r.href.length-1,i=r.hash||(r.href[t]==="#"?"#":"");return r.href[t-i.length]==="?"?"?":""};var Da=require("node:net");function ka(r,t=!1){return r==null||(r=new URL(r),/^(about|blob|data):$/.test(r.protocol))?"no-referrer":(r.username="",r.password="",r.hash="",t&&(r.pathname="",r.search=""),r)}var Ia=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),Wa="strict-origin-when-cross-origin";function Ma(r){if(!Ia.has(r))throw new TypeError(`Invalid referrerPolicy: ${r}`);return r}function bd(r){if(/^(http|ws)s:$/.test(r.protocol))return!0;let t=r.host.replace(/(^\[)|(]$)/g,""),i=(0,Da.isIP)(t);return i===4&&/^127\./.test(t)||i===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(t)?!0:r.host==="localhost"||r.host.endsWith(".localhost")?!1:r.protocol==="file:"}function qt(r){return/^about:(blank|srcdoc)$/.test(r)||r.protocol==="data:"||/^(blob|filesystem):$/.test(r.protocol)?!0:bd(r)}function La(r,{referrerURLCallback:t,referrerOriginCallback:i}={}){if(r.referrer==="no-referrer"||r.referrerPolicy==="")return null;let o=r.referrerPolicy;if(r.referrer==="about:client")return"no-referrer";let a=r.referrer,u=ka(a),f=ka(a,!0);u.toString().length>4096&&(u=f),t&&(u=t(u)),i&&(f=i(f));let m=new URL(r.url);switch(o){case"no-referrer":return"no-referrer";case"origin":return f;case"unsafe-url":return u;case"strict-origin":return qt(u)&&!qt(m)?"no-referrer":f.toString();case"strict-origin-when-cross-origin":return u.origin===m.origin?u:qt(u)&&!qt(m)?"no-referrer":f;case"same-origin":return u.origin===m.origin?u:"no-referrer";case"origin-when-cross-origin":return u.origin===m.origin?u:f;case"no-referrer-when-downgrade":return qt(u)&&!qt(m)?"no-referrer":u;default:throw new TypeError(`Invalid referrerPolicy: ${o}`)}}function Fa(r){let t=(r.get("referrer-policy")||"").split(/[,\s]+/),i="";for(let o of t)o&&Ia.has(o)&&(i=o);return i}var j=Symbol("Request internals"),ir=r=>typeof r=="object"&&typeof r[j]=="object",_d=(0,Ua.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),Fe=class extends Pe{constructor(t,i={}){let o;if(ir(t)?o=new URL(t.url):(o=new URL(t),t={}),o.username!==""||o.password!=="")throw new TypeError(`${o} is an url with embedded credentials.`);let a=i.method||t.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(a)&&(a=a.toUpperCase()),!ir(i)&&"data"in i&&_d(),(i.body!=null||ir(t)&&t.body!==null)&&(a==="GET"||a==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let u=i.body?i.body:ir(t)&&t.body!==null?Ot(t):null;super(u,{size:i.size||t.size||0});let f=new ne(i.headers||t.headers||{});if(u!==null&&!f.has("Content-Type")){let h=bn(u,this);h&&f.set("Content-Type",h)}let m=ir(t)?t.signal:null;if("signal"in i&&(m=i.signal),m!=null&&!ga(m))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let d=i.referrer==null?t.referrer:i.referrer;if(d==="")d="no-referrer";else if(d){let h=new URL(d);d=/^about:(\/\/)?client$/.test(h)?"client":h}else d=void 0;this[j]={method:a,redirect:i.redirect||t.redirect||"follow",headers:f,parsedURL:o,signal:m,referrer:d},this.follow=i.follow===void 0?t.follow===void 0?20:t.follow:i.follow,this.compress=i.compress===void 0?t.compress===void 0?!0:t.compress:i.compress,this.counter=i.counter||t.counter||0,this.agent=i.agent||t.agent,this.highWaterMark=i.highWaterMark||t.highWaterMark||16384,this.insecureHTTPParser=i.insecureHTTPParser||t.insecureHTTPParser||!1,this.referrerPolicy=i.referrerPolicy||t.referrerPolicy||""}get method(){return this[j].method}get url(){return(0,xa.format)(this[j].parsedURL)}get headers(){return this[j].headers}get redirect(){return this[j].redirect}get signal(){return this[j].signal}get referrer(){if(this[j].referrer==="no-referrer")return"";if(this[j].referrer==="client")return"about:client";if(this[j].referrer)return this[j].referrer.toString()}get referrerPolicy(){return this[j].referrerPolicy}set referrerPolicy(t){this[j].referrerPolicy=Ma(t)}clone(){return new Fe(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(Fe.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var $a=r=>{let{parsedURL:t}=r[j],i=new ne(r[j].headers);i.has("Accept")||i.set("Accept","*/*");let o=null;if(r.body===null&&/^(post|put)$/i.test(r.method)&&(o="0"),r.body!==null){let m=Ca(r);typeof m=="number"&&!Number.isNaN(m)&&(o=String(m))}o&&i.set("Content-Length",o),r.referrerPolicy===""&&(r.referrerPolicy=Wa),r.referrer&&r.referrer!=="no-referrer"?r[j].referrer=La(r):r[j].referrer="no-referrer",r[j].referrer instanceof URL&&i.set("Referer",r.referrer),i.has("User-Agent")||i.set("User-Agent","node-fetch"),r.compress&&!i.has("Accept-Encoding")&&i.set("Accept-Encoding","gzip, deflate, br");let{agent:a}=r;typeof a=="function"&&(a=a(t)),!i.has("Connection")&&!a&&i.set("Connection","close");let u=Ba(t),f={path:t.pathname+u,method:r.method,headers:i[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:r.insecureHTTPParser,agent:a};return{parsedURL:t,options:f}};var gn=class extends Me{constructor(t,i="aborted"){super(t,i)}};cn();Mi();var yd=new Set(["data:","http:","https:"]);async function sr(r,t){return new Promise((i,o)=>{let a=new Fe(r,t),{parsedURL:u,options:f}=$a(a);if(!yd.has(u.protocol))throw new TypeError(`node-fetch cannot load ${r}. URL scheme "${u.protocol.replace(/:$/,"")}" is not supported.`);if(u.protocol==="data:"){let S=fa(a.url),L=new Q(S,{headers:{"Content-Type":S.typeFull}});i(L);return}let m=(u.protocol==="https:"?Na.default:za.default).request,{signal:d}=a,h=null,_=()=>{let S=new gn("The operation was aborted.");o(S),a.body&&a.body instanceof ue.default.Readable&&a.body.destroy(S),!(!h||!h.body)&&h.body.emit("error",S)};if(d&&d.aborted){_();return}let b=()=>{_(),w()},g=m(u.toString(),f);d&&d.addEventListener("abort",b);let w=()=>{g.abort(),d&&d.removeEventListener("abort",b)};g.on("error",S=>{o(new te(`request to ${a.url} failed, reason: ${S.message}`,"system",S)),w()}),gd(g,S=>{h&&h.body&&h.body.destroy(S)}),process.version<"v14"&&g.on("socket",S=>{let L;S.prependListener("end",()=>{L=S._eventsCount}),S.prependListener("close",k=>{if(h&&L<S._eventsCount&&!k){let D=new Error("Premature close");D.code="ERR_STREAM_PREMATURE_CLOSE",h.body.emit("error",D)}})}),g.on("response",S=>{g.setTimeout(0);let L=qa(S.rawHeaders);if(yn(S.statusCode)){let O=L.get("Location"),$=null;try{$=O===null?null:new URL(O,a.url)}catch{if(a.redirect!=="manual"){o(new te(`uri requested responds with an invalid redirect URL: ${O}`,"invalid-redirect")),w();return}}switch(a.redirect){case"error":o(new te(`uri requested responds with a redirect, redirect mode is set to error: ${a.url}`,"no-redirect")),w();return;case"manual":break;case"follow":{if($===null)break;if(a.counter>=a.follow){o(new te(`maximum redirect reached at: ${a.url}`,"max-redirect")),w();return}let W={headers:new ne(a.headers),follow:a.follow,counter:a.counter+1,agent:a.agent,compress:a.compress,method:a.method,body:Ot(a),signal:a.signal,size:a.size,referrer:a.referrer,referrerPolicy:a.referrerPolicy};if(!wa(a.url,$)||!Sa(a.url,$))for(let ie of["authorization","www-authenticate","cookie","cookie2"])W.headers.delete(ie);if(S.statusCode!==303&&a.body&&t.body instanceof ue.default.Readable){o(new te("Cannot follow redirect with body being a readable stream","unsupported-redirect")),w();return}(S.statusCode===303||(S.statusCode===301||S.statusCode===302)&&a.method==="POST")&&(W.method="GET",W.body=void 0,W.headers.delete("content-length"));let xe=Fa(L);xe&&(W.referrerPolicy=xe),i(sr(new Fe($,W))),w();return}default:return o(new TypeError(`Redirect option '${a.redirect}' is not a valid value of RequestRedirect`))}}d&&S.once("end",()=>{d.removeEventListener("abort",b)});let k=(0,ue.pipeline)(S,new ue.PassThrough,O=>{O&&o(O)});process.version<"v12.10"&&S.on("aborted",b);let D={url:a.url,status:S.statusCode,statusText:S.statusMessage,headers:L,size:a.size,counter:a.counter,highWaterMark:a.highWaterMark},U=L.get("Content-Encoding");if(!a.compress||a.method==="HEAD"||U===null||S.statusCode===204||S.statusCode===304){h=new Q(k,D),i(h);return}let K={flush:lt.default.Z_SYNC_FLUSH,finishFlush:lt.default.Z_SYNC_FLUSH};if(U==="gzip"||U==="x-gzip"){k=(0,ue.pipeline)(k,lt.default.createGunzip(K),O=>{O&&o(O)}),h=new Q(k,D),i(h);return}if(U==="deflate"||U==="x-deflate"){let O=(0,ue.pipeline)(S,new ue.PassThrough,$=>{$&&o($)});O.once("data",$=>{($[0]&15)===8?k=(0,ue.pipeline)(k,lt.default.createInflate(),W=>{W&&o(W)}):k=(0,ue.pipeline)(k,lt.default.createInflateRaw(),W=>{W&&o(W)}),h=new Q(k,D),i(h)}),O.once("end",()=>{h||(h=new Q(k,D),i(h))});return}if(U==="br"){k=(0,ue.pipeline)(k,lt.default.createBrotliDecompress(),O=>{O&&o(O)}),h=new Q(k,D),i(h);return}h=new Q(k,D),i(h)}),Oa(g,a).catch(o)})}function gd(r,t){let i=or.Buffer.from(`0\r
\r
`),o=!1,a=!1,u;r.on("response",f=>{let{headers:m}=f;o=m["transfer-encoding"]==="chunked"&&!m["content-length"]}),r.on("socket",f=>{let m=()=>{if(o&&!a){let h=new Error("Premature close");h.code="ERR_STREAM_PREMATURE_CLOSE",t(h)}},d=h=>{a=or.Buffer.compare(h.slice(-5),i)===0,!a&&u&&(a=or.Buffer.compare(u.slice(-3),i.slice(0,3))===0&&or.Buffer.compare(h.slice(-2),i.slice(3))===0),u=h};f.prependListener("close",m),f.on("data",d),r.on("close",()=>{f.removeListener("close",m),f.removeListener("data",d)})})}var Ha="2023-01";async function Va(r){let t=await sr(`https://${r.shop}/admin/api/${Ha}/themes.json`,{headers:{"User-Agent":"Juno Theme Action","X-Shopify-Access-Token":r.password}}),{themes:i}=await t.json();return i}async function Qa(r){return await(await sr(`https://${r.shop}/admin/api/${Ha}/themes/${r.themeId}.json`,{method:"DELETE",headers:{"User-Agent":"Juno Theme Action","X-Shopify-Access-Token":r.password}})).json()}function $i(r){ja.info(`
==============================
${r}
==============================
`)}async function wd(){let r=`Juno/${process.env.GITHUB_HEAD_REF} - Preview`;$i("Retrieve preview theme id");let i=(await Va({shop:process.env.SHOPIFY_SHOP,password:process.env.SHOPIFY_PASSWORD})).find(o=>o.name===r);if(!i){Bt.notice(`Preview theme [${r}] not found. Skipping.`);return}$i("Deleting preview theme"),await Qa({shop:process.env.SHOPIFY_SHOP,password:process.env.SHOPIFY_PASSWORD,themeId:i.id}),Bt.info(`Preview theme [${r}] has been deleted`)}try{wd()}catch(r){Bt.setFailed(r)}
/*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */
/*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */
/*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */
