var vf=Object.create;var Di=Object.defineProperty;var Rf=Object.getOwnPropertyDescriptor;var Ef=Object.getOwnPropertyNames;var Tf=Object.getPrototypeOf,Pf=Object.prototype.hasOwnProperty;var ar=(r,e)=>()=>(r&&(e=r(r=0)),e);var q=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Cf=(r,e)=>{for(var n in e)Di(r,n,{get:e[n],enumerable:!0})},Af=(r,e,n,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Ef(e))!Pf.call(r,s)&&s!==n&&Di(r,s,{get:()=>e[s],enumerable:!(o=Rf(e,s))||o.enumerable});return r};var ee=(r,e,n)=>(n=r!=null?vf(Tf(r)):{},Af(e||!r||!r.__esModule?Di(n,"default",{value:r,enumerable:!0}):n,r));var Ii=q(T=>{"use strict";var Of=T&&T.__createBinding||(Object.create?function(r,e,n,o){o===void 0&&(o=n),Object.defineProperty(r,o,{enumerable:!0,get:function(){return e[n]}})}:function(r,e,n,o){o===void 0&&(o=n),r[o]=e[n]}),qf=T&&T.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Ns=T&&T.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var n in r)n!=="default"&&Object.hasOwnProperty.call(r,n)&&Of(e,r,n);return qf(e,r),e},Bi=T&&T.__awaiter||function(r,e,n,o){function s(u){return u instanceof n?u:new n(function(l){l(u)})}return new(n||(n=Promise))(function(u,l){function h(p){try{d(o.next(p))}catch(y){l(y)}}function c(p){try{d(o.throw(p))}catch(y){l(y)}}function d(p){p.done?u(p.value):s(p.value).then(h,c)}d((o=o.apply(r,e||[])).next())})},ge;Object.defineProperty(T,"__esModule",{value:!0});T.getCmdPath=T.tryGetExecutablePath=T.isRooted=T.isDirectory=T.exists=T.IS_WINDOWS=T.unlink=T.symlink=T.stat=T.rmdir=T.rename=T.readlink=T.readdir=T.mkdir=T.lstat=T.copyFile=T.chmod=void 0;var Df=Ns(require("fs")),un=Ns(require("path"));ge=Df.promises,T.chmod=ge.chmod,T.copyFile=ge.copyFile,T.lstat=ge.lstat,T.mkdir=ge.mkdir,T.readdir=ge.readdir,T.readlink=ge.readlink,T.rename=ge.rename,T.rmdir=ge.rmdir,T.stat=ge.stat,T.symlink=ge.symlink,T.unlink=ge.unlink;T.IS_WINDOWS=process.platform==="win32";function Bf(r){return Bi(this,void 0,void 0,function*(){try{yield T.stat(r)}catch(e){if(e.code==="ENOENT")return!1;throw e}return!0})}T.exists=Bf;function If(r,e=!1){return Bi(this,void 0,void 0,function*(){return(e?yield T.stat(r):yield T.lstat(r)).isDirectory()})}T.isDirectory=If;function kf(r){if(r=Mf(r),!r)throw new Error('isRooted() parameter "p" cannot be empty');return T.IS_WINDOWS?r.startsWith("\\")||/^[A-Z]:/i.test(r):r.startsWith("/")}T.isRooted=kf;function xf(r,e){return Bi(this,void 0,void 0,function*(){let n;try{n=yield T.stat(r)}catch(s){s.code!=="ENOENT"&&console.log(`Unexpected error attempting to determine if executable file exists '${r}': ${s}`)}if(n&&n.isFile()){if(T.IS_WINDOWS){let s=un.extname(r).toUpperCase();if(e.some(u=>u.toUpperCase()===s))return r}else if(Us(n))return r}let o=r;for(let s of e){r=o+s,n=void 0;try{n=yield T.stat(r)}catch(u){u.code!=="ENOENT"&&console.log(`Unexpected error attempting to determine if executable file exists '${r}': ${u}`)}if(n&&n.isFile()){if(T.IS_WINDOWS){try{let u=un.dirname(r),l=un.basename(r).toUpperCase();for(let h of yield T.readdir(u))if(l===h.toUpperCase()){r=un.join(u,h);break}}catch(u){console.log(`Unexpected error attempting to determine the actual case of the file '${r}': ${u}`)}return r}else if(Us(n))return r}}return""})}T.tryGetExecutablePath=xf;function Mf(r){return r=r||"",T.IS_WINDOWS?(r=r.replace(/\//g,"\\"),r.replace(/\\\\+/g,"\\")):r.replace(/\/\/+/g,"/")}function Us(r){return(r.mode&1)>0||(r.mode&8)>0&&r.gid===process.getgid()||(r.mode&64)>0&&r.uid===process.getuid()}function Wf(){var r;return(r=process.env.COMSPEC)!==null&&r!==void 0?r:"cmd.exe"}T.getCmdPath=Wf});var Ks=q(z=>{"use strict";var Ff=z&&z.__createBinding||(Object.create?function(r,e,n,o){o===void 0&&(o=n),Object.defineProperty(r,o,{enumerable:!0,get:function(){return e[n]}})}:function(r,e,n,o){o===void 0&&(o=n),r[o]=e[n]}),Lf=z&&z.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),ki=z&&z.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var n in r)n!=="default"&&Object.hasOwnProperty.call(r,n)&&Ff(e,r,n);return Lf(e,r),e},nt=z&&z.__awaiter||function(r,e,n,o){function s(u){return u instanceof n?u:new n(function(l){l(u)})}return new(n||(n=Promise))(function(u,l){function h(p){try{d(o.next(p))}catch(y){l(y)}}function c(p){try{d(o.throw(p))}catch(y){l(y)}}function d(p){p.done?u(p.value):s(p.value).then(h,c)}d((o=o.apply(r,e||[])).next())})};Object.defineProperty(z,"__esModule",{value:!0});z.findInPath=z.which=z.mkdirP=z.rmRF=z.mv=z.cp=void 0;var $f=require("assert"),zs=ki(require("child_process")),Ie=ki(require("path")),Hs=require("util"),D=ki(Ii()),js=Hs.promisify(zs.exec),Uf=Hs.promisify(zs.execFile);function Nf(r,e,n={}){return nt(this,void 0,void 0,function*(){let{force:o,recursive:s,copySourceDirectory:u}=zf(n),l=(yield D.exists(e))?yield D.stat(e):null;if(l&&l.isFile()&&!o)return;let h=l&&l.isDirectory()&&u?Ie.join(e,Ie.basename(r)):e;if(!(yield D.exists(r)))throw new Error(`no such file or directory: ${r}`);if((yield D.stat(r)).isDirectory())if(s)yield Gs(r,h,0,o);else throw new Error(`Failed to copy. ${r} is a directory, but tried to copy without recursive flag.`);else{if(Ie.relative(r,h)==="")throw new Error(`'${h}' and '${r}' are the same file`);yield Js(r,h,o)}})}z.cp=Nf;function jf(r,e,n={}){return nt(this,void 0,void 0,function*(){if(yield D.exists(e)){let o=!0;if((yield D.isDirectory(e))&&(e=Ie.join(e,Ie.basename(r)),o=yield D.exists(e)),o)if(n.force==null||n.force)yield Vs(e);else throw new Error("Destination already exists")}yield xi(Ie.dirname(e)),yield D.rename(r,e)})}z.mv=jf;function Vs(r){return nt(this,void 0,void 0,function*(){if(D.IS_WINDOWS){if(/[*"<>|]/.test(r))throw new Error('File path must not contain `*`, `"`, `<`, `>` or `|` on Windows');try{let e=D.getCmdPath();(yield D.isDirectory(r,!0))?yield js(`${e} /s /c "rd /s /q "%inputPath%""`,{env:{inputPath:r}}):yield js(`${e} /s /c "del /f /a "%inputPath%""`,{env:{inputPath:r}})}catch(e){if(e.code!=="ENOENT")throw e}try{yield D.unlink(r)}catch(e){if(e.code!=="ENOENT")throw e}}else{let e=!1;try{e=yield D.isDirectory(r)}catch(n){if(n.code!=="ENOENT")throw n;return}e?yield Uf("rm",["-rf",`${r}`]):yield D.unlink(r)}})}z.rmRF=Vs;function xi(r){return nt(this,void 0,void 0,function*(){$f.ok(r,"a path argument must be provided"),yield D.mkdir(r,{recursive:!0})})}z.mkdirP=xi;function Qs(r,e){return nt(this,void 0,void 0,function*(){if(!r)throw new Error("parameter 'tool' is required");if(e){let o=yield Qs(r,!1);if(!o)throw D.IS_WINDOWS?new Error(`Unable to locate executable file: ${r}. Please verify either the file path exists or the file can be found within a directory specified by the PATH environment variable. Also verify the file has a valid extension for an executable file.`):new Error(`Unable to locate executable file: ${r}. Please verify either the file path exists or the file can be found within a directory specified by the PATH environment variable. Also check the file mode to verify the file is executable.`);return o}let n=yield Ys(r);return n&&n.length>0?n[0]:""})}z.which=Qs;function Ys(r){return nt(this,void 0,void 0,function*(){if(!r)throw new Error("parameter 'tool' is required");let e=[];if(D.IS_WINDOWS&&process.env.PATHEXT)for(let s of process.env.PATHEXT.split(Ie.delimiter))s&&e.push(s);if(D.isRooted(r)){let s=yield D.tryGetExecutablePath(r,e);return s?[s]:[]}if(r.includes(Ie.sep))return[];let n=[];if(process.env.PATH)for(let s of process.env.PATH.split(Ie.delimiter))s&&n.push(s);let o=[];for(let s of n){let u=yield D.tryGetExecutablePath(Ie.join(s,r),e);u&&o.push(u)}return o})}z.findInPath=Ys;function zf(r){let e=r.force==null?!0:r.force,n=Boolean(r.recursive),o=r.copySourceDirectory==null?!0:Boolean(r.copySourceDirectory);return{force:e,recursive:n,copySourceDirectory:o}}function Gs(r,e,n,o){return nt(this,void 0,void 0,function*(){if(n>=255)return;n++,yield xi(e);let s=yield D.readdir(r);for(let u of s){let l=`${r}/${u}`,h=`${e}/${u}`;(yield D.lstat(l)).isDirectory()?yield Gs(l,h,n,o):yield Js(l,h,o)}yield D.chmod(e,(yield D.stat(r)).mode)})}function Js(r,e,n){return nt(this,void 0,void 0,function*(){if((yield D.lstat(r)).isSymbolicLink()){try{yield D.lstat(e),yield D.unlink(e)}catch(s){s.code==="EPERM"&&(yield D.chmod(e,"0666"),yield D.unlink(e))}let o=yield D.readlink(r);yield D.symlink(o,e,D.IS_WINDOWS?"junction":null)}else(!(yield D.exists(e))||n)&&(yield D.copyFile(r,e))})}});var ta=q(oe=>{"use strict";var Hf=oe&&oe.__createBinding||(Object.create?function(r,e,n,o){o===void 0&&(o=n),Object.defineProperty(r,o,{enumerable:!0,get:function(){return e[n]}})}:function(r,e,n,o){o===void 0&&(o=n),r[o]=e[n]}),Vf=oe&&oe.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),xt=oe&&oe.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var n in r)n!=="default"&&Object.hasOwnProperty.call(r,n)&&Hf(e,r,n);return Vf(e,r),e},Xs=oe&&oe.__awaiter||function(r,e,n,o){function s(u){return u instanceof n?u:new n(function(l){l(u)})}return new(n||(n=Promise))(function(u,l){function h(p){try{d(o.next(p))}catch(y){l(y)}}function c(p){try{d(o.throw(p))}catch(y){l(y)}}function d(p){p.done?u(p.value):s(p.value).then(h,c)}d((o=o.apply(r,e||[])).next())})};Object.defineProperty(oe,"__esModule",{value:!0});oe.argStringToArray=oe.ToolRunner=void 0;var ln=xt(require("os")),ea=xt(require("events")),Qf=xt(require("child_process")),Yf=xt(require("path")),Gf=xt(Ks()),Zs=xt(Ii()),Jf=require("timers"),fn=process.platform==="win32",Mi=class extends ea.EventEmitter{constructor(e,n,o){if(super(),!e)throw new Error("Parameter 'toolPath' cannot be null or empty.");this.toolPath=e,this.args=n||[],this.options=o||{}}_debug(e){this.options.listeners&&this.options.listeners.debug&&this.options.listeners.debug(e)}_getCommandString(e,n){let o=this._getSpawnFileName(),s=this._getSpawnArgs(e),u=n?"":"[command]";if(fn)if(this._isCmdFile()){u+=o;for(let l of s)u+=` ${l}`}else if(e.windowsVerbatimArguments){u+=`"${o}"`;for(let l of s)u+=` ${l}`}else{u+=this._windowsQuoteCmdArg(o);for(let l of s)u+=` ${this._windowsQuoteCmdArg(l)}`}else{u+=o;for(let l of s)u+=` ${l}`}return u}_processLineBuffer(e,n,o){try{let s=n+e.toString(),u=s.indexOf(ln.EOL);for(;u>-1;){let l=s.substring(0,u);o(l),s=s.substring(u+ln.EOL.length),u=s.indexOf(ln.EOL)}return s}catch(s){return this._debug(`error processing line. Failed with error ${s}`),""}}_getSpawnFileName(){return fn&&this._isCmdFile()?process.env.COMSPEC||"cmd.exe":this.toolPath}_getSpawnArgs(e){if(fn&&this._isCmdFile()){let n=`/D /S /C "${this._windowsQuoteCmdArg(this.toolPath)}`;for(let o of this.args)n+=" ",n+=e.windowsVerbatimArguments?o:this._windowsQuoteCmdArg(o);return n+='"',[n]}return this.args}_endsWith(e,n){return e.endsWith(n)}_isCmdFile(){let e=this.toolPath.toUpperCase();return this._endsWith(e,".CMD")||this._endsWith(e,".BAT")}_windowsQuoteCmdArg(e){if(!this._isCmdFile())return this._uvQuoteCmdArg(e);if(!e)return'""';let n=[" ","	","&","(",")","[","]","{","}","^","=",";","!","'","+",",","`","~","|","<",">",'"'],o=!1;for(let l of e)if(n.some(h=>h===l)){o=!0;break}if(!o)return e;let s='"',u=!0;for(let l=e.length;l>0;l--)s+=e[l-1],u&&e[l-1]==="\\"?s+="\\":e[l-1]==='"'?(u=!0,s+='"'):u=!1;return s+='"',s.split("").reverse().join("")}_uvQuoteCmdArg(e){if(!e)return'""';if(!e.includes(" ")&&!e.includes("	")&&!e.includes('"'))return e;if(!e.includes('"')&&!e.includes("\\"))return`"${e}"`;let n='"',o=!0;for(let s=e.length;s>0;s--)n+=e[s-1],o&&e[s-1]==="\\"?n+="\\":e[s-1]==='"'?(o=!0,n+="\\"):o=!1;return n+='"',n.split("").reverse().join("")}_cloneExecOptions(e){e=e||{};let n={cwd:e.cwd||process.cwd(),env:e.env||process.env,silent:e.silent||!1,windowsVerbatimArguments:e.windowsVerbatimArguments||!1,failOnStdErr:e.failOnStdErr||!1,ignoreReturnCode:e.ignoreReturnCode||!1,delay:e.delay||1e4};return n.outStream=e.outStream||process.stdout,n.errStream=e.errStream||process.stderr,n}_getSpawnOptions(e,n){e=e||{};let o={};return o.cwd=e.cwd,o.env=e.env,o.windowsVerbatimArguments=e.windowsVerbatimArguments||this._isCmdFile(),e.windowsVerbatimArguments&&(o.argv0=`"${n}"`),o}exec(){return Xs(this,void 0,void 0,function*(){return!Zs.isRooted(this.toolPath)&&(this.toolPath.includes("/")||fn&&this.toolPath.includes("\\"))&&(this.toolPath=Yf.resolve(process.cwd(),this.options.cwd||process.cwd(),this.toolPath)),this.toolPath=yield Gf.which(this.toolPath,!0),new Promise((e,n)=>Xs(this,void 0,void 0,function*(){this._debug(`exec tool: ${this.toolPath}`),this._debug("arguments:");for(let d of this.args)this._debug(`   ${d}`);let o=this._cloneExecOptions(this.options);!o.silent&&o.outStream&&o.outStream.write(this._getCommandString(o)+ln.EOL);let s=new ur(o,this.toolPath);if(s.on("debug",d=>{this._debug(d)}),this.options.cwd&&!(yield Zs.exists(this.options.cwd)))return n(new Error(`The cwd: ${this.options.cwd} does not exist!`));let u=this._getSpawnFileName(),l=Qf.spawn(u,this._getSpawnArgs(o),this._getSpawnOptions(this.options,u)),h="";l.stdout&&l.stdout.on("data",d=>{this.options.listeners&&this.options.listeners.stdout&&this.options.listeners.stdout(d),!o.silent&&o.outStream&&o.outStream.write(d),h=this._processLineBuffer(d,h,p=>{this.options.listeners&&this.options.listeners.stdline&&this.options.listeners.stdline(p)})});let c="";if(l.stderr&&l.stderr.on("data",d=>{s.processStderr=!0,this.options.listeners&&this.options.listeners.stderr&&this.options.listeners.stderr(d),!o.silent&&o.errStream&&o.outStream&&(o.failOnStdErr?o.errStream:o.outStream).write(d),c=this._processLineBuffer(d,c,p=>{this.options.listeners&&this.options.listeners.errline&&this.options.listeners.errline(p)})}),l.on("error",d=>{s.processError=d.message,s.processExited=!0,s.processClosed=!0,s.CheckComplete()}),l.on("exit",d=>{s.processExitCode=d,s.processExited=!0,this._debug(`Exit code ${d} received from tool '${this.toolPath}'`),s.CheckComplete()}),l.on("close",d=>{s.processExitCode=d,s.processExited=!0,s.processClosed=!0,this._debug(`STDIO streams have closed for tool '${this.toolPath}'`),s.CheckComplete()}),s.on("done",(d,p)=>{h.length>0&&this.emit("stdline",h),c.length>0&&this.emit("errline",c),l.removeAllListeners(),d?n(d):e(p)}),this.options.input){if(!l.stdin)throw new Error("child process missing stdin");l.stdin.end(this.options.input)}}))})}};oe.ToolRunner=Mi;function Kf(r){let e=[],n=!1,o=!1,s="";function u(l){o&&l!=='"'&&(s+="\\"),s+=l,o=!1}for(let l=0;l<r.length;l++){let h=r.charAt(l);if(h==='"'){o?u(h):n=!n;continue}if(h==="\\"&&o){u(h);continue}if(h==="\\"&&n){o=!0;continue}if(h===" "&&!n){s.length>0&&(e.push(s),s="");continue}u(h)}return s.length>0&&e.push(s.trim()),e}oe.argStringToArray=Kf;var ur=class extends ea.EventEmitter{constructor(e,n){if(super(),this.processClosed=!1,this.processError="",this.processExitCode=0,this.processExited=!1,this.processStderr=!1,this.delay=1e4,this.done=!1,this.timeout=null,!n)throw new Error("toolPath must not be empty");this.options=e,this.toolPath=n,e.delay&&(this.delay=e.delay)}CheckComplete(){this.done||(this.processClosed?this._setResult():this.processExited&&(this.timeout=Jf.setTimeout(ur.HandleTimeout,this.delay,this)))}_debug(e){this.emit("debug",e)}_setResult(){let e;this.processExited&&(this.processError?e=new Error(`There was an error when attempting to execute the process '${this.toolPath}'. This may indicate the process failed to start. Error: ${this.processError}`):this.processExitCode!==0&&!this.options.ignoreReturnCode?e=new Error(`The process '${this.toolPath}' failed with exit code ${this.processExitCode}`):this.processStderr&&this.options.failOnStdErr&&(e=new Error(`The process '${this.toolPath}' failed because one or more lines were written to the STDERR stream`))),this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.done=!0,this.emit("done",e,this.processExitCode)}static HandleTimeout(e){if(!e.done){if(!e.processClosed&&e.processExited){let n=`The STDIO streams did not close within ${e.delay/1e3} seconds of the exit event from process '${e.toolPath}'. This may indicate a child process inherited the STDIO streams and has not yet exited.`;e._debug(n)}e._setResult()}}}});var sa=q(se=>{"use strict";var Xf=se&&se.__createBinding||(Object.create?function(r,e,n,o){o===void 0&&(o=n),Object.defineProperty(r,o,{enumerable:!0,get:function(){return e[n]}})}:function(r,e,n,o){o===void 0&&(o=n),r[o]=e[n]}),Zf=se&&se.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),ec=se&&se.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var n in r)n!=="default"&&Object.hasOwnProperty.call(r,n)&&Xf(e,r,n);return Zf(e,r),e},ia=se&&se.__awaiter||function(r,e,n,o){function s(u){return u instanceof n?u:new n(function(l){l(u)})}return new(n||(n=Promise))(function(u,l){function h(p){try{d(o.next(p))}catch(y){l(y)}}function c(p){try{d(o.throw(p))}catch(y){l(y)}}function d(p){p.done?u(p.value):s(p.value).then(h,c)}d((o=o.apply(r,e||[])).next())})};Object.defineProperty(se,"__esModule",{value:!0});se.getExecOutput=se.exec=void 0;var ra=require("string_decoder"),na=ec(ta());function oa(r,e,n){return ia(this,void 0,void 0,function*(){let o=na.argStringToArray(r);if(o.length===0)throw new Error("Parameter 'commandLine' cannot be null or empty.");let s=o[0];return e=o.slice(1).concat(e||[]),new na.ToolRunner(s,e,n).exec()})}se.exec=oa;function tc(r,e,n){var o,s;return ia(this,void 0,void 0,function*(){let u="",l="",h=new ra.StringDecoder("utf8"),c=new ra.StringDecoder("utf8"),d=(o=n==null?void 0:n.listeners)===null||o===void 0?void 0:o.stdout,p=(s=n==null?void 0:n.listeners)===null||s===void 0?void 0:s.stderr,y=B=>{l+=c.write(B),p&&p(B)},g=B=>{u+=h.write(B),d&&d(B)},w=Object.assign(Object.assign({},n==null?void 0:n.listeners),{stdout:g,stderr:y}),S=yield oa(r,e,Object.assign(Object.assign({},n),{listeners:w}));return u+=h.end(),l+=c.end(),{exitCode:S,stdout:u,stderr:l}})}se.getExecOutput=tc});var cn=q(Mt=>{"use strict";Object.defineProperty(Mt,"__esModule",{value:!0});Mt.toCommandProperties=Mt.toCommandValue=void 0;function rc(r){return r==null?"":typeof r=="string"||r instanceof String?r:JSON.stringify(r)}Mt.toCommandValue=rc;function nc(r){return Object.keys(r).length?{title:r.title,file:r.file,line:r.startLine,endLine:r.endLine,col:r.startColumn,endColumn:r.endColumn}:{}}Mt.toCommandProperties=nc});var fa=q(we=>{"use strict";var ic=we&&we.__createBinding||(Object.create?function(r,e,n,o){o===void 0&&(o=n),Object.defineProperty(r,o,{enumerable:!0,get:function(){return e[n]}})}:function(r,e,n,o){o===void 0&&(o=n),r[o]=e[n]}),oc=we&&we.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),sc=we&&we.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var n in r)n!=="default"&&Object.hasOwnProperty.call(r,n)&&ic(e,r,n);return oc(e,r),e};Object.defineProperty(we,"__esModule",{value:!0});we.issue=we.issueCommand=void 0;var ac=sc(require("os")),ua=cn();function la(r,e,n){let o=new Wi(r,e,n);process.stdout.write(o.toString()+ac.EOL)}we.issueCommand=la;function uc(r,e=""){la(r,{},e)}we.issue=uc;var aa="::",Wi=class{constructor(e,n,o){e||(e="missing.command"),this.command=e,this.properties=n,this.message=o}toString(){let e=aa+this.command;if(this.properties&&Object.keys(this.properties).length>0){e+=" ";let n=!0;for(let o in this.properties)if(this.properties.hasOwnProperty(o)){let s=this.properties[o];s&&(n?n=!1:e+=",",e+=`${o}=${fc(s)}`)}}return e+=`${aa}${lc(this.message)}`,e}};function lc(r){return ua.toCommandValue(r).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function fc(r){return ua.toCommandValue(r).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}});var Li=q(Fi=>{"use strict";Object.defineProperty(Fi,"__esModule",{value:!0});Fi.default=hc;var cc=dc(require("crypto"));function dc(r){return r&&r.__esModule?r:{default:r}}var hn=new Uint8Array(256),dn=hn.length;function hc(){return dn>hn.length-16&&(cc.default.randomFillSync(hn),dn=0),hn.slice(dn,dn+=16)}});var ca=q(mn=>{"use strict";Object.defineProperty(mn,"__esModule",{value:!0});mn.default=void 0;var mc=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;mn.default=mc});var lr=q(pn=>{"use strict";Object.defineProperty(pn,"__esModule",{value:!0});pn.default=void 0;var pc=yc(ca());function yc(r){return r&&r.__esModule?r:{default:r}}function _c(r){return typeof r=="string"&&pc.default.test(r)}var bc=_c;pn.default=bc});var fr=q(yn=>{"use strict";Object.defineProperty(yn,"__esModule",{value:!0});yn.default=void 0;var gc=wc(lr());function wc(r){return r&&r.__esModule?r:{default:r}}var J=[];for(let r=0;r<256;++r)J.push((r+256).toString(16).substr(1));function Sc(r,e=0){let n=(J[r[e+0]]+J[r[e+1]]+J[r[e+2]]+J[r[e+3]]+"-"+J[r[e+4]]+J[r[e+5]]+"-"+J[r[e+6]]+J[r[e+7]]+"-"+J[r[e+8]]+J[r[e+9]]+"-"+J[r[e+10]]+J[r[e+11]]+J[r[e+12]]+J[r[e+13]]+J[r[e+14]]+J[r[e+15]]).toLowerCase();if(!(0,gc.default)(n))throw TypeError("Stringified UUID is invalid");return n}var vc=Sc;yn.default=vc});var ma=q(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});_n.default=void 0;var Rc=ha(Li()),Ec=ha(fr());function ha(r){return r&&r.__esModule?r:{default:r}}var da,$i,Ui=0,Ni=0;function Tc(r,e,n){let o=e&&n||0,s=e||new Array(16);r=r||{};let u=r.node||da,l=r.clockseq!==void 0?r.clockseq:$i;if(u==null||l==null){let g=r.random||(r.rng||Rc.default)();u==null&&(u=da=[g[0]|1,g[1],g[2],g[3],g[4],g[5]]),l==null&&(l=$i=(g[6]<<8|g[7])&16383)}let h=r.msecs!==void 0?r.msecs:Date.now(),c=r.nsecs!==void 0?r.nsecs:Ni+1,d=h-Ui+(c-Ni)/1e4;if(d<0&&r.clockseq===void 0&&(l=l+1&16383),(d<0||h>Ui)&&r.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Ui=h,Ni=c,$i=l,h+=122192928e5;let p=((h&268435455)*1e4+c)%4294967296;s[o++]=p>>>24&255,s[o++]=p>>>16&255,s[o++]=p>>>8&255,s[o++]=p&255;let y=h/4294967296*1e4&268435455;s[o++]=y>>>8&255,s[o++]=y&255,s[o++]=y>>>24&15|16,s[o++]=y>>>16&255,s[o++]=l>>>8|128,s[o++]=l&255;for(let g=0;g<6;++g)s[o+g]=u[g];return e||(0,Ec.default)(s)}var Pc=Tc;_n.default=Pc});var ji=q(bn=>{"use strict";Object.defineProperty(bn,"__esModule",{value:!0});bn.default=void 0;var Cc=Ac(lr());function Ac(r){return r&&r.__esModule?r:{default:r}}function Oc(r){if(!(0,Cc.default)(r))throw TypeError("Invalid UUID");let e,n=new Uint8Array(16);return n[0]=(e=parseInt(r.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=e&255,n[4]=(e=parseInt(r.slice(9,13),16))>>>8,n[5]=e&255,n[6]=(e=parseInt(r.slice(14,18),16))>>>8,n[7]=e&255,n[8]=(e=parseInt(r.slice(19,23),16))>>>8,n[9]=e&255,n[10]=(e=parseInt(r.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=e&255,n}var qc=Oc;bn.default=qc});var zi=q(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});yt.default=kc;yt.URL=yt.DNS=void 0;var Dc=pa(fr()),Bc=pa(ji());function pa(r){return r&&r.__esModule?r:{default:r}}function Ic(r){r=unescape(encodeURIComponent(r));let e=[];for(let n=0;n<r.length;++n)e.push(r.charCodeAt(n));return e}var ya="6ba7b810-9dad-11d1-80b4-00c04fd430c8";yt.DNS=ya;var _a="6ba7b811-9dad-11d1-80b4-00c04fd430c8";yt.URL=_a;function kc(r,e,n){function o(s,u,l,h){if(typeof s=="string"&&(s=Ic(s)),typeof u=="string"&&(u=(0,Bc.default)(u)),u.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+s.length);if(c.set(u),c.set(s,u.length),c=n(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,l){h=h||0;for(let d=0;d<16;++d)l[h+d]=c[d];return l}return(0,Dc.default)(c)}try{o.name=r}catch{}return o.DNS=ya,o.URL=_a,o}});var ba=q(gn=>{"use strict";Object.defineProperty(gn,"__esModule",{value:!0});gn.default=void 0;var xc=Mc(require("crypto"));function Mc(r){return r&&r.__esModule?r:{default:r}}function Wc(r){return Array.isArray(r)?r=Buffer.from(r):typeof r=="string"&&(r=Buffer.from(r,"utf8")),xc.default.createHash("md5").update(r).digest()}var Fc=Wc;gn.default=Fc});var wa=q(wn=>{"use strict";Object.defineProperty(wn,"__esModule",{value:!0});wn.default=void 0;var Lc=ga(zi()),$c=ga(ba());function ga(r){return r&&r.__esModule?r:{default:r}}var Uc=(0,Lc.default)("v3",48,$c.default),Nc=Uc;wn.default=Nc});var va=q(Sn=>{"use strict";Object.defineProperty(Sn,"__esModule",{value:!0});Sn.default=void 0;var jc=Sa(Li()),zc=Sa(fr());function Sa(r){return r&&r.__esModule?r:{default:r}}function Hc(r,e,n){r=r||{};let o=r.random||(r.rng||jc.default)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,e){n=n||0;for(let s=0;s<16;++s)e[n+s]=o[s];return e}return(0,zc.default)(o)}var Vc=Hc;Sn.default=Vc});var Ra=q(vn=>{"use strict";Object.defineProperty(vn,"__esModule",{value:!0});vn.default=void 0;var Qc=Yc(require("crypto"));function Yc(r){return r&&r.__esModule?r:{default:r}}function Gc(r){return Array.isArray(r)?r=Buffer.from(r):typeof r=="string"&&(r=Buffer.from(r,"utf8")),Qc.default.createHash("sha1").update(r).digest()}var Jc=Gc;vn.default=Jc});var Ta=q(Rn=>{"use strict";Object.defineProperty(Rn,"__esModule",{value:!0});Rn.default=void 0;var Kc=Ea(zi()),Xc=Ea(Ra());function Ea(r){return r&&r.__esModule?r:{default:r}}var Zc=(0,Kc.default)("v5",80,Xc.default),ed=Zc;Rn.default=ed});var Pa=q(En=>{"use strict";Object.defineProperty(En,"__esModule",{value:!0});En.default=void 0;var td="00000000-0000-0000-0000-000000000000";En.default=td});var Ca=q(Tn=>{"use strict";Object.defineProperty(Tn,"__esModule",{value:!0});Tn.default=void 0;var rd=nd(lr());function nd(r){return r&&r.__esModule?r:{default:r}}function id(r){if(!(0,rd.default)(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}var od=id;Tn.default=od});var Aa=q(Ae=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0});Object.defineProperty(Ae,"v1",{enumerable:!0,get:function(){return sd.default}});Object.defineProperty(Ae,"v3",{enumerable:!0,get:function(){return ad.default}});Object.defineProperty(Ae,"v4",{enumerable:!0,get:function(){return ud.default}});Object.defineProperty(Ae,"v5",{enumerable:!0,get:function(){return ld.default}});Object.defineProperty(Ae,"NIL",{enumerable:!0,get:function(){return fd.default}});Object.defineProperty(Ae,"version",{enumerable:!0,get:function(){return cd.default}});Object.defineProperty(Ae,"validate",{enumerable:!0,get:function(){return dd.default}});Object.defineProperty(Ae,"stringify",{enumerable:!0,get:function(){return hd.default}});Object.defineProperty(Ae,"parse",{enumerable:!0,get:function(){return md.default}});var sd=Ne(ma()),ad=Ne(wa()),ud=Ne(va()),ld=Ne(Ta()),fd=Ne(Pa()),cd=Ne(Ca()),dd=Ne(lr()),hd=Ne(fr()),md=Ne(ji());function Ne(r){return r&&r.__esModule?r:{default:r}}});var Ba=q(Se=>{"use strict";var pd=Se&&Se.__createBinding||(Object.create?function(r,e,n,o){o===void 0&&(o=n),Object.defineProperty(r,o,{enumerable:!0,get:function(){return e[n]}})}:function(r,e,n,o){o===void 0&&(o=n),r[o]=e[n]}),yd=Se&&Se.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),qa=Se&&Se.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var n in r)n!=="default"&&Object.hasOwnProperty.call(r,n)&&pd(e,r,n);return yd(e,r),e};Object.defineProperty(Se,"__esModule",{value:!0});Se.prepareKeyValueMessage=Se.issueFileCommand=void 0;var Oa=qa(require("fs")),Hi=qa(require("os")),_d=Aa(),Da=cn();function bd(r,e){let n=process.env[`GITHUB_${r}`];if(!n)throw new Error(`Unable to find environment variable for file command ${r}`);if(!Oa.existsSync(n))throw new Error(`Missing file at path: ${n}`);Oa.appendFileSync(n,`${Da.toCommandValue(e)}${Hi.EOL}`,{encoding:"utf8"})}Se.issueFileCommand=bd;function gd(r,e){let n=`ghadelimiter_${_d.v4()}`,o=Da.toCommandValue(e);if(r.includes(n))throw new Error(`Unexpected input: name should not contain the delimiter "${n}"`);if(o.includes(n))throw new Error(`Unexpected input: value should not contain the delimiter "${n}"`);return`${r}<<${n}${Hi.EOL}${o}${Hi.EOL}${n}`}Se.prepareKeyValueMessage=gd});var ka=q(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});Wt.checkBypass=Wt.getProxyUrl=void 0;function wd(r){let e=r.protocol==="https:";if(Ia(r))return;let n=(()=>e?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY)();if(n)return new URL(n)}Wt.getProxyUrl=wd;function Ia(r){if(!r.hostname)return!1;let e=process.env.no_proxy||process.env.NO_PROXY||"";if(!e)return!1;let n;r.port?n=Number(r.port):r.protocol==="http:"?n=80:r.protocol==="https:"&&(n=443);let o=[r.hostname.toUpperCase()];typeof n=="number"&&o.push(`${o[0]}:${n}`);for(let s of e.split(",").map(u=>u.trim().toUpperCase()).filter(u=>u))if(o.some(u=>u===s))return!0;return!1}Wt.checkBypass=Ia});var Fa=q(Ft=>{"use strict";var _m=require("net"),Sd=require("tls"),Vi=require("http"),xa=require("https"),vd=require("events"),bm=require("assert"),Rd=require("util");Ft.httpOverHttp=Ed;Ft.httpsOverHttp=Td;Ft.httpOverHttps=Pd;Ft.httpsOverHttps=Cd;function Ed(r){var e=new je(r);return e.request=Vi.request,e}function Td(r){var e=new je(r);return e.request=Vi.request,e.createSocket=Ma,e.defaultPort=443,e}function Pd(r){var e=new je(r);return e.request=xa.request,e}function Cd(r){var e=new je(r);return e.request=xa.request,e.createSocket=Ma,e.defaultPort=443,e}function je(r){var e=this;e.options=r||{},e.proxyOptions=e.options.proxy||{},e.maxSockets=e.options.maxSockets||Vi.Agent.defaultMaxSockets,e.requests=[],e.sockets=[],e.on("free",function(o,s,u,l){for(var h=Wa(s,u,l),c=0,d=e.requests.length;c<d;++c){var p=e.requests[c];if(p.host===h.host&&p.port===h.port){e.requests.splice(c,1),p.request.onSocket(o);return}}o.destroy(),e.removeSocket(o)})}Rd.inherits(je,vd.EventEmitter);je.prototype.addRequest=function(e,n,o,s){var u=this,l=Qi({request:e},u.options,Wa(n,o,s));if(u.sockets.length>=this.maxSockets){u.requests.push(l);return}u.createSocket(l,function(h){h.on("free",c),h.on("close",d),h.on("agentRemove",d),e.onSocket(h);function c(){u.emit("free",h,l)}function d(p){u.removeSocket(h),h.removeListener("free",c),h.removeListener("close",d),h.removeListener("agentRemove",d)}})};je.prototype.createSocket=function(e,n){var o=this,s={};o.sockets.push(s);var u=Qi({},o.proxyOptions,{method:"CONNECT",path:e.host+":"+e.port,agent:!1,headers:{host:e.host+":"+e.port}});e.localAddress&&(u.localAddress=e.localAddress),u.proxyAuth&&(u.headers=u.headers||{},u.headers["Proxy-Authorization"]="Basic "+new Buffer(u.proxyAuth).toString("base64")),it("making CONNECT request");var l=o.request(u);l.useChunkedEncodingByDefault=!1,l.once("response",h),l.once("upgrade",c),l.once("connect",d),l.once("error",p),l.end();function h(y){y.upgrade=!0}function c(y,g,w){process.nextTick(function(){d(y,g,w)})}function d(y,g,w){if(l.removeAllListeners(),g.removeAllListeners(),y.statusCode!==200){it("tunneling socket could not be established, statusCode=%d",y.statusCode),g.destroy();var S=new Error("tunneling socket could not be established, statusCode="+y.statusCode);S.code="ECONNRESET",e.request.emit("error",S),o.removeSocket(s);return}if(w.length>0){it("got illegal response body from proxy"),g.destroy();var S=new Error("got illegal response body from proxy");S.code="ECONNRESET",e.request.emit("error",S),o.removeSocket(s);return}return it("tunneling connection has established"),o.sockets[o.sockets.indexOf(s)]=g,n(g)}function p(y){l.removeAllListeners(),it(`tunneling socket could not be established, cause=%s
`,y.message,y.stack);var g=new Error("tunneling socket could not be established, cause="+y.message);g.code="ECONNRESET",e.request.emit("error",g),o.removeSocket(s)}};je.prototype.removeSocket=function(e){var n=this.sockets.indexOf(e);if(n!==-1){this.sockets.splice(n,1);var o=this.requests.shift();o&&this.createSocket(o,function(s){o.request.onSocket(s)})}};function Ma(r,e){var n=this;je.prototype.createSocket.call(n,r,function(o){var s=r.request.getHeader("host"),u=Qi({},n.options,{socket:o,servername:s?s.replace(/:.*$/,""):r.host}),l=Sd.connect(0,u);n.sockets[n.sockets.indexOf(o)]=l,e(l)})}function Wa(r,e,n){return typeof r=="string"?{host:r,port:e,localAddress:n}:r}function Qi(r){for(var e=1,n=arguments.length;e<n;++e){var o=arguments[e];if(typeof o=="object")for(var s=Object.keys(o),u=0,l=s.length;u<l;++u){var h=s[u];o[h]!==void 0&&(r[h]=o[h])}}return r}var it;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?it=function(){var r=Array.prototype.slice.call(arguments);typeof r[0]=="string"?r[0]="TUNNEL: "+r[0]:r.unshift("TUNNEL:"),console.error.apply(console,r)}:it=function(){};Ft.debug=it});var $a=q((wm,La)=>{La.exports=Fa()});var Na=q(L=>{"use strict";var Ad=L&&L.__createBinding||(Object.create?function(r,e,n,o){o===void 0&&(o=n),Object.defineProperty(r,o,{enumerable:!0,get:function(){return e[n]}})}:function(r,e,n,o){o===void 0&&(o=n),r[o]=e[n]}),Od=L&&L.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),qn=L&&L.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var n in r)n!=="default"&&Object.hasOwnProperty.call(r,n)&&Ad(e,r,n);return Od(e,r),e},Y=L&&L.__awaiter||function(r,e,n,o){function s(u){return u instanceof n?u:new n(function(l){l(u)})}return new(n||(n=Promise))(function(u,l){function h(p){try{d(o.next(p))}catch(y){l(y)}}function c(p){try{d(o.throw(p))}catch(y){l(y)}}function d(p){p.done?u(p.value):s(p.value).then(h,c)}d((o=o.apply(r,e||[])).next())})};Object.defineProperty(L,"__esModule",{value:!0});L.HttpClient=L.isHttps=L.HttpClientResponse=L.HttpClientError=L.getProxyUrl=L.MediaTypes=L.Headers=L.HttpCodes=void 0;var Pn=qn(require("http")),Yi=qn(require("https")),Ua=qn(ka()),Cn=qn($a()),Oe;(function(r){r[r.OK=200]="OK",r[r.MultipleChoices=300]="MultipleChoices",r[r.MovedPermanently=301]="MovedPermanently",r[r.ResourceMoved=302]="ResourceMoved",r[r.SeeOther=303]="SeeOther",r[r.NotModified=304]="NotModified",r[r.UseProxy=305]="UseProxy",r[r.SwitchProxy=306]="SwitchProxy",r[r.TemporaryRedirect=307]="TemporaryRedirect",r[r.PermanentRedirect=308]="PermanentRedirect",r[r.BadRequest=400]="BadRequest",r[r.Unauthorized=401]="Unauthorized",r[r.PaymentRequired=402]="PaymentRequired",r[r.Forbidden=403]="Forbidden",r[r.NotFound=404]="NotFound",r[r.MethodNotAllowed=405]="MethodNotAllowed",r[r.NotAcceptable=406]="NotAcceptable",r[r.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",r[r.RequestTimeout=408]="RequestTimeout",r[r.Conflict=409]="Conflict",r[r.Gone=410]="Gone",r[r.TooManyRequests=429]="TooManyRequests",r[r.InternalServerError=500]="InternalServerError",r[r.NotImplemented=501]="NotImplemented",r[r.BadGateway=502]="BadGateway",r[r.ServiceUnavailable=503]="ServiceUnavailable",r[r.GatewayTimeout=504]="GatewayTimeout"})(Oe=L.HttpCodes||(L.HttpCodes={}));var te;(function(r){r.Accept="accept",r.ContentType="content-type"})(te=L.Headers||(L.Headers={}));var ot;(function(r){r.ApplicationJson="application/json"})(ot=L.MediaTypes||(L.MediaTypes={}));function qd(r){let e=Ua.getProxyUrl(new URL(r));return e?e.href:""}L.getProxyUrl=qd;var Dd=[Oe.MovedPermanently,Oe.ResourceMoved,Oe.SeeOther,Oe.TemporaryRedirect,Oe.PermanentRedirect],Bd=[Oe.BadGateway,Oe.ServiceUnavailable,Oe.GatewayTimeout],Id=["OPTIONS","GET","DELETE","HEAD"],kd=10,xd=5,Lt=class extends Error{constructor(e,n){super(e),this.name="HttpClientError",this.statusCode=n,Object.setPrototypeOf(this,Lt.prototype)}};L.HttpClientError=Lt;var On=class{constructor(e){this.message=e}readBody(){return Y(this,void 0,void 0,function*(){return new Promise(e=>Y(this,void 0,void 0,function*(){let n=Buffer.alloc(0);this.message.on("data",o=>{n=Buffer.concat([n,o])}),this.message.on("end",()=>{e(n.toString())})}))})}};L.HttpClientResponse=On;function Md(r){return new URL(r).protocol==="https:"}L.isHttps=Md;var Gi=class{constructor(e,n,o){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=e,this.handlers=n||[],this.requestOptions=o,o&&(o.ignoreSslError!=null&&(this._ignoreSslError=o.ignoreSslError),this._socketTimeout=o.socketTimeout,o.allowRedirects!=null&&(this._allowRedirects=o.allowRedirects),o.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=o.allowRedirectDowngrade),o.maxRedirects!=null&&(this._maxRedirects=Math.max(o.maxRedirects,0)),o.keepAlive!=null&&(this._keepAlive=o.keepAlive),o.allowRetries!=null&&(this._allowRetries=o.allowRetries),o.maxRetries!=null&&(this._maxRetries=o.maxRetries))}options(e,n){return Y(this,void 0,void 0,function*(){return this.request("OPTIONS",e,null,n||{})})}get(e,n){return Y(this,void 0,void 0,function*(){return this.request("GET",e,null,n||{})})}del(e,n){return Y(this,void 0,void 0,function*(){return this.request("DELETE",e,null,n||{})})}post(e,n,o){return Y(this,void 0,void 0,function*(){return this.request("POST",e,n,o||{})})}patch(e,n,o){return Y(this,void 0,void 0,function*(){return this.request("PATCH",e,n,o||{})})}put(e,n,o){return Y(this,void 0,void 0,function*(){return this.request("PUT",e,n,o||{})})}head(e,n){return Y(this,void 0,void 0,function*(){return this.request("HEAD",e,null,n||{})})}sendStream(e,n,o,s){return Y(this,void 0,void 0,function*(){return this.request(e,n,o,s)})}getJson(e,n={}){return Y(this,void 0,void 0,function*(){n[te.Accept]=this._getExistingOrDefaultHeader(n,te.Accept,ot.ApplicationJson);let o=yield this.get(e,n);return this._processResponse(o,this.requestOptions)})}postJson(e,n,o={}){return Y(this,void 0,void 0,function*(){let s=JSON.stringify(n,null,2);o[te.Accept]=this._getExistingOrDefaultHeader(o,te.Accept,ot.ApplicationJson),o[te.ContentType]=this._getExistingOrDefaultHeader(o,te.ContentType,ot.ApplicationJson);let u=yield this.post(e,s,o);return this._processResponse(u,this.requestOptions)})}putJson(e,n,o={}){return Y(this,void 0,void 0,function*(){let s=JSON.stringify(n,null,2);o[te.Accept]=this._getExistingOrDefaultHeader(o,te.Accept,ot.ApplicationJson),o[te.ContentType]=this._getExistingOrDefaultHeader(o,te.ContentType,ot.ApplicationJson);let u=yield this.put(e,s,o);return this._processResponse(u,this.requestOptions)})}patchJson(e,n,o={}){return Y(this,void 0,void 0,function*(){let s=JSON.stringify(n,null,2);o[te.Accept]=this._getExistingOrDefaultHeader(o,te.Accept,ot.ApplicationJson),o[te.ContentType]=this._getExistingOrDefaultHeader(o,te.ContentType,ot.ApplicationJson);let u=yield this.patch(e,s,o);return this._processResponse(u,this.requestOptions)})}request(e,n,o,s){return Y(this,void 0,void 0,function*(){if(this._disposed)throw new Error("Client has already been disposed.");let u=new URL(n),l=this._prepareRequest(e,u,s),h=this._allowRetries&&Id.includes(e)?this._maxRetries+1:1,c=0,d;do{if(d=yield this.requestRaw(l,o),d&&d.message&&d.message.statusCode===Oe.Unauthorized){let y;for(let g of this.handlers)if(g.canHandleAuthentication(d)){y=g;break}return y?y.handleAuthentication(this,l,o):d}let p=this._maxRedirects;for(;d.message.statusCode&&Dd.includes(d.message.statusCode)&&this._allowRedirects&&p>0;){let y=d.message.headers.location;if(!y)break;let g=new URL(y);if(u.protocol==="https:"&&u.protocol!==g.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(yield d.readBody(),g.hostname!==u.hostname)for(let w in s)w.toLowerCase()==="authorization"&&delete s[w];l=this._prepareRequest(e,g,s),d=yield this.requestRaw(l,o),p--}if(!d.message.statusCode||!Bd.includes(d.message.statusCode))return d;c+=1,c<h&&(yield d.readBody(),yield this._performExponentialBackoff(c))}while(c<h);return d})}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(e,n){return Y(this,void 0,void 0,function*(){return new Promise((o,s)=>{function u(l,h){l?s(l):h?o(h):s(new Error("Unknown error"))}this.requestRawWithCallback(e,n,u)})})}requestRawWithCallback(e,n,o){typeof n=="string"&&(e.options.headers||(e.options.headers={}),e.options.headers["Content-Length"]=Buffer.byteLength(n,"utf8"));let s=!1;function u(c,d){s||(s=!0,o(c,d))}let l=e.httpModule.request(e.options,c=>{let d=new On(c);u(void 0,d)}),h;l.on("socket",c=>{h=c}),l.setTimeout(this._socketTimeout||3*6e4,()=>{h&&h.end(),u(new Error(`Request timeout: ${e.options.path}`))}),l.on("error",function(c){u(c)}),n&&typeof n=="string"&&l.write(n,"utf8"),n&&typeof n!="string"?(n.on("close",function(){l.end()}),n.pipe(l)):l.end()}getAgent(e){let n=new URL(e);return this._getAgent(n)}_prepareRequest(e,n,o){let s={};s.parsedUrl=n;let u=s.parsedUrl.protocol==="https:";s.httpModule=u?Yi:Pn;let l=u?443:80;if(s.options={},s.options.host=s.parsedUrl.hostname,s.options.port=s.parsedUrl.port?parseInt(s.parsedUrl.port):l,s.options.path=(s.parsedUrl.pathname||"")+(s.parsedUrl.search||""),s.options.method=e,s.options.headers=this._mergeHeaders(o),this.userAgent!=null&&(s.options.headers["user-agent"]=this.userAgent),s.options.agent=this._getAgent(s.parsedUrl),this.handlers)for(let h of this.handlers)h.prepareRequest(s.options);return s}_mergeHeaders(e){return this.requestOptions&&this.requestOptions.headers?Object.assign({},An(this.requestOptions.headers),An(e||{})):An(e||{})}_getExistingOrDefaultHeader(e,n,o){let s;return this.requestOptions&&this.requestOptions.headers&&(s=An(this.requestOptions.headers)[n]),e[n]||s||o}_getAgent(e){let n,o=Ua.getProxyUrl(e),s=o&&o.hostname;if(this._keepAlive&&s&&(n=this._proxyAgent),this._keepAlive&&!s&&(n=this._agent),n)return n;let u=e.protocol==="https:",l=100;if(this.requestOptions&&(l=this.requestOptions.maxSockets||Pn.globalAgent.maxSockets),o&&o.hostname){let h={maxSockets:l,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(o.username||o.password)&&{proxyAuth:`${o.username}:${o.password}`}),{host:o.hostname,port:o.port})},c,d=o.protocol==="https:";u?c=d?Cn.httpsOverHttps:Cn.httpsOverHttp:c=d?Cn.httpOverHttps:Cn.httpOverHttp,n=c(h),this._proxyAgent=n}if(this._keepAlive&&!n){let h={keepAlive:this._keepAlive,maxSockets:l};n=u?new Yi.Agent(h):new Pn.Agent(h),this._agent=n}return n||(n=u?Yi.globalAgent:Pn.globalAgent),u&&this._ignoreSslError&&(n.options=Object.assign(n.options||{},{rejectUnauthorized:!1})),n}_performExponentialBackoff(e){return Y(this,void 0,void 0,function*(){e=Math.min(kd,e);let n=xd*Math.pow(2,e);return new Promise(o=>setTimeout(()=>o(),n))})}_processResponse(e,n){return Y(this,void 0,void 0,function*(){return new Promise((o,s)=>Y(this,void 0,void 0,function*(){let u=e.message.statusCode||0,l={statusCode:u,result:null,headers:{}};u===Oe.NotFound&&o(l);function h(p,y){if(typeof y=="string"){let g=new Date(y);if(!isNaN(g.valueOf()))return g}return y}let c,d;try{d=yield e.readBody(),d&&d.length>0&&(n&&n.deserializeDates?c=JSON.parse(d,h):c=JSON.parse(d),l.result=c),l.headers=e.message.headers}catch{}if(u>299){let p;c&&c.message?p=c.message:d&&d.length>0?p=d:p=`Failed request: (${u})`;let y=new Lt(p,u);y.result=l.result,s(y)}else o(l)}))})}};L.HttpClient=Gi;var An=r=>Object.keys(r).reduce((e,n)=>(e[n.toLowerCase()]=r[n],e),{})});var ja=q(ke=>{"use strict";var Zi=ke&&ke.__awaiter||function(r,e,n,o){function s(u){return u instanceof n?u:new n(function(l){l(u)})}return new(n||(n=Promise))(function(u,l){function h(p){try{d(o.next(p))}catch(y){l(y)}}function c(p){try{d(o.throw(p))}catch(y){l(y)}}function d(p){p.done?u(p.value):s(p.value).then(h,c)}d((o=o.apply(r,e||[])).next())})};Object.defineProperty(ke,"__esModule",{value:!0});ke.PersonalAccessTokenCredentialHandler=ke.BearerCredentialHandler=ke.BasicCredentialHandler=void 0;var Ji=class{constructor(e,n){this.username=e,this.password=n}prepareRequest(e){if(!e.headers)throw Error("The request has no headers");e.headers.Authorization=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return Zi(this,void 0,void 0,function*(){throw new Error("not implemented")})}};ke.BasicCredentialHandler=Ji;var Ki=class{constructor(e){this.token=e}prepareRequest(e){if(!e.headers)throw Error("The request has no headers");e.headers.Authorization=`Bearer ${this.token}`}canHandleAuthentication(){return!1}handleAuthentication(){return Zi(this,void 0,void 0,function*(){throw new Error("not implemented")})}};ke.BearerCredentialHandler=Ki;var Xi=class{constructor(e){this.token=e}prepareRequest(e){if(!e.headers)throw Error("The request has no headers");e.headers.Authorization=`Basic ${Buffer.from(`PAT:${this.token}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return Zi(this,void 0,void 0,function*(){throw new Error("not implemented")})}};ke.PersonalAccessTokenCredentialHandler=Xi});var Va=q($t=>{"use strict";var za=$t&&$t.__awaiter||function(r,e,n,o){function s(u){return u instanceof n?u:new n(function(l){l(u)})}return new(n||(n=Promise))(function(u,l){function h(p){try{d(o.next(p))}catch(y){l(y)}}function c(p){try{d(o.throw(p))}catch(y){l(y)}}function d(p){p.done?u(p.value):s(p.value).then(h,c)}d((o=o.apply(r,e||[])).next())})};Object.defineProperty($t,"__esModule",{value:!0});$t.OidcClient=void 0;var Wd=Na(),Fd=ja(),Ha=Dn(),st=class{static createHttpClient(e=!0,n=10){let o={allowRetries:e,maxRetries:n};return new Wd.HttpClient("actions/oidc-client",[new Fd.BearerCredentialHandler(st.getRequestToken())],o)}static getRequestToken(){let e=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!e)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return e}static getIDTokenUrl(){let e=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!e)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return e}static getCall(e){var n;return za(this,void 0,void 0,function*(){let u=(n=(yield st.createHttpClient().getJson(e).catch(l=>{throw new Error(`Failed to get ID Token. 
 
        Error Code : ${l.statusCode}
 
        Error Message: ${l.result.message}`)})).result)===null||n===void 0?void 0:n.value;if(!u)throw new Error("Response json body do not have ID Token field");return u})}static getIDToken(e){return za(this,void 0,void 0,function*(){try{let n=st.getIDTokenUrl();if(e){let s=encodeURIComponent(e);n=`${n}&audience=${s}`}Ha.debug(`ID token url is ${n}`);let o=yield st.getCall(n);return Ha.setSecret(o),o}catch(n){throw new Error(`Error message: ${n.message}`)}})}};$t.OidcClient=st});var no=q(ae=>{"use strict";var eo=ae&&ae.__awaiter||function(r,e,n,o){function s(u){return u instanceof n?u:new n(function(l){l(u)})}return new(n||(n=Promise))(function(u,l){function h(p){try{d(o.next(p))}catch(y){l(y)}}function c(p){try{d(o.throw(p))}catch(y){l(y)}}function d(p){p.done?u(p.value):s(p.value).then(h,c)}d((o=o.apply(r,e||[])).next())})};Object.defineProperty(ae,"__esModule",{value:!0});ae.summary=ae.markdownSummary=ae.SUMMARY_DOCS_URL=ae.SUMMARY_ENV_VAR=void 0;var Ld=require("os"),to=require("fs"),{access:$d,appendFile:Ud,writeFile:Nd}=to.promises;ae.SUMMARY_ENV_VAR="GITHUB_STEP_SUMMARY";ae.SUMMARY_DOCS_URL="https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary";var ro=class{constructor(){this._buffer=""}filePath(){return eo(this,void 0,void 0,function*(){if(this._filePath)return this._filePath;let e=process.env[ae.SUMMARY_ENV_VAR];if(!e)throw new Error(`Unable to find environment variable for $${ae.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`);try{yield $d(e,to.constants.R_OK|to.constants.W_OK)}catch{throw new Error(`Unable to access summary file: '${e}'. Check if the file has correct read/write permissions.`)}return this._filePath=e,this._filePath})}wrap(e,n,o={}){let s=Object.entries(o).map(([u,l])=>` ${u}="${l}"`).join("");return n?`<${e}${s}>${n}</${e}>`:`<${e}${s}>`}write(e){return eo(this,void 0,void 0,function*(){let n=!!(e!=null&&e.overwrite),o=yield this.filePath();return yield(n?Nd:Ud)(o,this._buffer,{encoding:"utf8"}),this.emptyBuffer()})}clear(){return eo(this,void 0,void 0,function*(){return this.emptyBuffer().write({overwrite:!0})})}stringify(){return this._buffer}isEmptyBuffer(){return this._buffer.length===0}emptyBuffer(){return this._buffer="",this}addRaw(e,n=!1){return this._buffer+=e,n?this.addEOL():this}addEOL(){return this.addRaw(Ld.EOL)}addCodeBlock(e,n){let o=Object.assign({},n&&{lang:n}),s=this.wrap("pre",this.wrap("code",e),o);return this.addRaw(s).addEOL()}addList(e,n=!1){let o=n?"ol":"ul",s=e.map(l=>this.wrap("li",l)).join(""),u=this.wrap(o,s);return this.addRaw(u).addEOL()}addTable(e){let n=e.map(s=>{let u=s.map(l=>{if(typeof l=="string")return this.wrap("td",l);let{header:h,data:c,colspan:d,rowspan:p}=l,y=h?"th":"td",g=Object.assign(Object.assign({},d&&{colspan:d}),p&&{rowspan:p});return this.wrap(y,c,g)}).join("");return this.wrap("tr",u)}).join(""),o=this.wrap("table",n);return this.addRaw(o).addEOL()}addDetails(e,n){let o=this.wrap("details",this.wrap("summary",e)+n);return this.addRaw(o).addEOL()}addImage(e,n,o){let{width:s,height:u}=o||{},l=Object.assign(Object.assign({},s&&{width:s}),u&&{height:u}),h=this.wrap("img",null,Object.assign({src:e,alt:n},l));return this.addRaw(h).addEOL()}addHeading(e,n){let o=`h${n}`,s=["h1","h2","h3","h4","h5","h6"].includes(o)?o:"h1",u=this.wrap(s,e);return this.addRaw(u).addEOL()}addSeparator(){let e=this.wrap("hr",null);return this.addRaw(e).addEOL()}addBreak(){let e=this.wrap("br",null);return this.addRaw(e).addEOL()}addQuote(e,n){let o=Object.assign({},n&&{cite:n}),s=this.wrap("blockquote",e,o);return this.addRaw(s).addEOL()}addLink(e,n){let o=this.wrap("a",e,{href:n});return this.addRaw(o).addEOL()}},Qa=new ro;ae.markdownSummary=Qa;ae.summary=Qa});var Ya=q(ue=>{"use strict";var jd=ue&&ue.__createBinding||(Object.create?function(r,e,n,o){o===void 0&&(o=n),Object.defineProperty(r,o,{enumerable:!0,get:function(){return e[n]}})}:function(r,e,n,o){o===void 0&&(o=n),r[o]=e[n]}),zd=ue&&ue.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Hd=ue&&ue.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var n in r)n!=="default"&&Object.hasOwnProperty.call(r,n)&&jd(e,r,n);return zd(e,r),e};Object.defineProperty(ue,"__esModule",{value:!0});ue.toPlatformPath=ue.toWin32Path=ue.toPosixPath=void 0;var Vd=Hd(require("path"));function Qd(r){return r.replace(/[\\]/g,"/")}ue.toPosixPath=Qd;function Yd(r){return r.replace(/[/]/g,"\\")}ue.toWin32Path=Yd;function Gd(r){return r.replace(/[/\\]/g,Vd.sep)}ue.toPlatformPath=Gd});var Dn=q(E=>{"use strict";var Jd=E&&E.__createBinding||(Object.create?function(r,e,n,o){o===void 0&&(o=n),Object.defineProperty(r,o,{enumerable:!0,get:function(){return e[n]}})}:function(r,e,n,o){o===void 0&&(o=n),r[o]=e[n]}),Kd=E&&E.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Ga=E&&E.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var n in r)n!=="default"&&Object.hasOwnProperty.call(r,n)&&Jd(e,r,n);return Kd(e,r),e},Ja=E&&E.__awaiter||function(r,e,n,o){function s(u){return u instanceof n?u:new n(function(l){l(u)})}return new(n||(n=Promise))(function(u,l){function h(p){try{d(o.next(p))}catch(y){l(y)}}function c(p){try{d(o.throw(p))}catch(y){l(y)}}function d(p){p.done?u(p.value):s(p.value).then(h,c)}d((o=o.apply(r,e||[])).next())})};Object.defineProperty(E,"__esModule",{value:!0});E.getIDToken=E.getState=E.saveState=E.group=E.endGroup=E.startGroup=E.info=E.notice=E.warning=E.error=E.debug=E.isDebug=E.setFailed=E.setCommandEcho=E.setOutput=E.getBooleanInput=E.getMultilineInput=E.getInput=E.addPath=E.setSecret=E.exportVariable=E.ExitCode=void 0;var ve=fa(),_t=Ba(),Ut=cn(),Ka=Ga(require("os")),Xd=Ga(require("path")),Zd=Va(),Xa;(function(r){r[r.Success=0]="Success",r[r.Failure=1]="Failure"})(Xa=E.ExitCode||(E.ExitCode={}));function eh(r,e){let n=Ut.toCommandValue(e);if(process.env[r]=n,process.env.GITHUB_ENV||"")return _t.issueFileCommand("ENV",_t.prepareKeyValueMessage(r,e));ve.issueCommand("set-env",{name:r},n)}E.exportVariable=eh;function th(r){ve.issueCommand("add-mask",{},r)}E.setSecret=th;function rh(r){process.env.GITHUB_PATH||""?_t.issueFileCommand("PATH",r):ve.issueCommand("add-path",{},r),process.env.PATH=`${r}${Xd.delimiter}${process.env.PATH}`}E.addPath=rh;function io(r,e){let n=process.env[`INPUT_${r.replace(/ /g,"_").toUpperCase()}`]||"";if(e&&e.required&&!n)throw new Error(`Input required and not supplied: ${r}`);return e&&e.trimWhitespace===!1?n:n.trim()}E.getInput=io;function nh(r,e){let n=io(r,e).split(`
`).filter(o=>o!=="");return e&&e.trimWhitespace===!1?n:n.map(o=>o.trim())}E.getMultilineInput=nh;function ih(r,e){let n=["true","True","TRUE"],o=["false","False","FALSE"],s=io(r,e);if(n.includes(s))return!0;if(o.includes(s))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${r}
Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}E.getBooleanInput=ih;function oh(r,e){if(process.env.GITHUB_OUTPUT||"")return _t.issueFileCommand("OUTPUT",_t.prepareKeyValueMessage(r,e));process.stdout.write(Ka.EOL),ve.issueCommand("set-output",{name:r},Ut.toCommandValue(e))}E.setOutput=oh;function sh(r){ve.issue("echo",r?"on":"off")}E.setCommandEcho=sh;function ah(r){process.exitCode=Xa.Failure,Za(r)}E.setFailed=ah;function uh(){return process.env.RUNNER_DEBUG==="1"}E.isDebug=uh;function lh(r){ve.issueCommand("debug",{},r)}E.debug=lh;function Za(r,e={}){ve.issueCommand("error",Ut.toCommandProperties(e),r instanceof Error?r.toString():r)}E.error=Za;function fh(r,e={}){ve.issueCommand("warning",Ut.toCommandProperties(e),r instanceof Error?r.toString():r)}E.warning=fh;function ch(r,e={}){ve.issueCommand("notice",Ut.toCommandProperties(e),r instanceof Error?r.toString():r)}E.notice=ch;function dh(r){process.stdout.write(r+Ka.EOL)}E.info=dh;function eu(r){ve.issue("group",r)}E.startGroup=eu;function tu(){ve.issue("endgroup")}E.endGroup=tu;function hh(r,e){return Ja(this,void 0,void 0,function*(){eu(r);let n;try{n=yield e()}finally{tu()}return n})}E.group=hh;function mh(r,e){if(process.env.GITHUB_STATE||"")return _t.issueFileCommand("STATE",_t.prepareKeyValueMessage(r,e));ve.issueCommand("save-state",{name:r},Ut.toCommandValue(e))}E.saveState=mh;function ph(r){return process.env[`STATE_${r}`]||""}E.getState=ph;function yh(r){return Ja(this,void 0,void 0,function*(){return yield Zd.OidcClient.getIDToken(r)})}E.getIDToken=yh;var _h=no();Object.defineProperty(E,"summary",{enumerable:!0,get:function(){return _h.summary}});var bh=no();Object.defineProperty(E,"markdownSummary",{enumerable:!0,get:function(){return bh.markdownSummary}});var oo=Ya();Object.defineProperty(E,"toPosixPath",{enumerable:!0,get:function(){return oo.toPosixPath}});Object.defineProperty(E,"toWin32Path",{enumerable:!0,get:function(){return oo.toWin32Path}});Object.defineProperty(E,"toPlatformPath",{enumerable:!0,get:function(){return oo.toPlatformPath}})});var nu=q((Am,so)=>{"use strict";var wh=Object.prototype.hasOwnProperty,re="~";function cr(){}Object.create&&(cr.prototype=Object.create(null),new cr().__proto__||(re=!1));function Sh(r,e,n){this.fn=r,this.context=e,this.once=n||!1}function ru(r,e,n,o,s){if(typeof n!="function")throw new TypeError("The listener must be a function");var u=new Sh(n,o||r,s),l=re?re+e:e;return r._events[l]?r._events[l].fn?r._events[l]=[r._events[l],u]:r._events[l].push(u):(r._events[l]=u,r._eventsCount++),r}function In(r,e){--r._eventsCount===0?r._events=new cr:delete r._events[e]}function K(){this._events=new cr,this._eventsCount=0}K.prototype.eventNames=function(){var e=[],n,o;if(this._eventsCount===0)return e;for(o in n=this._events)wh.call(n,o)&&e.push(re?o.slice(1):o);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(n)):e};K.prototype.listeners=function(e){var n=re?re+e:e,o=this._events[n];if(!o)return[];if(o.fn)return[o.fn];for(var s=0,u=o.length,l=new Array(u);s<u;s++)l[s]=o[s].fn;return l};K.prototype.listenerCount=function(e){var n=re?re+e:e,o=this._events[n];return o?o.fn?1:o.length:0};K.prototype.emit=function(e,n,o,s,u,l){var h=re?re+e:e;if(!this._events[h])return!1;var c=this._events[h],d=arguments.length,p,y;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,n),!0;case 3:return c.fn.call(c.context,n,o),!0;case 4:return c.fn.call(c.context,n,o,s),!0;case 5:return c.fn.call(c.context,n,o,s,u),!0;case 6:return c.fn.call(c.context,n,o,s,u,l),!0}for(y=1,p=new Array(d-1);y<d;y++)p[y-1]=arguments[y];c.fn.apply(c.context,p)}else{var g=c.length,w;for(y=0;y<g;y++)switch(c[y].once&&this.removeListener(e,c[y].fn,void 0,!0),d){case 1:c[y].fn.call(c[y].context);break;case 2:c[y].fn.call(c[y].context,n);break;case 3:c[y].fn.call(c[y].context,n,o);break;case 4:c[y].fn.call(c[y].context,n,o,s);break;default:if(!p)for(w=1,p=new Array(d-1);w<d;w++)p[w-1]=arguments[w];c[y].fn.apply(c[y].context,p)}}return!0};K.prototype.on=function(e,n,o){return ru(this,e,n,o,!1)};K.prototype.once=function(e,n,o){return ru(this,e,n,o,!0)};K.prototype.removeListener=function(e,n,o,s){var u=re?re+e:e;if(!this._events[u])return this;if(!n)return In(this,u),this;var l=this._events[u];if(l.fn)l.fn===n&&(!s||l.once)&&(!o||l.context===o)&&In(this,u);else{for(var h=0,c=[],d=l.length;h<d;h++)(l[h].fn!==n||s&&!l[h].once||o&&l[h].context!==o)&&c.push(l[h]);c.length?this._events[u]=c.length===1?c[0]:c:In(this,u)}return this};K.prototype.removeAllListeners=function(e){var n;return e?(n=re?re+e:e,this._events[n]&&In(this,n)):(this._events=new cr,this._eventsCount=0),this};K.prototype.off=K.prototype.removeListener;K.prototype.addListener=K.prototype.on;K.prefixed=re;K.EventEmitter=K;typeof so<"u"&&(so.exports=K)});var pu=q((Un,mu)=>{(function(r,e){typeof Un=="object"&&typeof mu<"u"?e(Un):typeof define=="function"&&define.amd?define(["exports"],e):(r=typeof globalThis<"u"?globalThis:r||self,e(r.WebStreamsPolyfill={}))})(Un,function(r){"use strict";let e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:t=>`Symbol(${t})`;function n(){}function o(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}let s=o();function u(t){return typeof t=="object"&&t!==null||typeof t=="function"}let l=n,h=Promise,c=Promise.prototype.then,d=Promise.resolve.bind(h),p=Promise.reject.bind(h);function y(t){return new h(t)}function g(t){return d(t)}function w(t){return p(t)}function S(t,i,a){return c.call(t,i,a)}function B(t,i,a){S(S(t,i,a),void 0,l)}function M(t,i){B(t,i)}function W(t,i){B(t,void 0,i)}function N(t,i,a){return S(t,i,a)}function ne(t){S(t,void 0,l)}let I=(()=>{let t=s&&s.queueMicrotask;if(typeof t=="function")return t;let i=g(void 0);return a=>S(i,a)})();function H(t,i,a){if(typeof t!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(t,i,a)}function F(t,i,a){try{return g(H(t,i,a))}catch(f){return w(f)}}let Ge=16384;class de{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(i){let a=this._back,f=a;a._elements.length===Ge-1&&(f={_elements:[],_next:void 0}),a._elements.push(i),f!==a&&(this._back=f,a._next=f),++this._size}shift(){let i=this._front,a=i,f=this._cursor,m=f+1,_=i._elements,b=_[f];return m===Ge&&(a=i._next,m=0),--this._size,this._cursor=m,i!==a&&(this._front=a),_[f]=void 0,b}forEach(i){let a=this._cursor,f=this._front,m=f._elements;for(;(a!==m.length||f._next!==void 0)&&!(a===m.length&&(f=f._next,m=f._elements,a=0,m.length===0));)i(m[a]),++a}peek(){let i=this._front,a=this._cursor;return i._elements[a]}}function Po(t,i){t._ownerReadableStream=i,i._reader=t,i._state==="readable"?ei(t):i._state==="closed"?Ju(t):Co(t,i._storedError)}function Zn(t,i){let a=t._ownerReadableStream;return Pe(a,i)}function We(t){t._ownerReadableStream._state==="readable"?ti(t,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):Ku(t,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),t._ownerReadableStream._reader=void 0,t._ownerReadableStream=void 0}function Rt(t){return new TypeError("Cannot "+t+" a stream using a released reader")}function ei(t){t._closedPromise=y((i,a)=>{t._closedPromise_resolve=i,t._closedPromise_reject=a})}function Co(t,i){ei(t),ti(t,i)}function Ju(t){ei(t),Ao(t)}function ti(t,i){t._closedPromise_reject!==void 0&&(ne(t._closedPromise),t._closedPromise_reject(i),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0)}function Ku(t,i){Co(t,i)}function Ao(t){t._closedPromise_resolve!==void 0&&(t._closedPromise_resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0)}let Oo=e("[[AbortSteps]]"),qo=e("[[ErrorSteps]]"),ri=e("[[CancelSteps]]"),ni=e("[[PullSteps]]"),Do=Number.isFinite||function(t){return typeof t=="number"&&isFinite(t)},Xu=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};function Zu(t){return typeof t=="object"||typeof t=="function"}function Fe(t,i){if(t!==void 0&&!Zu(t))throw new TypeError(`${i} is not an object.`)}function Ee(t,i){if(typeof t!="function")throw new TypeError(`${i} is not a function.`)}function el(t){return typeof t=="object"&&t!==null||typeof t=="function"}function Bo(t,i){if(!el(t))throw new TypeError(`${i} is not an object.`)}function Le(t,i,a){if(t===void 0)throw new TypeError(`Parameter ${i} is required in '${a}'.`)}function ii(t,i,a){if(t===void 0)throw new TypeError(`${i} is required in '${a}'.`)}function oi(t){return Number(t)}function Io(t){return t===0?0:t}function tl(t){return Io(Xu(t))}function ko(t,i){let f=Number.MAX_SAFE_INTEGER,m=Number(t);if(m=Io(m),!Do(m))throw new TypeError(`${i} is not a finite number`);if(m=tl(m),m<0||m>f)throw new TypeError(`${i} is outside the accepted range of ${0} to ${f}, inclusive`);return!Do(m)||m===0?0:m}function si(t,i){if(!et(t))throw new TypeError(`${i} is not a ReadableStream.`)}function Et(t){return new Vt(t)}function xo(t,i){t._reader._readRequests.push(i)}function ai(t,i,a){let m=t._reader._readRequests.shift();a?m._closeSteps():m._chunkSteps(i)}function Or(t){return t._reader._readRequests.length}function Mo(t){let i=t._reader;return!(i===void 0||!Je(i))}class Vt{constructor(i){if(Le(i,1,"ReadableStreamDefaultReader"),si(i,"First parameter"),tt(i))throw new TypeError("This stream has already been locked for exclusive reading by another reader");Po(this,i),this._readRequests=new de}get closed(){return Je(this)?this._closedPromise:w(qr("closed"))}cancel(i=void 0){return Je(this)?this._ownerReadableStream===void 0?w(Rt("cancel")):Zn(this,i):w(qr("cancel"))}read(){if(!Je(this))return w(qr("read"));if(this._ownerReadableStream===void 0)return w(Rt("read from"));let i,a,f=y((_,b)=>{i=_,a=b});return Qt(this,{_chunkSteps:_=>i({value:_,done:!1}),_closeSteps:()=>i({value:void 0,done:!0}),_errorSteps:_=>a(_)}),f}releaseLock(){if(!Je(this))throw qr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");We(this)}}}Object.defineProperties(Vt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Vt.prototype,e.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function Je(t){return!u(t)||!Object.prototype.hasOwnProperty.call(t,"_readRequests")?!1:t instanceof Vt}function Qt(t,i){let a=t._ownerReadableStream;a._disturbed=!0,a._state==="closed"?i._closeSteps():a._state==="errored"?i._errorSteps(a._storedError):a._readableStreamController[ni](i)}function qr(t){return new TypeError(`ReadableStreamDefaultReader.prototype.${t} can only be used on a ReadableStreamDefaultReader`)}let Wo=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class Fo{constructor(i,a){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=i,this._preventCancel=a}next(){let i=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?N(this._ongoingPromise,i,i):i(),this._ongoingPromise}return(i){let a=()=>this._returnSteps(i);return this._ongoingPromise?N(this._ongoingPromise,a,a):a()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let i=this._reader;if(i._ownerReadableStream===void 0)return w(Rt("iterate"));let a,f,m=y((b,v)=>{a=b,f=v});return Qt(i,{_chunkSteps:b=>{this._ongoingPromise=void 0,I(()=>a({value:b,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,We(i),a({value:void 0,done:!0})},_errorSteps:b=>{this._ongoingPromise=void 0,this._isFinished=!0,We(i),f(b)}}),m}_returnSteps(i){if(this._isFinished)return Promise.resolve({value:i,done:!0});this._isFinished=!0;let a=this._reader;if(a._ownerReadableStream===void 0)return w(Rt("finish iterating"));if(!this._preventCancel){let f=Zn(a,i);return We(a),N(f,()=>({value:i,done:!0}))}return We(a),g({value:i,done:!0})}}let Lo={next(){return $o(this)?this._asyncIteratorImpl.next():w(Uo("next"))},return(t){return $o(this)?this._asyncIteratorImpl.return(t):w(Uo("return"))}};Wo!==void 0&&Object.setPrototypeOf(Lo,Wo);function rl(t,i){let a=Et(t),f=new Fo(a,i),m=Object.create(Lo);return m._asyncIteratorImpl=f,m}function $o(t){if(!u(t)||!Object.prototype.hasOwnProperty.call(t,"_asyncIteratorImpl"))return!1;try{return t._asyncIteratorImpl instanceof Fo}catch{return!1}}function Uo(t){return new TypeError(`ReadableStreamAsyncIterator.${t} can only be used on a ReadableSteamAsyncIterator`)}let No=Number.isNaN||function(t){return t!==t};function Yt(t){return t.slice()}function jo(t,i,a,f,m){new Uint8Array(t).set(new Uint8Array(a,f,m),i)}function Vh(t){return t}function Dr(t){return!1}function zo(t,i,a){if(t.slice)return t.slice(i,a);let f=a-i,m=new ArrayBuffer(f);return jo(m,0,t,i,f),m}function nl(t){return!(typeof t!="number"||No(t)||t<0)}function Ho(t){let i=zo(t.buffer,t.byteOffset,t.byteOffset+t.byteLength);return new Uint8Array(i)}function ui(t){let i=t._queue.shift();return t._queueTotalSize-=i.size,t._queueTotalSize<0&&(t._queueTotalSize=0),i.value}function li(t,i,a){if(!nl(a)||a===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");t._queue.push({value:i,size:a}),t._queueTotalSize+=a}function il(t){return t._queue.peek().value}function Ke(t){t._queue=new de,t._queueTotalSize=0}class Gt{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!fi(this))throw mi("view");return this._view}respond(i){if(!fi(this))throw mi("respond");if(Le(i,1,"respond"),i=ko(i,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Dr(this._view.buffer),Mr(this._associatedReadableByteStreamController,i)}respondWithNewView(i){if(!fi(this))throw mi("respondWithNewView");if(Le(i,1,"respondWithNewView"),!ArrayBuffer.isView(i))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Dr(i.buffer),Wr(this._associatedReadableByteStreamController,i)}}Object.defineProperties(Gt.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Gt.prototype,e.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class Tt{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!ft(this))throw Kt("byobRequest");return hi(this)}get desiredSize(){if(!ft(this))throw Kt("desiredSize");return Zo(this)}close(){if(!ft(this))throw Kt("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let i=this._controlledReadableByteStream._state;if(i!=="readable")throw new TypeError(`The stream (in ${i} state) is not in the readable state and cannot be closed`);Jt(this)}enqueue(i){if(!ft(this))throw Kt("enqueue");if(Le(i,1,"enqueue"),!ArrayBuffer.isView(i))throw new TypeError("chunk must be an array buffer view");if(i.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(i.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let a=this._controlledReadableByteStream._state;if(a!=="readable")throw new TypeError(`The stream (in ${a} state) is not in the readable state and cannot be enqueued to`);xr(this,i)}error(i=void 0){if(!ft(this))throw Kt("error");Te(this,i)}[ri](i){Vo(this),Ke(this);let a=this._cancelAlgorithm(i);return kr(this),a}[ni](i){let a=this._controlledReadableByteStream;if(this._queueTotalSize>0){let m=this._queue.shift();this._queueTotalSize-=m.byteLength,Jo(this);let _=new Uint8Array(m.buffer,m.byteOffset,m.byteLength);i._chunkSteps(_);return}let f=this._autoAllocateChunkSize;if(f!==void 0){let m;try{m=new ArrayBuffer(f)}catch(b){i._errorSteps(b);return}let _={buffer:m,bufferByteLength:f,byteOffset:0,byteLength:f,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(_)}xo(a,i),ct(this)}}Object.defineProperties(Tt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Tt.prototype,e.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function ft(t){return!u(t)||!Object.prototype.hasOwnProperty.call(t,"_controlledReadableByteStream")?!1:t instanceof Tt}function fi(t){return!u(t)||!Object.prototype.hasOwnProperty.call(t,"_associatedReadableByteStreamController")?!1:t instanceof Gt}function ct(t){if(!ul(t))return;if(t._pulling){t._pullAgain=!0;return}t._pulling=!0;let a=t._pullAlgorithm();B(a,()=>{t._pulling=!1,t._pullAgain&&(t._pullAgain=!1,ct(t))},f=>{Te(t,f)})}function Vo(t){di(t),t._pendingPullIntos=new de}function ci(t,i){let a=!1;t._state==="closed"&&(a=!0);let f=Qo(i);i.readerType==="default"?ai(t,f,a):cl(t,f,a)}function Qo(t){let i=t.bytesFilled,a=t.elementSize;return new t.viewConstructor(t.buffer,t.byteOffset,i/a)}function Br(t,i,a,f){t._queue.push({buffer:i,byteOffset:a,byteLength:f}),t._queueTotalSize+=f}function Yo(t,i){let a=i.elementSize,f=i.bytesFilled-i.bytesFilled%a,m=Math.min(t._queueTotalSize,i.byteLength-i.bytesFilled),_=i.bytesFilled+m,b=_-_%a,v=m,C=!1;b>f&&(v=b-i.bytesFilled,C=!0);let O=t._queue;for(;v>0;){let k=O.peek(),x=Math.min(v,k.byteLength),Q=i.byteOffset+i.bytesFilled;jo(i.buffer,Q,k.buffer,k.byteOffset,x),k.byteLength===x?O.shift():(k.byteOffset+=x,k.byteLength-=x),t._queueTotalSize-=x,Go(t,x,i),v-=x}return C}function Go(t,i,a){a.bytesFilled+=i}function Jo(t){t._queueTotalSize===0&&t._closeRequested?(kr(t),or(t._controlledReadableByteStream)):ct(t)}function di(t){t._byobRequest!==null&&(t._byobRequest._associatedReadableByteStreamController=void 0,t._byobRequest._view=null,t._byobRequest=null)}function Ko(t){for(;t._pendingPullIntos.length>0;){if(t._queueTotalSize===0)return;let i=t._pendingPullIntos.peek();Yo(t,i)&&(Ir(t),ci(t._controlledReadableByteStream,i))}}function ol(t,i,a){let f=t._controlledReadableByteStream,m=1;i.constructor!==DataView&&(m=i.constructor.BYTES_PER_ELEMENT);let _=i.constructor,b=i.buffer,v={buffer:b,bufferByteLength:b.byteLength,byteOffset:i.byteOffset,byteLength:i.byteLength,bytesFilled:0,elementSize:m,viewConstructor:_,readerType:"byob"};if(t._pendingPullIntos.length>0){t._pendingPullIntos.push(v),rs(f,a);return}if(f._state==="closed"){let C=new _(v.buffer,v.byteOffset,0);a._closeSteps(C);return}if(t._queueTotalSize>0){if(Yo(t,v)){let C=Qo(v);Jo(t),a._chunkSteps(C);return}if(t._closeRequested){let C=new TypeError("Insufficient bytes to fill elements in the given buffer");Te(t,C),a._errorSteps(C);return}}t._pendingPullIntos.push(v),rs(f,a),ct(t)}function sl(t,i){let a=t._controlledReadableByteStream;if(pi(a))for(;ns(a)>0;){let f=Ir(t);ci(a,f)}}function al(t,i,a){if(Go(t,i,a),a.bytesFilled<a.elementSize)return;Ir(t);let f=a.bytesFilled%a.elementSize;if(f>0){let m=a.byteOffset+a.bytesFilled,_=zo(a.buffer,m-f,m);Br(t,_,0,_.byteLength)}a.bytesFilled-=f,ci(t._controlledReadableByteStream,a),Ko(t)}function Xo(t,i){let a=t._pendingPullIntos.peek();di(t),t._controlledReadableByteStream._state==="closed"?sl(t):al(t,i,a),ct(t)}function Ir(t){return t._pendingPullIntos.shift()}function ul(t){let i=t._controlledReadableByteStream;return i._state!=="readable"||t._closeRequested||!t._started?!1:!!(Mo(i)&&Or(i)>0||pi(i)&&ns(i)>0||Zo(t)>0)}function kr(t){t._pullAlgorithm=void 0,t._cancelAlgorithm=void 0}function Jt(t){let i=t._controlledReadableByteStream;if(!(t._closeRequested||i._state!=="readable")){if(t._queueTotalSize>0){t._closeRequested=!0;return}if(t._pendingPullIntos.length>0&&t._pendingPullIntos.peek().bytesFilled>0){let f=new TypeError("Insufficient bytes to fill elements in the given buffer");throw Te(t,f),f}kr(t),or(i)}}function xr(t,i){let a=t._controlledReadableByteStream;if(t._closeRequested||a._state!=="readable")return;let f=i.buffer,m=i.byteOffset,_=i.byteLength,b=f;if(t._pendingPullIntos.length>0){let v=t._pendingPullIntos.peek();Dr(v.buffer),v.buffer=v.buffer}if(di(t),Mo(a))if(Or(a)===0)Br(t,b,m,_);else{t._pendingPullIntos.length>0&&Ir(t);let v=new Uint8Array(b,m,_);ai(a,v,!1)}else pi(a)?(Br(t,b,m,_),Ko(t)):Br(t,b,m,_);ct(t)}function Te(t,i){let a=t._controlledReadableByteStream;a._state==="readable"&&(Vo(t),Ke(t),kr(t),Cs(a,i))}function hi(t){if(t._byobRequest===null&&t._pendingPullIntos.length>0){let i=t._pendingPullIntos.peek(),a=new Uint8Array(i.buffer,i.byteOffset+i.bytesFilled,i.byteLength-i.bytesFilled),f=Object.create(Gt.prototype);fl(f,t,a),t._byobRequest=f}return t._byobRequest}function Zo(t){let i=t._controlledReadableByteStream._state;return i==="errored"?null:i==="closed"?0:t._strategyHWM-t._queueTotalSize}function Mr(t,i){let a=t._pendingPullIntos.peek();if(t._controlledReadableByteStream._state==="closed"){if(i!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(i===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(a.bytesFilled+i>a.byteLength)throw new RangeError("bytesWritten out of range")}a.buffer=a.buffer,Xo(t,i)}function Wr(t,i){let a=t._pendingPullIntos.peek();if(t._controlledReadableByteStream._state==="closed"){if(i.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(i.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(a.byteOffset+a.bytesFilled!==i.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(a.bufferByteLength!==i.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(a.bytesFilled+i.byteLength>a.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let m=i.byteLength;a.buffer=i.buffer,Xo(t,m)}function es(t,i,a,f,m,_,b){i._controlledReadableByteStream=t,i._pullAgain=!1,i._pulling=!1,i._byobRequest=null,i._queue=i._queueTotalSize=void 0,Ke(i),i._closeRequested=!1,i._started=!1,i._strategyHWM=_,i._pullAlgorithm=f,i._cancelAlgorithm=m,i._autoAllocateChunkSize=b,i._pendingPullIntos=new de,t._readableStreamController=i;let v=a();B(g(v),()=>{i._started=!0,ct(i)},C=>{Te(i,C)})}function ll(t,i,a){let f=Object.create(Tt.prototype),m=()=>{},_=()=>g(void 0),b=()=>g(void 0);i.start!==void 0&&(m=()=>i.start(f)),i.pull!==void 0&&(_=()=>i.pull(f)),i.cancel!==void 0&&(b=C=>i.cancel(C));let v=i.autoAllocateChunkSize;if(v===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");es(t,f,m,_,b,a,v)}function fl(t,i,a){t._associatedReadableByteStreamController=i,t._view=a}function mi(t){return new TypeError(`ReadableStreamBYOBRequest.prototype.${t} can only be used on a ReadableStreamBYOBRequest`)}function Kt(t){return new TypeError(`ReadableByteStreamController.prototype.${t} can only be used on a ReadableByteStreamController`)}function ts(t){return new Xt(t)}function rs(t,i){t._reader._readIntoRequests.push(i)}function cl(t,i,a){let m=t._reader._readIntoRequests.shift();a?m._closeSteps(i):m._chunkSteps(i)}function ns(t){return t._reader._readIntoRequests.length}function pi(t){let i=t._reader;return!(i===void 0||!dt(i))}class Xt{constructor(i){if(Le(i,1,"ReadableStreamBYOBReader"),si(i,"First parameter"),tt(i))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!ft(i._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");Po(this,i),this._readIntoRequests=new de}get closed(){return dt(this)?this._closedPromise:w(Fr("closed"))}cancel(i=void 0){return dt(this)?this._ownerReadableStream===void 0?w(Rt("cancel")):Zn(this,i):w(Fr("cancel"))}read(i){if(!dt(this))return w(Fr("read"));if(!ArrayBuffer.isView(i))return w(new TypeError("view must be an array buffer view"));if(i.byteLength===0)return w(new TypeError("view must have non-zero byteLength"));if(i.buffer.byteLength===0)return w(new TypeError("view's buffer must have non-zero byteLength"));if(Dr(i.buffer),this._ownerReadableStream===void 0)return w(Rt("read from"));let a,f,m=y((b,v)=>{a=b,f=v});return is(this,i,{_chunkSteps:b=>a({value:b,done:!1}),_closeSteps:b=>a({value:b,done:!0}),_errorSteps:b=>f(b)}),m}releaseLock(){if(!dt(this))throw Fr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");We(this)}}}Object.defineProperties(Xt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Xt.prototype,e.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function dt(t){return!u(t)||!Object.prototype.hasOwnProperty.call(t,"_readIntoRequests")?!1:t instanceof Xt}function is(t,i,a){let f=t._ownerReadableStream;f._disturbed=!0,f._state==="errored"?a._errorSteps(f._storedError):ol(f._readableStreamController,i,a)}function Fr(t){return new TypeError(`ReadableStreamBYOBReader.prototype.${t} can only be used on a ReadableStreamBYOBReader`)}function Zt(t,i){let{highWaterMark:a}=t;if(a===void 0)return i;if(No(a)||a<0)throw new RangeError("Invalid highWaterMark");return a}function Lr(t){let{size:i}=t;return i||(()=>1)}function $r(t,i){Fe(t,i);let a=t==null?void 0:t.highWaterMark,f=t==null?void 0:t.size;return{highWaterMark:a===void 0?void 0:oi(a),size:f===void 0?void 0:dl(f,`${i} has member 'size' that`)}}function dl(t,i){return Ee(t,i),a=>oi(t(a))}function hl(t,i){Fe(t,i);let a=t==null?void 0:t.abort,f=t==null?void 0:t.close,m=t==null?void 0:t.start,_=t==null?void 0:t.type,b=t==null?void 0:t.write;return{abort:a===void 0?void 0:ml(a,t,`${i} has member 'abort' that`),close:f===void 0?void 0:pl(f,t,`${i} has member 'close' that`),start:m===void 0?void 0:yl(m,t,`${i} has member 'start' that`),write:b===void 0?void 0:_l(b,t,`${i} has member 'write' that`),type:_}}function ml(t,i,a){return Ee(t,a),f=>F(t,i,[f])}function pl(t,i,a){return Ee(t,a),()=>F(t,i,[])}function yl(t,i,a){return Ee(t,a),f=>H(t,i,[f])}function _l(t,i,a){return Ee(t,a),(f,m)=>F(t,i,[f,m])}function os(t,i){if(!Pt(t))throw new TypeError(`${i} is not a WritableStream.`)}function bl(t){if(typeof t!="object"||t===null)return!1;try{return typeof t.aborted=="boolean"}catch{return!1}}let gl=typeof AbortController=="function";function wl(){if(gl)return new AbortController}class er{constructor(i={},a={}){i===void 0?i=null:Bo(i,"First parameter");let f=$r(a,"Second parameter"),m=hl(i,"First parameter");if(as(this),m.type!==void 0)throw new RangeError("Invalid type is specified");let b=Lr(f),v=Zt(f,1);kl(this,m,v,b)}get locked(){if(!Pt(this))throw Hr("locked");return Ct(this)}abort(i=void 0){return Pt(this)?Ct(this)?w(new TypeError("Cannot abort a stream that already has a writer")):Ur(this,i):w(Hr("abort"))}close(){return Pt(this)?Ct(this)?w(new TypeError("Cannot close a stream that already has a writer")):Be(this)?w(new TypeError("Cannot close an already-closing stream")):us(this):w(Hr("close"))}getWriter(){if(!Pt(this))throw Hr("getWriter");return ss(this)}}Object.defineProperties(er.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(er.prototype,e.toStringTag,{value:"WritableStream",configurable:!0});function ss(t){return new tr(t)}function Sl(t,i,a,f,m=1,_=()=>1){let b=Object.create(er.prototype);as(b);let v=Object.create(At.prototype);return ms(b,v,t,i,a,f,m,_),b}function as(t){t._state="writable",t._storedError=void 0,t._writer=void 0,t._writableStreamController=void 0,t._writeRequests=new de,t._inFlightWriteRequest=void 0,t._closeRequest=void 0,t._inFlightCloseRequest=void 0,t._pendingAbortRequest=void 0,t._backpressure=!1}function Pt(t){return!u(t)||!Object.prototype.hasOwnProperty.call(t,"_writableStreamController")?!1:t instanceof er}function Ct(t){return t._writer!==void 0}function Ur(t,i){var a;if(t._state==="closed"||t._state==="errored")return g(void 0);t._writableStreamController._abortReason=i,(a=t._writableStreamController._abortController)===null||a===void 0||a.abort();let f=t._state;if(f==="closed"||f==="errored")return g(void 0);if(t._pendingAbortRequest!==void 0)return t._pendingAbortRequest._promise;let m=!1;f==="erroring"&&(m=!0,i=void 0);let _=y((b,v)=>{t._pendingAbortRequest={_promise:void 0,_resolve:b,_reject:v,_reason:i,_wasAlreadyErroring:m}});return t._pendingAbortRequest._promise=_,m||_i(t,i),_}function us(t){let i=t._state;if(i==="closed"||i==="errored")return w(new TypeError(`The stream (in ${i} state) is not in the writable state and cannot be closed`));let a=y((m,_)=>{let b={_resolve:m,_reject:_};t._closeRequest=b}),f=t._writer;return f!==void 0&&t._backpressure&&i==="writable"&&Pi(f),xl(t._writableStreamController),a}function vl(t){return y((a,f)=>{let m={_resolve:a,_reject:f};t._writeRequests.push(m)})}function yi(t,i){if(t._state==="writable"){_i(t,i);return}bi(t)}function _i(t,i){let a=t._writableStreamController;t._state="erroring",t._storedError=i;let f=t._writer;f!==void 0&&fs(f,i),!Cl(t)&&a._started&&bi(t)}function bi(t){t._state="errored",t._writableStreamController[qo]();let i=t._storedError;if(t._writeRequests.forEach(m=>{m._reject(i)}),t._writeRequests=new de,t._pendingAbortRequest===void 0){Nr(t);return}let a=t._pendingAbortRequest;if(t._pendingAbortRequest=void 0,a._wasAlreadyErroring){a._reject(i),Nr(t);return}let f=t._writableStreamController[Oo](a._reason);B(f,()=>{a._resolve(),Nr(t)},m=>{a._reject(m),Nr(t)})}function Rl(t){t._inFlightWriteRequest._resolve(void 0),t._inFlightWriteRequest=void 0}function El(t,i){t._inFlightWriteRequest._reject(i),t._inFlightWriteRequest=void 0,yi(t,i)}function Tl(t){t._inFlightCloseRequest._resolve(void 0),t._inFlightCloseRequest=void 0,t._state==="erroring"&&(t._storedError=void 0,t._pendingAbortRequest!==void 0&&(t._pendingAbortRequest._resolve(),t._pendingAbortRequest=void 0)),t._state="closed";let a=t._writer;a!==void 0&&bs(a)}function Pl(t,i){t._inFlightCloseRequest._reject(i),t._inFlightCloseRequest=void 0,t._pendingAbortRequest!==void 0&&(t._pendingAbortRequest._reject(i),t._pendingAbortRequest=void 0),yi(t,i)}function Be(t){return!(t._closeRequest===void 0&&t._inFlightCloseRequest===void 0)}function Cl(t){return!(t._inFlightWriteRequest===void 0&&t._inFlightCloseRequest===void 0)}function Al(t){t._inFlightCloseRequest=t._closeRequest,t._closeRequest=void 0}function Ol(t){t._inFlightWriteRequest=t._writeRequests.shift()}function Nr(t){t._closeRequest!==void 0&&(t._closeRequest._reject(t._storedError),t._closeRequest=void 0);let i=t._writer;i!==void 0&&Ei(i,t._storedError)}function gi(t,i){let a=t._writer;a!==void 0&&i!==t._backpressure&&(i?Nl(a):Pi(a)),t._backpressure=i}class tr{constructor(i){if(Le(i,1,"WritableStreamDefaultWriter"),os(i,"First parameter"),Ct(i))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=i,i._writer=this;let a=i._state;if(a==="writable")!Be(i)&&i._backpressure?Qr(this):gs(this),Vr(this);else if(a==="erroring")Ti(this,i._storedError),Vr(this);else if(a==="closed")gs(this),$l(this);else{let f=i._storedError;Ti(this,f),_s(this,f)}}get closed(){return ht(this)?this._closedPromise:w(mt("closed"))}get desiredSize(){if(!ht(this))throw mt("desiredSize");if(this._ownerWritableStream===void 0)throw rr("desiredSize");return Il(this)}get ready(){return ht(this)?this._readyPromise:w(mt("ready"))}abort(i=void 0){return ht(this)?this._ownerWritableStream===void 0?w(rr("abort")):ql(this,i):w(mt("abort"))}close(){if(!ht(this))return w(mt("close"));let i=this._ownerWritableStream;return i===void 0?w(rr("close")):Be(i)?w(new TypeError("Cannot close an already-closing stream")):ls(this)}releaseLock(){if(!ht(this))throw mt("releaseLock");this._ownerWritableStream!==void 0&&cs(this)}write(i=void 0){return ht(this)?this._ownerWritableStream===void 0?w(rr("write to")):ds(this,i):w(mt("write"))}}Object.defineProperties(tr.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(tr.prototype,e.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function ht(t){return!u(t)||!Object.prototype.hasOwnProperty.call(t,"_ownerWritableStream")?!1:t instanceof tr}function ql(t,i){let a=t._ownerWritableStream;return Ur(a,i)}function ls(t){let i=t._ownerWritableStream;return us(i)}function Dl(t){let i=t._ownerWritableStream,a=i._state;return Be(i)||a==="closed"?g(void 0):a==="errored"?w(i._storedError):ls(t)}function Bl(t,i){t._closedPromiseState==="pending"?Ei(t,i):Ul(t,i)}function fs(t,i){t._readyPromiseState==="pending"?ws(t,i):jl(t,i)}function Il(t){let i=t._ownerWritableStream,a=i._state;return a==="errored"||a==="erroring"?null:a==="closed"?0:ps(i._writableStreamController)}function cs(t){let i=t._ownerWritableStream,a=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");fs(t,a),Bl(t,a),i._writer=void 0,t._ownerWritableStream=void 0}function ds(t,i){let a=t._ownerWritableStream,f=a._writableStreamController,m=Ml(f,i);if(a!==t._ownerWritableStream)return w(rr("write to"));let _=a._state;if(_==="errored")return w(a._storedError);if(Be(a)||_==="closed")return w(new TypeError("The stream is closing or closed and cannot be written to"));if(_==="erroring")return w(a._storedError);let b=vl(a);return Wl(f,i,m),b}let hs={};class At{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!wi(this))throw Ri("abortReason");return this._abortReason}get signal(){if(!wi(this))throw Ri("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(i=void 0){if(!wi(this))throw Ri("error");this._controlledWritableStream._state==="writable"&&ys(this,i)}[Oo](i){let a=this._abortAlgorithm(i);return jr(this),a}[qo](){Ke(this)}}Object.defineProperties(At.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(At.prototype,e.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function wi(t){return!u(t)||!Object.prototype.hasOwnProperty.call(t,"_controlledWritableStream")?!1:t instanceof At}function ms(t,i,a,f,m,_,b,v){i._controlledWritableStream=t,t._writableStreamController=i,i._queue=void 0,i._queueTotalSize=void 0,Ke(i),i._abortReason=void 0,i._abortController=wl(),i._started=!1,i._strategySizeAlgorithm=v,i._strategyHWM=b,i._writeAlgorithm=f,i._closeAlgorithm=m,i._abortAlgorithm=_;let C=vi(i);gi(t,C);let O=a(),k=g(O);B(k,()=>{i._started=!0,zr(i)},x=>{i._started=!0,yi(t,x)})}function kl(t,i,a,f){let m=Object.create(At.prototype),_=()=>{},b=()=>g(void 0),v=()=>g(void 0),C=()=>g(void 0);i.start!==void 0&&(_=()=>i.start(m)),i.write!==void 0&&(b=O=>i.write(O,m)),i.close!==void 0&&(v=()=>i.close()),i.abort!==void 0&&(C=O=>i.abort(O)),ms(t,m,_,b,v,C,a,f)}function jr(t){t._writeAlgorithm=void 0,t._closeAlgorithm=void 0,t._abortAlgorithm=void 0,t._strategySizeAlgorithm=void 0}function xl(t){li(t,hs,0),zr(t)}function Ml(t,i){try{return t._strategySizeAlgorithm(i)}catch(a){return Si(t,a),1}}function ps(t){return t._strategyHWM-t._queueTotalSize}function Wl(t,i,a){try{li(t,i,a)}catch(m){Si(t,m);return}let f=t._controlledWritableStream;if(!Be(f)&&f._state==="writable"){let m=vi(t);gi(f,m)}zr(t)}function zr(t){let i=t._controlledWritableStream;if(!t._started||i._inFlightWriteRequest!==void 0)return;if(i._state==="erroring"){bi(i);return}if(t._queue.length===0)return;let f=il(t);f===hs?Fl(t):Ll(t,f)}function Si(t,i){t._controlledWritableStream._state==="writable"&&ys(t,i)}function Fl(t){let i=t._controlledWritableStream;Al(i),ui(t);let a=t._closeAlgorithm();jr(t),B(a,()=>{Tl(i)},f=>{Pl(i,f)})}function Ll(t,i){let a=t._controlledWritableStream;Ol(a);let f=t._writeAlgorithm(i);B(f,()=>{Rl(a);let m=a._state;if(ui(t),!Be(a)&&m==="writable"){let _=vi(t);gi(a,_)}zr(t)},m=>{a._state==="writable"&&jr(t),El(a,m)})}function vi(t){return ps(t)<=0}function ys(t,i){let a=t._controlledWritableStream;jr(t),_i(a,i)}function Hr(t){return new TypeError(`WritableStream.prototype.${t} can only be used on a WritableStream`)}function Ri(t){return new TypeError(`WritableStreamDefaultController.prototype.${t} can only be used on a WritableStreamDefaultController`)}function mt(t){return new TypeError(`WritableStreamDefaultWriter.prototype.${t} can only be used on a WritableStreamDefaultWriter`)}function rr(t){return new TypeError("Cannot "+t+" a stream using a released writer")}function Vr(t){t._closedPromise=y((i,a)=>{t._closedPromise_resolve=i,t._closedPromise_reject=a,t._closedPromiseState="pending"})}function _s(t,i){Vr(t),Ei(t,i)}function $l(t){Vr(t),bs(t)}function Ei(t,i){t._closedPromise_reject!==void 0&&(ne(t._closedPromise),t._closedPromise_reject(i),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="rejected")}function Ul(t,i){_s(t,i)}function bs(t){t._closedPromise_resolve!==void 0&&(t._closedPromise_resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="resolved")}function Qr(t){t._readyPromise=y((i,a)=>{t._readyPromise_resolve=i,t._readyPromise_reject=a}),t._readyPromiseState="pending"}function Ti(t,i){Qr(t),ws(t,i)}function gs(t){Qr(t),Pi(t)}function ws(t,i){t._readyPromise_reject!==void 0&&(ne(t._readyPromise),t._readyPromise_reject(i),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="rejected")}function Nl(t){Qr(t)}function jl(t,i){Ti(t,i)}function Pi(t){t._readyPromise_resolve!==void 0&&(t._readyPromise_resolve(void 0),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="fulfilled")}let Ss=typeof DOMException<"u"?DOMException:void 0;function zl(t){if(!(typeof t=="function"||typeof t=="object"))return!1;try{return new t,!0}catch{return!1}}function Hl(){let t=function(a,f){this.message=a||"",this.name=f||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return t.prototype=Object.create(Error.prototype),Object.defineProperty(t.prototype,"constructor",{value:t,writable:!0,configurable:!0}),t}let Vl=zl(Ss)?Ss:Hl();function vs(t,i,a,f,m,_){let b=Et(t),v=ss(i);t._disturbed=!0;let C=!1,O=g(void 0);return y((k,x)=>{let Q;if(_!==void 0){if(Q=()=>{let P=new Vl("Aborted","AbortError"),A=[];f||A.push(()=>i._state==="writable"?Ur(i,P):g(void 0)),m||A.push(()=>t._state==="readable"?Pe(t,P):g(void 0)),ie(()=>Promise.all(A.map($=>$())),!0,P)},_.aborted){Q();return}_.addEventListener("abort",Q)}function Ce(){return y((P,A)=>{function $(he){he?P():S(Dt(),$,A)}$(!1)})}function Dt(){return C?g(!0):S(v._readyPromise,()=>y((P,A)=>{Qt(b,{_chunkSteps:$=>{O=S(ds(v,$),void 0,n),P(!1)},_closeSteps:()=>P(!0),_errorSteps:A})}))}if($e(t,b._closedPromise,P=>{f?be(!0,P):ie(()=>Ur(i,P),!0,P)}),$e(i,v._closedPromise,P=>{m?be(!0,P):ie(()=>Pe(t,P),!0,P)}),Z(t,b._closedPromise,()=>{a?be():ie(()=>Dl(v))}),Be(i)||i._state==="closed"){let P=new TypeError("the destination writable stream closed before all data could be piped to it");m?be(!0,P):ie(()=>Pe(t,P),!0,P)}ne(Ce());function rt(){let P=O;return S(O,()=>P!==O?rt():void 0)}function $e(P,A,$){P._state==="errored"?$(P._storedError):W(A,$)}function Z(P,A,$){P._state==="closed"?$():M(A,$)}function ie(P,A,$){if(C)return;C=!0,i._state==="writable"&&!Be(i)?M(rt(),he):he();function he(){B(P(),()=>Ue(A,$),Bt=>Ue(!0,Bt))}}function be(P,A){C||(C=!0,i._state==="writable"&&!Be(i)?M(rt(),()=>Ue(P,A)):Ue(P,A))}function Ue(P,A){cs(v),We(b),_!==void 0&&_.removeEventListener("abort",Q),P?x(A):k(void 0)}})}class Ot{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Yr(this))throw Kr("desiredSize");return Ci(this)}close(){if(!Yr(this))throw Kr("close");if(!qt(this))throw new TypeError("The stream is not in a state that permits close");ir(this)}enqueue(i=void 0){if(!Yr(this))throw Kr("enqueue");if(!qt(this))throw new TypeError("The stream is not in a state that permits enqueue");return Jr(this,i)}error(i=void 0){if(!Yr(this))throw Kr("error");Xe(this,i)}[ri](i){Ke(this);let a=this._cancelAlgorithm(i);return Gr(this),a}[ni](i){let a=this._controlledReadableStream;if(this._queue.length>0){let f=ui(this);this._closeRequested&&this._queue.length===0?(Gr(this),or(a)):nr(this),i._chunkSteps(f)}else xo(a,i),nr(this)}}Object.defineProperties(Ot.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Ot.prototype,e.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function Yr(t){return!u(t)||!Object.prototype.hasOwnProperty.call(t,"_controlledReadableStream")?!1:t instanceof Ot}function nr(t){if(!Rs(t))return;if(t._pulling){t._pullAgain=!0;return}t._pulling=!0;let a=t._pullAlgorithm();B(a,()=>{t._pulling=!1,t._pullAgain&&(t._pullAgain=!1,nr(t))},f=>{Xe(t,f)})}function Rs(t){let i=t._controlledReadableStream;return!qt(t)||!t._started?!1:!!(tt(i)&&Or(i)>0||Ci(t)>0)}function Gr(t){t._pullAlgorithm=void 0,t._cancelAlgorithm=void 0,t._strategySizeAlgorithm=void 0}function ir(t){if(!qt(t))return;let i=t._controlledReadableStream;t._closeRequested=!0,t._queue.length===0&&(Gr(t),or(i))}function Jr(t,i){if(!qt(t))return;let a=t._controlledReadableStream;if(tt(a)&&Or(a)>0)ai(a,i,!1);else{let f;try{f=t._strategySizeAlgorithm(i)}catch(m){throw Xe(t,m),m}try{li(t,i,f)}catch(m){throw Xe(t,m),m}}nr(t)}function Xe(t,i){let a=t._controlledReadableStream;a._state==="readable"&&(Ke(t),Gr(t),Cs(a,i))}function Ci(t){let i=t._controlledReadableStream._state;return i==="errored"?null:i==="closed"?0:t._strategyHWM-t._queueTotalSize}function Ql(t){return!Rs(t)}function qt(t){let i=t._controlledReadableStream._state;return!t._closeRequested&&i==="readable"}function Es(t,i,a,f,m,_,b){i._controlledReadableStream=t,i._queue=void 0,i._queueTotalSize=void 0,Ke(i),i._started=!1,i._closeRequested=!1,i._pullAgain=!1,i._pulling=!1,i._strategySizeAlgorithm=b,i._strategyHWM=_,i._pullAlgorithm=f,i._cancelAlgorithm=m,t._readableStreamController=i;let v=a();B(g(v),()=>{i._started=!0,nr(i)},C=>{Xe(i,C)})}function Yl(t,i,a,f){let m=Object.create(Ot.prototype),_=()=>{},b=()=>g(void 0),v=()=>g(void 0);i.start!==void 0&&(_=()=>i.start(m)),i.pull!==void 0&&(b=()=>i.pull(m)),i.cancel!==void 0&&(v=C=>i.cancel(C)),Es(t,m,_,b,v,a,f)}function Kr(t){return new TypeError(`ReadableStreamDefaultController.prototype.${t} can only be used on a ReadableStreamDefaultController`)}function Gl(t,i){return ft(t._readableStreamController)?Kl(t):Jl(t)}function Jl(t,i){let a=Et(t),f=!1,m=!1,_=!1,b=!1,v,C,O,k,x,Q=y(Z=>{x=Z});function Ce(){return f?(m=!0,g(void 0)):(f=!0,Qt(a,{_chunkSteps:ie=>{I(()=>{m=!1;let be=ie,Ue=ie;_||Jr(O._readableStreamController,be),b||Jr(k._readableStreamController,Ue),f=!1,m&&Ce()})},_closeSteps:()=>{f=!1,_||ir(O._readableStreamController),b||ir(k._readableStreamController),(!_||!b)&&x(void 0)},_errorSteps:()=>{f=!1}}),g(void 0))}function Dt(Z){if(_=!0,v=Z,b){let ie=Yt([v,C]),be=Pe(t,ie);x(be)}return Q}function rt(Z){if(b=!0,C=Z,_){let ie=Yt([v,C]),be=Pe(t,ie);x(be)}return Q}function $e(){}return O=Ai($e,Ce,Dt),k=Ai($e,Ce,rt),W(a._closedPromise,Z=>{Xe(O._readableStreamController,Z),Xe(k._readableStreamController,Z),(!_||!b)&&x(void 0)}),[O,k]}function Kl(t){let i=Et(t),a=!1,f=!1,m=!1,_=!1,b=!1,v,C,O,k,x,Q=y(P=>{x=P});function Ce(P){W(P._closedPromise,A=>{P===i&&(Te(O._readableStreamController,A),Te(k._readableStreamController,A),(!_||!b)&&x(void 0))})}function Dt(){dt(i)&&(We(i),i=Et(t),Ce(i)),Qt(i,{_chunkSteps:A=>{I(()=>{f=!1,m=!1;let $=A,he=A;if(!_&&!b)try{he=Ho(A)}catch(Bt){Te(O._readableStreamController,Bt),Te(k._readableStreamController,Bt),x(Pe(t,Bt));return}_||xr(O._readableStreamController,$),b||xr(k._readableStreamController,he),a=!1,f?$e():m&&Z()})},_closeSteps:()=>{a=!1,_||Jt(O._readableStreamController),b||Jt(k._readableStreamController),O._readableStreamController._pendingPullIntos.length>0&&Mr(O._readableStreamController,0),k._readableStreamController._pendingPullIntos.length>0&&Mr(k._readableStreamController,0),(!_||!b)&&x(void 0)},_errorSteps:()=>{a=!1}})}function rt(P,A){Je(i)&&(We(i),i=ts(t),Ce(i));let $=A?k:O,he=A?O:k;is(i,P,{_chunkSteps:It=>{I(()=>{f=!1,m=!1;let kt=A?b:_;if(A?_:b)kt||Wr($._readableStreamController,It);else{let $s;try{$s=Ho(It)}catch(qi){Te($._readableStreamController,qi),Te(he._readableStreamController,qi),x(Pe(t,qi));return}kt||Wr($._readableStreamController,It),xr(he._readableStreamController,$s)}a=!1,f?$e():m&&Z()})},_closeSteps:It=>{a=!1;let kt=A?b:_,an=A?_:b;kt||Jt($._readableStreamController),an||Jt(he._readableStreamController),It!==void 0&&(kt||Wr($._readableStreamController,It),!an&&he._readableStreamController._pendingPullIntos.length>0&&Mr(he._readableStreamController,0)),(!kt||!an)&&x(void 0)},_errorSteps:()=>{a=!1}})}function $e(){if(a)return f=!0,g(void 0);a=!0;let P=hi(O._readableStreamController);return P===null?Dt():rt(P._view,!1),g(void 0)}function Z(){if(a)return m=!0,g(void 0);a=!0;let P=hi(k._readableStreamController);return P===null?Dt():rt(P._view,!0),g(void 0)}function ie(P){if(_=!0,v=P,b){let A=Yt([v,C]),$=Pe(t,A);x($)}return Q}function be(P){if(b=!0,C=P,_){let A=Yt([v,C]),$=Pe(t,A);x($)}return Q}function Ue(){}return O=Ps(Ue,$e,ie),k=Ps(Ue,Z,be),Ce(i),[O,k]}function Xl(t,i){Fe(t,i);let a=t,f=a==null?void 0:a.autoAllocateChunkSize,m=a==null?void 0:a.cancel,_=a==null?void 0:a.pull,b=a==null?void 0:a.start,v=a==null?void 0:a.type;return{autoAllocateChunkSize:f===void 0?void 0:ko(f,`${i} has member 'autoAllocateChunkSize' that`),cancel:m===void 0?void 0:Zl(m,a,`${i} has member 'cancel' that`),pull:_===void 0?void 0:ef(_,a,`${i} has member 'pull' that`),start:b===void 0?void 0:tf(b,a,`${i} has member 'start' that`),type:v===void 0?void 0:rf(v,`${i} has member 'type' that`)}}function Zl(t,i,a){return Ee(t,a),f=>F(t,i,[f])}function ef(t,i,a){return Ee(t,a),f=>F(t,i,[f])}function tf(t,i,a){return Ee(t,a),f=>H(t,i,[f])}function rf(t,i){if(t=`${t}`,t!=="bytes")throw new TypeError(`${i} '${t}' is not a valid enumeration value for ReadableStreamType`);return t}function nf(t,i){Fe(t,i);let a=t==null?void 0:t.mode;return{mode:a===void 0?void 0:of(a,`${i} has member 'mode' that`)}}function of(t,i){if(t=`${t}`,t!=="byob")throw new TypeError(`${i} '${t}' is not a valid enumeration value for ReadableStreamReaderMode`);return t}function sf(t,i){Fe(t,i);let a=t==null?void 0:t.preventCancel;return{preventCancel:Boolean(a)}}function Ts(t,i){Fe(t,i);let a=t==null?void 0:t.preventAbort,f=t==null?void 0:t.preventCancel,m=t==null?void 0:t.preventClose,_=t==null?void 0:t.signal;return _!==void 0&&af(_,`${i} has member 'signal' that`),{preventAbort:Boolean(a),preventCancel:Boolean(f),preventClose:Boolean(m),signal:_}}function af(t,i){if(!bl(t))throw new TypeError(`${i} is not an AbortSignal.`)}function uf(t,i){Fe(t,i);let a=t==null?void 0:t.readable;ii(a,"readable","ReadableWritablePair"),si(a,`${i} has member 'readable' that`);let f=t==null?void 0:t.writable;return ii(f,"writable","ReadableWritablePair"),os(f,`${i} has member 'writable' that`),{readable:a,writable:f}}class Ze{constructor(i={},a={}){i===void 0?i=null:Bo(i,"First parameter");let f=$r(a,"Second parameter"),m=Xl(i,"First parameter");if(Oi(this),m.type==="bytes"){if(f.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let _=Zt(f,0);ll(this,m,_)}else{let _=Lr(f),b=Zt(f,1);Yl(this,m,b,_)}}get locked(){if(!et(this))throw pt("locked");return tt(this)}cancel(i=void 0){return et(this)?tt(this)?w(new TypeError("Cannot cancel a stream that already has a reader")):Pe(this,i):w(pt("cancel"))}getReader(i=void 0){if(!et(this))throw pt("getReader");return nf(i,"First parameter").mode===void 0?Et(this):ts(this)}pipeThrough(i,a={}){if(!et(this))throw pt("pipeThrough");Le(i,1,"pipeThrough");let f=uf(i,"First parameter"),m=Ts(a,"Second parameter");if(tt(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(Ct(f.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let _=vs(this,f.writable,m.preventClose,m.preventAbort,m.preventCancel,m.signal);return ne(_),f.readable}pipeTo(i,a={}){if(!et(this))return w(pt("pipeTo"));if(i===void 0)return w("Parameter 1 is required in 'pipeTo'.");if(!Pt(i))return w(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let f;try{f=Ts(a,"Second parameter")}catch(m){return w(m)}return tt(this)?w(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):Ct(i)?w(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):vs(this,i,f.preventClose,f.preventAbort,f.preventCancel,f.signal)}tee(){if(!et(this))throw pt("tee");let i=Gl(this);return Yt(i)}values(i=void 0){if(!et(this))throw pt("values");let a=sf(i,"First parameter");return rl(this,a.preventCancel)}}Object.defineProperties(Ze.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Ze.prototype,e.toStringTag,{value:"ReadableStream",configurable:!0}),typeof e.asyncIterator=="symbol"&&Object.defineProperty(Ze.prototype,e.asyncIterator,{value:Ze.prototype.values,writable:!0,configurable:!0});function Ai(t,i,a,f=1,m=()=>1){let _=Object.create(Ze.prototype);Oi(_);let b=Object.create(Ot.prototype);return Es(_,b,t,i,a,f,m),_}function Ps(t,i,a){let f=Object.create(Ze.prototype);Oi(f);let m=Object.create(Tt.prototype);return es(f,m,t,i,a,0,void 0),f}function Oi(t){t._state="readable",t._reader=void 0,t._storedError=void 0,t._disturbed=!1}function et(t){return!u(t)||!Object.prototype.hasOwnProperty.call(t,"_readableStreamController")?!1:t instanceof Ze}function tt(t){return t._reader!==void 0}function Pe(t,i){if(t._disturbed=!0,t._state==="closed")return g(void 0);if(t._state==="errored")return w(t._storedError);or(t);let a=t._reader;a!==void 0&&dt(a)&&(a._readIntoRequests.forEach(m=>{m._closeSteps(void 0)}),a._readIntoRequests=new de);let f=t._readableStreamController[ri](i);return N(f,n)}function or(t){t._state="closed";let i=t._reader;i!==void 0&&(Ao(i),Je(i)&&(i._readRequests.forEach(a=>{a._closeSteps()}),i._readRequests=new de))}function Cs(t,i){t._state="errored",t._storedError=i;let a=t._reader;a!==void 0&&(ti(a,i),Je(a)?(a._readRequests.forEach(f=>{f._errorSteps(i)}),a._readRequests=new de):(a._readIntoRequests.forEach(f=>{f._errorSteps(i)}),a._readIntoRequests=new de))}function pt(t){return new TypeError(`ReadableStream.prototype.${t} can only be used on a ReadableStream`)}function As(t,i){Fe(t,i);let a=t==null?void 0:t.highWaterMark;return ii(a,"highWaterMark","QueuingStrategyInit"),{highWaterMark:oi(a)}}let Os=t=>t.byteLength;try{Object.defineProperty(Os,"name",{value:"size",configurable:!0})}catch{}class Xr{constructor(i){Le(i,1,"ByteLengthQueuingStrategy"),i=As(i,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=i.highWaterMark}get highWaterMark(){if(!Ds(this))throw qs("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!Ds(this))throw qs("size");return Os}}Object.defineProperties(Xr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Xr.prototype,e.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function qs(t){return new TypeError(`ByteLengthQueuingStrategy.prototype.${t} can only be used on a ByteLengthQueuingStrategy`)}function Ds(t){return!u(t)||!Object.prototype.hasOwnProperty.call(t,"_byteLengthQueuingStrategyHighWaterMark")?!1:t instanceof Xr}let Bs=()=>1;try{Object.defineProperty(Bs,"name",{value:"size",configurable:!0})}catch{}class Zr{constructor(i){Le(i,1,"CountQueuingStrategy"),i=As(i,"First parameter"),this._countQueuingStrategyHighWaterMark=i.highWaterMark}get highWaterMark(){if(!ks(this))throw Is("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!ks(this))throw Is("size");return Bs}}Object.defineProperties(Zr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(Zr.prototype,e.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function Is(t){return new TypeError(`CountQueuingStrategy.prototype.${t} can only be used on a CountQueuingStrategy`)}function ks(t){return!u(t)||!Object.prototype.hasOwnProperty.call(t,"_countQueuingStrategyHighWaterMark")?!1:t instanceof Zr}function lf(t,i){Fe(t,i);let a=t==null?void 0:t.flush,f=t==null?void 0:t.readableType,m=t==null?void 0:t.start,_=t==null?void 0:t.transform,b=t==null?void 0:t.writableType;return{flush:a===void 0?void 0:ff(a,t,`${i} has member 'flush' that`),readableType:f,start:m===void 0?void 0:cf(m,t,`${i} has member 'start' that`),transform:_===void 0?void 0:df(_,t,`${i} has member 'transform' that`),writableType:b}}function ff(t,i,a){return Ee(t,a),f=>F(t,i,[f])}function cf(t,i,a){return Ee(t,a),f=>H(t,i,[f])}function df(t,i,a){return Ee(t,a),(f,m)=>F(t,i,[f,m])}class en{constructor(i={},a={},f={}){i===void 0&&(i=null);let m=$r(a,"Second parameter"),_=$r(f,"Third parameter"),b=lf(i,"First parameter");if(b.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(b.writableType!==void 0)throw new RangeError("Invalid writableType specified");let v=Zt(_,0),C=Lr(_),O=Zt(m,1),k=Lr(m),x,Q=y(Ce=>{x=Ce});hf(this,Q,O,k,v,C),pf(this,b),b.start!==void 0?x(b.start(this._transformStreamController)):x(void 0)}get readable(){if(!xs(this))throw Ls("readable");return this._readable}get writable(){if(!xs(this))throw Ls("writable");return this._writable}}Object.defineProperties(en.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(en.prototype,e.toStringTag,{value:"TransformStream",configurable:!0});function hf(t,i,a,f,m,_){function b(){return i}function v(Q){return bf(t,Q)}function C(Q){return gf(t,Q)}function O(){return wf(t)}t._writable=Sl(b,v,O,C,a,f);function k(){return Sf(t)}function x(Q){return rn(t,Q),g(void 0)}t._readable=Ai(b,k,x,m,_),t._backpressure=void 0,t._backpressureChangePromise=void 0,t._backpressureChangePromise_resolve=void 0,nn(t,!0),t._transformStreamController=void 0}function xs(t){return!u(t)||!Object.prototype.hasOwnProperty.call(t,"_transformStreamController")?!1:t instanceof en}function tn(t,i){Xe(t._readable._readableStreamController,i),rn(t,i)}function rn(t,i){Ms(t._transformStreamController),Si(t._writable._writableStreamController,i),t._backpressure&&nn(t,!1)}function nn(t,i){t._backpressureChangePromise!==void 0&&t._backpressureChangePromise_resolve(),t._backpressureChangePromise=y(a=>{t._backpressureChangePromise_resolve=a}),t._backpressure=i}class sr{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!on(this))throw sn("desiredSize");let i=this._controlledTransformStream._readable._readableStreamController;return Ci(i)}enqueue(i=void 0){if(!on(this))throw sn("enqueue");Ws(this,i)}error(i=void 0){if(!on(this))throw sn("error");yf(this,i)}terminate(){if(!on(this))throw sn("terminate");_f(this)}}Object.defineProperties(sr.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof e.toStringTag=="symbol"&&Object.defineProperty(sr.prototype,e.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function on(t){return!u(t)||!Object.prototype.hasOwnProperty.call(t,"_controlledTransformStream")?!1:t instanceof sr}function mf(t,i,a,f){i._controlledTransformStream=t,t._transformStreamController=i,i._transformAlgorithm=a,i._flushAlgorithm=f}function pf(t,i){let a=Object.create(sr.prototype),f=_=>{try{return Ws(a,_),g(void 0)}catch(b){return w(b)}},m=()=>g(void 0);i.transform!==void 0&&(f=_=>i.transform(_,a)),i.flush!==void 0&&(m=()=>i.flush(a)),mf(t,a,f,m)}function Ms(t){t._transformAlgorithm=void 0,t._flushAlgorithm=void 0}function Ws(t,i){let a=t._controlledTransformStream,f=a._readable._readableStreamController;if(!qt(f))throw new TypeError("Readable side is not in a state that permits enqueue");try{Jr(f,i)}catch(_){throw rn(a,_),a._readable._storedError}Ql(f)!==a._backpressure&&nn(a,!0)}function yf(t,i){tn(t._controlledTransformStream,i)}function Fs(t,i){let a=t._transformAlgorithm(i);return N(a,void 0,f=>{throw tn(t._controlledTransformStream,f),f})}function _f(t){let i=t._controlledTransformStream,a=i._readable._readableStreamController;ir(a);let f=new TypeError("TransformStream terminated");rn(i,f)}function bf(t,i){let a=t._transformStreamController;if(t._backpressure){let f=t._backpressureChangePromise;return N(f,()=>{let m=t._writable;if(m._state==="erroring")throw m._storedError;return Fs(a,i)})}return Fs(a,i)}function gf(t,i){return tn(t,i),g(void 0)}function wf(t){let i=t._readable,a=t._transformStreamController,f=a._flushAlgorithm();return Ms(a),N(f,()=>{if(i._state==="errored")throw i._storedError;ir(i._readableStreamController)},m=>{throw tn(t,m),i._storedError})}function Sf(t){return nn(t,!1),t._backpressureChangePromise}function sn(t){return new TypeError(`TransformStreamDefaultController.prototype.${t} can only be used on a TransformStreamDefaultController`)}function Ls(t){return new TypeError(`TransformStream.prototype.${t} can only be used on a TransformStream`)}r.ByteLengthQueuingStrategy=Xr,r.CountQueuingStrategy=Zr,r.ReadableByteStreamController=Tt,r.ReadableStream=Ze,r.ReadableStreamBYOBReader=Xt,r.ReadableStreamBYOBRequest=Gt,r.ReadableStreamDefaultController=Ot,r.ReadableStreamDefaultReader=Vt,r.TransformStream=en,r.TransformStreamDefaultController=sr,r.WritableStream=er,r.WritableStreamDefaultController=At,r.WritableStreamDefaultWriter=tr,Object.defineProperty(r,"__esModule",{value:!0})})});var yu=q(()=>{if(!globalThis.ReadableStream)try{let r=require("node:process"),{emitWarning:e}=r;try{r.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),r.emitWarning=e}catch(n){throw r.emitWarning=e,n}}catch{Object.assign(globalThis,pu())}try{let{Blob:r}=require("buffer");r&&!r.prototype.stream&&(r.prototype.stream=function(n){let o=0,s=this;return new ReadableStream({type:"bytes",async pull(u){let h=await s.slice(o,Math.min(s.size,o+65536)).arrayBuffer();o+=h.byteLength,u.enqueue(new Uint8Array(h)),o===s.size&&u.close()}})})}catch{}});async function*mo(r,e=!0){for(let n of r)if("stream"in n)yield*n.stream();else if(ArrayBuffer.isView(n))if(e){let o=n.byteOffset,s=n.byteOffset+n.byteLength;for(;o!==s;){let u=Math.min(s-o,_u),l=n.buffer.slice(o,o+u);o+=l.byteLength,yield new Uint8Array(l)}}else yield n;else{let o=0,s=n;for(;o!==s.size;){let l=await s.slice(o,Math.min(s.size,o+_u)).arrayBuffer();o+=l.byteLength,yield new Uint8Array(l)}}}var Lm,_u,bu,Eh,He,wr=ar(()=>{Lm=ee(yu(),1);_u=65536;bu=class po{#e=[];#t="";#r=0;#n="transparent";constructor(e=[],n={}){if(typeof e!="object"||e===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof e[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof n!="object"&&typeof n!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");n===null&&(n={});let o=new TextEncoder;for(let u of e){let l;ArrayBuffer.isView(u)?l=new Uint8Array(u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength)):u instanceof ArrayBuffer?l=new Uint8Array(u.slice(0)):u instanceof po?l=u:l=o.encode(`${u}`),this.#r+=ArrayBuffer.isView(l)?l.byteLength:l.size,this.#e.push(l)}this.#n=`${n.endings===void 0?"transparent":n.endings}`;let s=n.type===void 0?"":String(n.type);this.#t=/^[\x20-\x7E]*$/.test(s)?s:""}get size(){return this.#r}get type(){return this.#t}async text(){let e=new TextDecoder,n="";for await(let o of mo(this.#e,!1))n+=e.decode(o,{stream:!0});return n+=e.decode(),n}async arrayBuffer(){let e=new Uint8Array(this.size),n=0;for await(let o of mo(this.#e,!1))e.set(o,n),n+=o.length;return e.buffer}stream(){let e=mo(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(n){let o=await e.next();o.done?n.close():n.enqueue(o.value)},async cancel(){await e.return()}})}slice(e=0,n=this.size,o=""){let{size:s}=this,u=e<0?Math.max(s+e,0):Math.min(e,s),l=n<0?Math.max(s+n,0):Math.min(n,s),h=Math.max(l-u,0),c=this.#e,d=[],p=0;for(let g of c){if(p>=h)break;let w=ArrayBuffer.isView(g)?g.byteLength:g.size;if(u&&w<=u)u-=w,l-=w;else{let S;ArrayBuffer.isView(g)?(S=g.subarray(u,Math.min(w,l)),p+=S.byteLength):(S=g.slice(u,Math.min(w,l)),p+=S.size),l-=w,d.push(S),u=0}}let y=new po([],{type:String(o).toLowerCase()});return y.#r=h,y.#e=d,y}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](e){return e&&typeof e=="object"&&typeof e.constructor=="function"&&(typeof e.stream=="function"||typeof e.arrayBuffer=="function")&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}};Object.defineProperties(bu.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});Eh=bu,He=Eh});var Th,Ph,Nt,yo=ar(()=>{wr();Th=class extends He{#e=0;#t="";constructor(e,n,o={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(e,o),o===null&&(o={});let s=o.lastModified===void 0?Date.now():Number(o.lastModified);Number.isNaN(s)||(this.#e=s),this.#t=String(n)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](e){return!!e&&e instanceof He&&/^(File)$/.test(e[Symbol.toStringTag])}},Ph=Th,Nt=Ph});function Su(r,e=He){var n=`${gu()}${gu()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),o=[],s=`--${n}\r
Content-Disposition: form-data; name="`;return r.forEach((u,l)=>typeof u=="string"?o.push(s+_o(l)+`"\r
\r
${u.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):o.push(s+_o(l)+`"; filename="${_o(u.name,1)}"\r
Content-Type: ${u.type||"application/octet-stream"}\r
\r
`,u,`\r
`)),o.push(`--${n}--`),new e(o,{type:"multipart/form-data; boundary="+n})}var Sr,Ch,Ah,gu,Oh,wu,_o,gt,wt,Nn=ar(()=>{wr();yo();({toStringTag:Sr,iterator:Ch,hasInstance:Ah}=Symbol),gu=Math.random,Oh="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),wu=(r,e,n)=>(r+="",/^(Blob|File)$/.test(e&&e[Sr])?[(n=n!==void 0?n+"":e[Sr]=="File"?e.name:"blob",r),e.name!==n||e[Sr]=="blob"?new Nt([e],n,e):e]:[r,e+""]),_o=(r,e)=>(e?r:r.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),gt=(r,e,n)=>{if(e.length<n)throw new TypeError(`Failed to execute '${r}' on 'FormData': ${n} arguments required, but only ${e.length} present.`)},wt=class{#e=[];constructor(...e){if(e.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[Sr](){return"FormData"}[Ch](){return this.entries()}static[Ah](e){return e&&typeof e=="object"&&e[Sr]==="FormData"&&!Oh.some(n=>typeof e[n]!="function")}append(...e){gt("append",arguments,2),this.#e.push(wu(...e))}delete(e){gt("delete",arguments,1),e+="",this.#e=this.#e.filter(([n])=>n!==e)}get(e){gt("get",arguments,1),e+="";for(var n=this.#e,o=n.length,s=0;s<o;s++)if(n[s][0]===e)return n[s][1];return null}getAll(e,n){return gt("getAll",arguments,1),n=[],e+="",this.#e.forEach(o=>o[0]===e&&n.push(o[1])),n}has(e){return gt("has",arguments,1),e+="",this.#e.some(n=>n[0]===e)}forEach(e,n){gt("forEach",arguments,1);for(var[o,s]of this)e.call(n,s,o,this)}set(...e){gt("set",arguments,2);var n=[],o=!0;e=wu(...e),this.#e.forEach(s=>{s[0]===e[0]?o&&(o=!n.push(e)):n.push(s)}),o&&n.push(e),this.#e=n}*entries(){yield*this.#e}*keys(){for(var[e]of this)yield e}*values(){for(var[,e]of this)yield e}}});var Pu=q((Xm,Tu)=>{if(!globalThis.DOMException)try{let{MessageChannel:r}=require("worker_threads"),e=new r().port1,n=new ArrayBuffer;e.postMessage(n,[n,n])}catch(r){r.constructor.name==="DOMException"&&(globalThis.DOMException=r.constructor)}Tu.exports=globalThis.DOMException});var Rr,Cu,qh,zn,go=ar(()=>{Rr=require("node:fs"),Cu=ee(Pu(),1);yo();wr();({stat:qh}=Rr.promises),zn=class{#e;#t;constructor(e){this.#e=e.path,this.#t=e.start,this.size=e.size,this.lastModified=e.lastModified}slice(e,n){return new zn({path:this.#e,lastModified:this.lastModified,size:n-e,start:this.#t+e})}async*stream(){let{mtimeMs:e}=await qh(this.#e);if(e>this.lastModified)throw new Cu.default("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*(0,Rr.createReadStream)(this.#e,{start:this.#t,end:this.#t+this.size-1})}get[Symbol.toStringTag](){return"Blob"}}});var Ou={};Cf(Ou,{toFormData:()=>Wh});function Mh(r){let e=r.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!e)return;let n=e[2]||e[3]||"",o=n.slice(n.lastIndexOf("\\")+1);return o=o.replace(/%22/g,'"'),o=o.replace(/&#(\d{4});/g,(s,u)=>String.fromCharCode(u)),o}async function Wh(r,e){if(!/multipart/i.test(e))throw new TypeError("Failed to fetch");let n=e.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!n)throw new TypeError("no or bad content-type header, no multipart boundary");let o=new wo(n[1]||n[2]),s,u,l,h,c,d,p=[],y=new wt,g=W=>{l+=M.decode(W,{stream:!0})},w=W=>{p.push(W)},S=()=>{let W=new Nt(p,d,{type:c});y.append(h,W)},B=()=>{y.append(h,l)},M=new TextDecoder("utf-8");M.decode(),o.onPartBegin=function(){o.onPartData=g,o.onPartEnd=B,s="",u="",l="",h="",c="",d=null,p.length=0},o.onHeaderField=function(W){s+=M.decode(W,{stream:!0})},o.onHeaderValue=function(W){u+=M.decode(W,{stream:!0})},o.onHeaderEnd=function(){if(u+=M.decode(),s=s.toLowerCase(),s==="content-disposition"){let W=u.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);W&&(h=W[2]||W[3]||""),d=Mh(u),d&&(o.onPartData=w,o.onPartEnd=S)}else s==="content-type"&&(c=u);u="",s=""};for await(let W of r)o.write(W);return o.end(),y}var xe,U,Au,lt,Hn,Vn,Dh,Er,Bh,Ih,kh,xh,St,wo,qu=ar(()=>{go();Nn();xe=0,U={START_BOUNDARY:xe++,HEADER_FIELD_START:xe++,HEADER_FIELD:xe++,HEADER_VALUE_START:xe++,HEADER_VALUE:xe++,HEADER_VALUE_ALMOST_DONE:xe++,HEADERS_ALMOST_DONE:xe++,PART_DATA_START:xe++,PART_DATA:xe++,END:xe++},Au=1,lt={PART_BOUNDARY:Au,LAST_BOUNDARY:Au*=2},Hn=10,Vn=13,Dh=32,Er=45,Bh=58,Ih=97,kh=122,xh=r=>r|32,St=()=>{},wo=class{constructor(e){this.index=0,this.flags=0,this.onHeaderEnd=St,this.onHeaderField=St,this.onHeadersEnd=St,this.onHeaderValue=St,this.onPartBegin=St,this.onPartData=St,this.onPartEnd=St,this.boundaryChars={},e=`\r
--`+e;let n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o),this.boundaryChars[n[o]]=!0;this.boundary=n,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=U.START_BOUNDARY}write(e){let n=0,o=e.length,s=this.index,{lookbehind:u,boundary:l,boundaryChars:h,index:c,state:d,flags:p}=this,y=this.boundary.length,g=y-1,w=e.length,S,B,M=I=>{this[I+"Mark"]=n},W=I=>{delete this[I+"Mark"]},N=(I,H,F,Ge)=>{(H===void 0||H!==F)&&this[I](Ge&&Ge.subarray(H,F))},ne=(I,H)=>{let F=I+"Mark";F in this&&(H?(N(I,this[F],n,e),delete this[F]):(N(I,this[F],e.length,e),this[F]=0))};for(n=0;n<o;n++)switch(S=e[n],d){case U.START_BOUNDARY:if(c===l.length-2){if(S===Er)p|=lt.LAST_BOUNDARY;else if(S!==Vn)return;c++;break}else if(c-1===l.length-2){if(p&lt.LAST_BOUNDARY&&S===Er)d=U.END,p=0;else if(!(p&lt.LAST_BOUNDARY)&&S===Hn)c=0,N("onPartBegin"),d=U.HEADER_FIELD_START;else return;break}S!==l[c+2]&&(c=-2),S===l[c+2]&&c++;break;case U.HEADER_FIELD_START:d=U.HEADER_FIELD,M("onHeaderField"),c=0;case U.HEADER_FIELD:if(S===Vn){W("onHeaderField"),d=U.HEADERS_ALMOST_DONE;break}if(c++,S===Er)break;if(S===Bh){if(c===1)return;ne("onHeaderField",!0),d=U.HEADER_VALUE_START;break}if(B=xh(S),B<Ih||B>kh)return;break;case U.HEADER_VALUE_START:if(S===Dh)break;M("onHeaderValue"),d=U.HEADER_VALUE;case U.HEADER_VALUE:S===Vn&&(ne("onHeaderValue",!0),N("onHeaderEnd"),d=U.HEADER_VALUE_ALMOST_DONE);break;case U.HEADER_VALUE_ALMOST_DONE:if(S!==Hn)return;d=U.HEADER_FIELD_START;break;case U.HEADERS_ALMOST_DONE:if(S!==Hn)return;N("onHeadersEnd"),d=U.PART_DATA_START;break;case U.PART_DATA_START:d=U.PART_DATA,M("onPartData");case U.PART_DATA:if(s=c,c===0){for(n+=g;n<w&&!(e[n]in h);)n+=y;n-=g,S=e[n]}if(c<l.length)l[c]===S?(c===0&&ne("onPartData",!0),c++):c=0;else if(c===l.length)c++,S===Vn?p|=lt.PART_BOUNDARY:S===Er?p|=lt.LAST_BOUNDARY:c=0;else if(c-1===l.length)if(p&lt.PART_BOUNDARY){if(c=0,S===Hn){p&=~lt.PART_BOUNDARY,N("onPartEnd"),N("onPartBegin"),d=U.HEADER_FIELD_START;break}}else p&lt.LAST_BOUNDARY&&S===Er?(N("onPartEnd"),d=U.END,p=0):c=0;if(c>0)u[c-1]=S;else if(s>0){let I=new Uint8Array(u.buffer,u.byteOffset,u.byteLength);N("onPartData",0,s,I),s=0,M("onPartData"),n--}break;case U.END:break;default:throw new Error(`Unexpected state entered: ${d}`)}ne("onHeaderField"),ne("onHeaderValue"),ne("onPartData"),this.index=c,this.state=d,this.flags=p}end(){if(this.state===U.HEADER_FIELD_START&&this.index===0||this.state===U.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==U.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var Eo=ee(sa()),Ht=ee(Dn()),To=ee(require("fs")),Gu=ee(require("os")),Xn=ee(require("path"));var gh={Date:!0,RegExp:!0,String:!0,Number:!0};function Bn(r,e,n={cyclesFix:!0},o=[]){let s=[],u=Array.isArray(r);for(let h in r){let c=r[h],d=u?+h:h;if(!(h in e)){s.push({type:"REMOVE",path:[d],oldValue:r[h]});continue}let p=e[h],y=typeof c=="object"&&typeof p=="object";if(c&&p&&y&&!gh[Object.getPrototypeOf(c).constructor.name]&&(!n.cyclesFix||!o.includes(c))){let g=Bn(c,p,n,n.cyclesFix?o.concat([c]):[]);s.push.apply(s,g.map(w=>(w.path.unshift(d),w)))}else c!==p&&!(y&&(isNaN(c)?c+""==p+"":+c==+p))&&s.push({path:[d],type:"CHANGE",value:p,oldValue:c})}let l=Array.isArray(e);for(let h in e)h in r||s.push({type:"CREATE",path:[l?+h:h],value:e[h]});return s}var Qu=ee(Dn());var du=ee(nu(),1);var dr=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},ao=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}},iu=r=>globalThis.DOMException===void 0?new ao(r):new DOMException(r),ou=r=>{let e=r.reason===void 0?iu("This operation was aborted."):r.reason;return e instanceof Error?e:iu(e)};function uo(r,e,n,o){let s,u=new Promise((l,h)=>{if(typeof e!="number"||Math.sign(e)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${e}\``);if(e===Number.POSITIVE_INFINITY){l(r);return}if(o={customTimers:{setTimeout,clearTimeout},...o},o.signal){let{signal:c}=o;c.aborted&&h(ou(c)),c.addEventListener("abort",()=>{h(ou(c))})}s=o.customTimers.setTimeout.call(void 0,()=>{if(typeof n=="function"){try{l(n())}catch(p){h(p)}return}let c=typeof n=="string"?n:`Promise timed out after ${e} milliseconds`,d=n instanceof Error?n:new dr(c);typeof r.cancel=="function"&&r.cancel(),h(d)},e),(async()=>{try{l(await r)}catch(c){h(c)}finally{o.customTimers.clearTimeout.call(void 0,s)}})()});return u.clear=()=>{clearTimeout(s),s=void 0},u}function lo(r,e,n){let o=0,s=r.length;for(;s>0;){let u=Math.trunc(s/2),l=o+u;n(r[l],e)<=0?(o=++l,s-=u+1):s=u}return o}var bt=function(r,e,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!o:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(r):o?o.value:e.get(r)},ze,hr=class{constructor(){ze.set(this,[])}enqueue(e,n){n={priority:0,...n};let o={priority:n.priority,run:e};if(this.size&&bt(this,ze,"f")[this.size-1].priority>=n.priority){bt(this,ze,"f").push(o);return}let s=lo(bt(this,ze,"f"),o,(u,l)=>l.priority-u.priority);bt(this,ze,"f").splice(s,0,o)}dequeue(){let e=bt(this,ze,"f").shift();return e==null?void 0:e.run}filter(e){return bt(this,ze,"f").filter(n=>n.priority===e.priority).map(n=>n.run)}get size(){return bt(this,ze,"f").length}};ze=new WeakMap;var j=function(r,e,n,o,s){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?s.call(r,n):s?s.value=n:e.set(r,n),n},R=function(r,e,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!o:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(r):o?o.value:e.get(r)},V,pr,yr,ut,Ln,_r,kn,qe,mr,me,xn,pe,br,at,Mn,su,au,cu,uu,lu,fu,Wn,fo,co,$n,Fn,vh=new dr,ho=class extends Error{},gr=class extends du.default{constructor(e){var n,o,s,u;if(super(),V.add(this),pr.set(this,void 0),yr.set(this,void 0),ut.set(this,0),Ln.set(this,void 0),_r.set(this,void 0),kn.set(this,0),qe.set(this,void 0),mr.set(this,void 0),me.set(this,void 0),xn.set(this,void 0),pe.set(this,0),br.set(this,void 0),at.set(this,void 0),Mn.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:hr,...e},!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(o=(n=e.intervalCap)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(u=(s=e.interval)===null||s===void 0?void 0:s.toString())!==null&&u!==void 0?u:""}\` (${typeof e.interval})`);j(this,pr,e.carryoverConcurrencyCount,"f"),j(this,yr,e.intervalCap===Number.POSITIVE_INFINITY||e.interval===0,"f"),j(this,Ln,e.intervalCap,"f"),j(this,_r,e.interval,"f"),j(this,me,new e.queueClass,"f"),j(this,xn,e.queueClass,"f"),this.concurrency=e.concurrency,this.timeout=e.timeout,j(this,Mn,e.throwOnTimeout===!0,"f"),j(this,at,e.autoStart===!1,"f")}get concurrency(){return R(this,br,"f")}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);j(this,br,e,"f"),R(this,V,"m",$n).call(this)}async add(e,n={}){return new Promise((o,s)=>{let u=async()=>{var l,h,c;j(this,pe,(h=R(this,pe,"f"),h++,h),"f"),j(this,ut,(c=R(this,ut,"f"),c++,c),"f");try{if(!((l=n.signal)===null||l===void 0)&&l.aborted){s(new ho("The task was aborted."));return}let p=await(this.timeout===void 0&&n.timeout===void 0?e({signal:n.signal}):uo(Promise.resolve(e({signal:n.signal})),n.timeout===void 0?this.timeout:n.timeout,()=>{(n.throwOnTimeout===void 0?R(this,Mn,"f"):n.throwOnTimeout)&&s(vh)}));o(p),this.emit("completed",p)}catch(d){s(d),this.emit("error",d)}R(this,V,"m",cu).call(this)};R(this,me,"f").enqueue(u,n),R(this,V,"m",Wn).call(this),this.emit("add")})}async addAll(e,n){return Promise.all(e.map(async o=>this.add(o,n)))}start(){return R(this,at,"f")?(j(this,at,!1,"f"),R(this,V,"m",$n).call(this),this):this}pause(){j(this,at,!0,"f")}clear(){j(this,me,new(R(this,xn,"f")),"f")}async onEmpty(){R(this,me,"f").size!==0&&await R(this,V,"m",Fn).call(this,"empty")}async onSizeLessThan(e){R(this,me,"f").size<e||await R(this,V,"m",Fn).call(this,"next",()=>R(this,me,"f").size<e)}async onIdle(){R(this,pe,"f")===0&&R(this,me,"f").size===0||await R(this,V,"m",Fn).call(this,"idle")}get size(){return R(this,me,"f").size}sizeBy(e){return R(this,me,"f").filter(e).length}get pending(){return R(this,pe,"f")}get isPaused(){return R(this,at,"f")}};pr=new WeakMap,yr=new WeakMap,ut=new WeakMap,Ln=new WeakMap,_r=new WeakMap,kn=new WeakMap,qe=new WeakMap,mr=new WeakMap,me=new WeakMap,xn=new WeakMap,pe=new WeakMap,br=new WeakMap,at=new WeakMap,Mn=new WeakMap,V=new WeakSet,su=function(){return R(this,yr,"f")||R(this,ut,"f")<R(this,Ln,"f")},au=function(){return R(this,pe,"f")<R(this,br,"f")},cu=function(){var e;j(this,pe,(e=R(this,pe,"f"),e--,e),"f"),R(this,V,"m",Wn).call(this),this.emit("next")},uu=function(){this.emit("empty"),R(this,pe,"f")===0&&this.emit("idle")},lu=function(){R(this,V,"m",co).call(this),R(this,V,"m",fo).call(this),j(this,mr,void 0,"f")},fu=function(){let e=Date.now();if(R(this,qe,"f")===void 0){let n=R(this,kn,"f")-e;if(n<0)j(this,ut,R(this,pr,"f")?R(this,pe,"f"):0,"f");else return R(this,mr,"f")===void 0&&j(this,mr,setTimeout(()=>{R(this,V,"m",lu).call(this)},n),"f"),!0}return!1},Wn=function(){if(R(this,me,"f").size===0)return R(this,qe,"f")&&clearInterval(R(this,qe,"f")),j(this,qe,void 0,"f"),R(this,V,"m",uu).call(this),!1;if(!R(this,at,"f")){let e=!R(this,V,"a",fu);if(R(this,V,"a",su)&&R(this,V,"a",au)){let n=R(this,me,"f").dequeue();return n?(this.emit("active"),n(),e&&R(this,V,"m",fo).call(this),!0):!1}}return!1},fo=function(){R(this,yr,"f")||R(this,qe,"f")!==void 0||(j(this,qe,setInterval(()=>{R(this,V,"m",co).call(this)},R(this,_r,"f")),"f"),j(this,kn,Date.now()+R(this,_r,"f"),"f"))},co=function(){R(this,ut,"f")===0&&R(this,pe,"f")===0&&R(this,qe,"f")&&(clearInterval(R(this,qe,"f")),j(this,qe,void 0,"f")),j(this,ut,R(this,pr,"f")?R(this,pe,"f"):0,"f"),R(this,V,"m",$n).call(this)},$n=function(){for(;R(this,V,"m",Wn).call(this););},Fn=async function(e,n){return new Promise(o=>{let s=()=>{n&&!n()||(this.off(e,s),o())};this.on(e,s)})};var Hu=ee(require("node:http"),1),Vu=ee(require("node:https"),1),vt=ee(require("node:zlib"),1),_e=ee(require("node:stream"),1),Cr=require("node:buffer");function Rh(r){if(!/^data:/i.test(r))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');r=r.replace(/\r?\n/g,"");let e=r.indexOf(",");if(e===-1||e<=4)throw new TypeError("malformed data: URI");let n=r.substring(5,e).split(";"),o="",s=!1,u=n[0]||"text/plain",l=u;for(let p=1;p<n.length;p++)n[p]==="base64"?s=!0:(l+=`;${n[p]}`,n[p].indexOf("charset=")===0&&(o=n[p].substring(8)));!n[0]&&!o.length&&(l+=";charset=US-ASCII",o="US-ASCII");let h=s?"base64":"ascii",c=unescape(r.substring(e+1)),d=Buffer.from(c,h);return d.type=u,d.typeFull=l,d.charset=o,d}var hu=Rh;var Re=ee(require("node:stream"),1),Qe=require("node:util"),ye=require("node:buffer");wr();Nn();var Ve=class extends Error{constructor(e,n){super(e),Error.captureStackTrace(this,this.constructor),this.type=n}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var le=class extends Ve{constructor(e,n,o){super(e,n),o&&(this.code=this.errno=o.code,this.erroredSysCall=o.syscall)}};var jn=Symbol.toStringTag,bo=r=>typeof r=="object"&&typeof r.append=="function"&&typeof r.delete=="function"&&typeof r.get=="function"&&typeof r.getAll=="function"&&typeof r.has=="function"&&typeof r.set=="function"&&typeof r.sort=="function"&&r[jn]==="URLSearchParams",vr=r=>r&&typeof r=="object"&&typeof r.arrayBuffer=="function"&&typeof r.type=="string"&&typeof r.stream=="function"&&typeof r.constructor=="function"&&/^(Blob|File)$/.test(r[jn]),vu=r=>typeof r=="object"&&(r[jn]==="AbortSignal"||r[jn]==="EventTarget"),Ru=(r,e)=>{let n=new URL(e).hostname,o=new URL(r).hostname;return n===o||n.endsWith(`.${o}`)},Eu=(r,e)=>{let n=new URL(e).protocol,o=new URL(r).protocol;return n===o};var Fh=(0,Qe.promisify)(Re.default.pipeline),fe=Symbol("Body internals"),Me=class{constructor(e,{size:n=0}={}){let o=null;e===null?e=null:bo(e)?e=ye.Buffer.from(e.toString()):vr(e)||ye.Buffer.isBuffer(e)||(Qe.types.isAnyArrayBuffer(e)?e=ye.Buffer.from(e):ArrayBuffer.isView(e)?e=ye.Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof Re.default||(e instanceof wt?(e=Su(e),o=e.type.split("=")[1]):e=ye.Buffer.from(String(e))));let s=e;ye.Buffer.isBuffer(e)?s=Re.default.Readable.from(e):vr(e)&&(s=Re.default.Readable.from(e.stream())),this[fe]={body:e,stream:s,boundary:o,disturbed:!1,error:null},this.size=n,e instanceof Re.default&&e.on("error",u=>{let l=u instanceof Ve?u:new le(`Invalid response body while trying to fetch ${this.url}: ${u.message}`,"system",u);this[fe].error=l})}get body(){return this[fe].stream}get bodyUsed(){return this[fe].disturbed}async arrayBuffer(){let{buffer:e,byteOffset:n,byteLength:o}=await So(this);return e.slice(n,n+o)}async formData(){let e=this.headers.get("content-type");if(e.startsWith("application/x-www-form-urlencoded")){let o=new wt,s=new URLSearchParams(await this.text());for(let[u,l]of s)o.append(u,l);return o}let{toFormData:n}=await Promise.resolve().then(()=>(qu(),Ou));return n(this.body,e)}async blob(){let e=this.headers&&this.headers.get("content-type")||this[fe].body&&this[fe].body.type||"",n=await this.arrayBuffer();return new He([n],{type:e})}async json(){let e=await this.text();return JSON.parse(e)}async text(){let e=await So(this);return new TextDecoder().decode(e)}buffer(){return So(this)}};Me.prototype.buffer=(0,Qe.deprecate)(Me.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(Me.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,Qe.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function So(r){if(r[fe].disturbed)throw new TypeError(`body used already for: ${r.url}`);if(r[fe].disturbed=!0,r[fe].error)throw r[fe].error;let{body:e}=r;if(e===null)return ye.Buffer.alloc(0);if(!(e instanceof Re.default))return ye.Buffer.alloc(0);let n=[],o=0;try{for await(let s of e){if(r.size>0&&o+s.length>r.size){let u=new le(`content size at ${r.url} over limit: ${r.size}`,"max-size");throw e.destroy(u),u}o+=s.length,n.push(s)}}catch(s){throw s instanceof Ve?s:new le(`Invalid response body while trying to fetch ${r.url}: ${s.message}`,"system",s)}if(e.readableEnded===!0||e._readableState.ended===!0)try{return n.every(s=>typeof s=="string")?ye.Buffer.from(n.join("")):ye.Buffer.concat(n,o)}catch(s){throw new le(`Could not create Buffer from response body for ${r.url}: ${s.message}`,"system",s)}else throw new le(`Premature close of server response while trying to fetch ${r.url}`)}var jt=(r,e)=>{let n,o,{body:s}=r[fe];if(r.bodyUsed)throw new Error("cannot clone body after it is used");return s instanceof Re.default&&typeof s.getBoundary!="function"&&(n=new Re.PassThrough({highWaterMark:e}),o=new Re.PassThrough({highWaterMark:e}),s.pipe(n),s.pipe(o),r[fe].stream=n,s=o),s},Lh=(0,Qe.deprecate)(r=>r.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),Qn=(r,e)=>r===null?null:typeof r=="string"?"text/plain;charset=UTF-8":bo(r)?"application/x-www-form-urlencoded;charset=UTF-8":vr(r)?r.type||null:ye.Buffer.isBuffer(r)||Qe.types.isAnyArrayBuffer(r)||ArrayBuffer.isView(r)?null:r instanceof wt?`multipart/form-data; boundary=${e[fe].boundary}`:r&&typeof r.getBoundary=="function"?`multipart/form-data;boundary=${Lh(r)}`:r instanceof Re.default?null:"text/plain;charset=UTF-8",Du=r=>{let{body:e}=r[fe];return e===null?0:vr(e)?e.size:ye.Buffer.isBuffer(e)?e.length:e&&typeof e.getLengthSync=="function"&&e.hasKnownLength&&e.hasKnownLength()?e.getLengthSync():null},Bu=async(r,{body:e})=>{e===null?r.end():await Fh(e,r)};var vo=require("node:util"),Tr=ee(require("node:http"),1),Yn=typeof Tr.default.validateHeaderName=="function"?Tr.default.validateHeaderName:r=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(r)){let e=new TypeError(`Header name must be a valid HTTP token [${r}]`);throw Object.defineProperty(e,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),e}},Ro=typeof Tr.default.validateHeaderValue=="function"?Tr.default.validateHeaderValue:(r,e)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(e)){let n=new TypeError(`Invalid character in header content ["${r}"]`);throw Object.defineProperty(n,"code",{value:"ERR_INVALID_CHAR"}),n}},ce=class extends URLSearchParams{constructor(e){let n=[];if(e instanceof ce){let o=e.raw();for(let[s,u]of Object.entries(o))n.push(...u.map(l=>[s,l]))}else if(e!=null)if(typeof e=="object"&&!vo.types.isBoxedPrimitive(e)){let o=e[Symbol.iterator];if(o==null)n.push(...Object.entries(e));else{if(typeof o!="function")throw new TypeError("Header pairs must be iterable");n=[...e].map(s=>{if(typeof s!="object"||vo.types.isBoxedPrimitive(s))throw new TypeError("Each header pair must be an iterable object");return[...s]}).map(s=>{if(s.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...s]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return n=n.length>0?n.map(([o,s])=>(Yn(o),Ro(o,String(s)),[String(o).toLowerCase(),String(s)])):void 0,super(n),new Proxy(this,{get(o,s,u){switch(s){case"append":case"set":return(l,h)=>(Yn(l),Ro(l,String(h)),URLSearchParams.prototype[s].call(o,String(l).toLowerCase(),String(h)));case"delete":case"has":case"getAll":return l=>(Yn(l),URLSearchParams.prototype[s].call(o,String(l).toLowerCase()));case"keys":return()=>(o.sort(),new Set(URLSearchParams.prototype.keys.call(o)).keys());default:return Reflect.get(o,s,u)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(e){let n=this.getAll(e);if(n.length===0)return null;let o=n.join(", ");return/^content-encoding$/i.test(e)&&(o=o.toLowerCase()),o}forEach(e,n=void 0){for(let o of this.keys())Reflect.apply(e,n,[this.get(o),o,this])}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((e,n)=>(e[n]=this.getAll(n),e),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((e,n)=>{let o=this.getAll(n);return n==="host"?e[n]=o[0]:e[n]=o.length>1?o:o[0],e},{})}};Object.defineProperties(ce.prototype,["get","entries","forEach","values"].reduce((r,e)=>(r[e]={enumerable:!0},r),{}));function Iu(r=[]){return new ce(r.reduce((e,n,o,s)=>(o%2===0&&e.push(s.slice(o,o+2)),e),[]).filter(([e,n])=>{try{return Yn(e),Ro(e,String(n)),!0}catch{return!1}}))}var $h=new Set([301,302,303,307,308]),Gn=r=>$h.has(r);var De=Symbol("Response internals"),X=class extends Me{constructor(e=null,n={}){super(e,n);let o=n.status!=null?n.status:200,s=new ce(n.headers);if(e!==null&&!s.has("Content-Type")){let u=Qn(e,this);u&&s.append("Content-Type",u)}this[De]={type:"default",url:n.url,status:o,statusText:n.statusText||"",headers:s,counter:n.counter,highWaterMark:n.highWaterMark}}get type(){return this[De].type}get url(){return this[De].url||""}get status(){return this[De].status}get ok(){return this[De].status>=200&&this[De].status<300}get redirected(){return this[De].counter>0}get statusText(){return this[De].statusText}get headers(){return this[De].headers}get highWaterMark(){return this[De].highWaterMark}clone(){return new X(jt(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(e,n=302){if(!Gn(n))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new X(null,{headers:{location:new URL(e).toString()},status:n})}static error(){let e=new X(null,{status:0,statusText:""});return e[De].type="error",e}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(X.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var Nu=require("node:url"),ju=require("node:util");var ku=r=>{if(r.search)return r.search;let e=r.href.length-1,n=r.hash||(r.href[e]==="#"?"#":"");return r.href[e-n.length]==="?"?"?":""};var Mu=require("node:net");function xu(r,e=!1){return r==null||(r=new URL(r),/^(about|blob|data):$/.test(r.protocol))?"no-referrer":(r.username="",r.password="",r.hash="",e&&(r.pathname="",r.search=""),r)}var Wu=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),Fu="strict-origin-when-cross-origin";function Lu(r){if(!Wu.has(r))throw new TypeError(`Invalid referrerPolicy: ${r}`);return r}function Uh(r){if(/^(http|ws)s:$/.test(r.protocol))return!0;let e=r.host.replace(/(^\[)|(]$)/g,""),n=(0,Mu.isIP)(e);return n===4&&/^127\./.test(e)||n===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(e)?!0:r.host==="localhost"||r.host.endsWith(".localhost")?!1:r.protocol==="file:"}function zt(r){return/^about:(blank|srcdoc)$/.test(r)||r.protocol==="data:"||/^(blob|filesystem):$/.test(r.protocol)?!0:Uh(r)}function $u(r,{referrerURLCallback:e,referrerOriginCallback:n}={}){if(r.referrer==="no-referrer"||r.referrerPolicy==="")return null;let o=r.referrerPolicy;if(r.referrer==="about:client")return"no-referrer";let s=r.referrer,u=xu(s),l=xu(s,!0);u.toString().length>4096&&(u=l),e&&(u=e(u)),n&&(l=n(l));let h=new URL(r.url);switch(o){case"no-referrer":return"no-referrer";case"origin":return l;case"unsafe-url":return u;case"strict-origin":return zt(u)&&!zt(h)?"no-referrer":l.toString();case"strict-origin-when-cross-origin":return u.origin===h.origin?u:zt(u)&&!zt(h)?"no-referrer":l;case"same-origin":return u.origin===h.origin?u:"no-referrer";case"origin-when-cross-origin":return u.origin===h.origin?u:l;case"no-referrer-when-downgrade":return zt(u)&&!zt(h)?"no-referrer":u;default:throw new TypeError(`Invalid referrerPolicy: ${o}`)}}function Uu(r){let e=(r.get("referrer-policy")||"").split(/[,\s]+/),n="";for(let o of e)o&&Wu.has(o)&&(n=o);return n}var G=Symbol("Request internals"),Pr=r=>typeof r=="object"&&typeof r[G]=="object",Nh=(0,ju.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),Ye=class extends Me{constructor(e,n={}){let o;if(Pr(e)?o=new URL(e.url):(o=new URL(e),e={}),o.username!==""||o.password!=="")throw new TypeError(`${o} is an url with embedded credentials.`);let s=n.method||e.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(s)&&(s=s.toUpperCase()),!Pr(n)&&"data"in n&&Nh(),(n.body!=null||Pr(e)&&e.body!==null)&&(s==="GET"||s==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let u=n.body?n.body:Pr(e)&&e.body!==null?jt(e):null;super(u,{size:n.size||e.size||0});let l=new ce(n.headers||e.headers||{});if(u!==null&&!l.has("Content-Type")){let d=Qn(u,this);d&&l.set("Content-Type",d)}let h=Pr(e)?e.signal:null;if("signal"in n&&(h=n.signal),h!=null&&!vu(h))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let c=n.referrer==null?e.referrer:n.referrer;if(c==="")c="no-referrer";else if(c){let d=new URL(c);c=/^about:(\/\/)?client$/.test(d)?"client":d}else c=void 0;this[G]={method:s,redirect:n.redirect||e.redirect||"follow",headers:l,parsedURL:o,signal:h,referrer:c},this.follow=n.follow===void 0?e.follow===void 0?20:e.follow:n.follow,this.compress=n.compress===void 0?e.compress===void 0?!0:e.compress:n.compress,this.counter=n.counter||e.counter||0,this.agent=n.agent||e.agent,this.highWaterMark=n.highWaterMark||e.highWaterMark||16384,this.insecureHTTPParser=n.insecureHTTPParser||e.insecureHTTPParser||!1,this.referrerPolicy=n.referrerPolicy||e.referrerPolicy||""}get method(){return this[G].method}get url(){return(0,Nu.format)(this[G].parsedURL)}get headers(){return this[G].headers}get redirect(){return this[G].redirect}get signal(){return this[G].signal}get referrer(){if(this[G].referrer==="no-referrer")return"";if(this[G].referrer==="client")return"about:client";if(this[G].referrer)return this[G].referrer.toString()}get referrerPolicy(){return this[G].referrerPolicy}set referrerPolicy(e){this[G].referrerPolicy=Lu(e)}clone(){return new Ye(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(Ye.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var zu=r=>{let{parsedURL:e}=r[G],n=new ce(r[G].headers);n.has("Accept")||n.set("Accept","*/*");let o=null;if(r.body===null&&/^(post|put)$/i.test(r.method)&&(o="0"),r.body!==null){let h=Du(r);typeof h=="number"&&!Number.isNaN(h)&&(o=String(h))}o&&n.set("Content-Length",o),r.referrerPolicy===""&&(r.referrerPolicy=Fu),r.referrer&&r.referrer!=="no-referrer"?r[G].referrer=$u(r):r[G].referrer="no-referrer",r[G].referrer instanceof URL&&n.set("Referer",r.referrer),n.has("User-Agent")||n.set("User-Agent","node-fetch"),r.compress&&!n.has("Accept-Encoding")&&n.set("Accept-Encoding","gzip, deflate, br");let{agent:s}=r;typeof s=="function"&&(s=s(e)),!n.has("Connection")&&!s&&n.set("Connection","close");let u=ku(e),l={path:e.pathname+u,method:r.method,headers:n[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:r.insecureHTTPParser,agent:s};return{parsedURL:e,options:l}};var Jn=class extends Ve{constructor(e,n="aborted"){super(e,n)}};Nn();go();var jh=new Set(["data:","http:","https:"]);async function Kn(r,e){return new Promise((n,o)=>{let s=new Ye(r,e),{parsedURL:u,options:l}=zu(s);if(!jh.has(u.protocol))throw new TypeError(`node-fetch cannot load ${r}. URL scheme "${u.protocol.replace(/:$/,"")}" is not supported.`);if(u.protocol==="data:"){let S=hu(s.url),B=new X(S,{headers:{"Content-Type":S.typeFull}});n(B);return}let h=(u.protocol==="https:"?Vu.default:Hu.default).request,{signal:c}=s,d=null,p=()=>{let S=new Jn("The operation was aborted.");o(S),s.body&&s.body instanceof _e.default.Readable&&s.body.destroy(S),!(!d||!d.body)&&d.body.emit("error",S)};if(c&&c.aborted){p();return}let y=()=>{p(),w()},g=h(u.toString(),l);c&&c.addEventListener("abort",y);let w=()=>{g.abort(),c&&c.removeEventListener("abort",y)};g.on("error",S=>{o(new le(`request to ${s.url} failed, reason: ${S.message}`,"system",S)),w()}),zh(g,S=>{d&&d.body&&d.body.destroy(S)}),process.version<"v14"&&g.on("socket",S=>{let B;S.prependListener("end",()=>{B=S._eventsCount}),S.prependListener("close",M=>{if(d&&B<S._eventsCount&&!M){let W=new Error("Premature close");W.code="ERR_STREAM_PREMATURE_CLOSE",d.body.emit("error",W)}})}),g.on("response",S=>{g.setTimeout(0);let B=Iu(S.rawHeaders);if(Gn(S.statusCode)){let I=B.get("Location"),H=null;try{H=I===null?null:new URL(I,s.url)}catch{if(s.redirect!=="manual"){o(new le(`uri requested responds with an invalid redirect URL: ${I}`,"invalid-redirect")),w();return}}switch(s.redirect){case"error":o(new le(`uri requested responds with a redirect, redirect mode is set to error: ${s.url}`,"no-redirect")),w();return;case"manual":break;case"follow":{if(H===null)break;if(s.counter>=s.follow){o(new le(`maximum redirect reached at: ${s.url}`,"max-redirect")),w();return}let F={headers:new ce(s.headers),follow:s.follow,counter:s.counter+1,agent:s.agent,compress:s.compress,method:s.method,body:jt(s),signal:s.signal,size:s.size,referrer:s.referrer,referrerPolicy:s.referrerPolicy};if(!Ru(s.url,H)||!Eu(s.url,H))for(let de of["authorization","www-authenticate","cookie","cookie2"])F.headers.delete(de);if(S.statusCode!==303&&s.body&&e.body instanceof _e.default.Readable){o(new le("Cannot follow redirect with body being a readable stream","unsupported-redirect")),w();return}(S.statusCode===303||(S.statusCode===301||S.statusCode===302)&&s.method==="POST")&&(F.method="GET",F.body=void 0,F.headers.delete("content-length"));let Ge=Uu(B);Ge&&(F.referrerPolicy=Ge),n(Kn(new Ye(H,F))),w();return}default:return o(new TypeError(`Redirect option '${s.redirect}' is not a valid value of RequestRedirect`))}}c&&S.once("end",()=>{c.removeEventListener("abort",y)});let M=(0,_e.pipeline)(S,new _e.PassThrough,I=>{I&&o(I)});process.version<"v12.10"&&S.on("aborted",y);let W={url:s.url,status:S.statusCode,statusText:S.statusMessage,headers:B,size:s.size,counter:s.counter,highWaterMark:s.highWaterMark},N=B.get("Content-Encoding");if(!s.compress||s.method==="HEAD"||N===null||S.statusCode===204||S.statusCode===304){d=new X(M,W),n(d);return}let ne={flush:vt.default.Z_SYNC_FLUSH,finishFlush:vt.default.Z_SYNC_FLUSH};if(N==="gzip"||N==="x-gzip"){M=(0,_e.pipeline)(M,vt.default.createGunzip(ne),I=>{I&&o(I)}),d=new X(M,W),n(d);return}if(N==="deflate"||N==="x-deflate"){let I=(0,_e.pipeline)(S,new _e.PassThrough,H=>{H&&o(H)});I.once("data",H=>{(H[0]&15)===8?M=(0,_e.pipeline)(M,vt.default.createInflate(),F=>{F&&o(F)}):M=(0,_e.pipeline)(M,vt.default.createInflateRaw(),F=>{F&&o(F)}),d=new X(M,W),n(d)}),I.once("end",()=>{d||(d=new X(M,W),n(d))});return}if(N==="br"){M=(0,_e.pipeline)(M,vt.default.createBrotliDecompress(),I=>{I&&o(I)}),d=new X(M,W),n(d);return}d=new X(M,W),n(d)}),Bu(g,s).catch(o)})}function zh(r,e){let n=Cr.Buffer.from(`0\r
\r
`),o=!1,s=!1,u;r.on("response",l=>{let{headers:h}=l;o=h["transfer-encoding"]==="chunked"&&!h["content-length"]}),r.on("socket",l=>{let h=()=>{if(o&&!s){let d=new Error("Premature close");d.code="ERR_STREAM_PREMATURE_CLOSE",e(d)}},c=d=>{s=Cr.Buffer.compare(d.slice(-5),n)===0,!s&&u&&(s=Cr.Buffer.compare(u.slice(-3),n.slice(0,3))===0&&Cr.Buffer.compare(d.slice(-2),n.slice(3))===0),u=d};l.prependListener("close",h),l.on("data",c),r.on("close",()=>{l.removeListener("close",h),l.removeListener("data",c)})})}async function Yu(r){let e=s=>Kn(`https://${r.shop}/admin/api/2023-01/themes/${r.themeId}/assets.json?asset[key]=${s}`,{method:"DELETE",headers:{"User-Agent":"Juno Theme Action","X-Shopify-Access-Token":r.password}}),n=new gr({concurrency:2}),o=0;n.on("next",()=>{console.log(`${o+1}/${r.files.length} | Deleting [${r.files[o]}]`),o++});for(let s of r.files)n.add(()=>e(s));await n.onIdle()}function Ar(r){Qu.info(`
==============================
${r}
==============================
`)}async function Hh(){if(!process.env.THEME_ROOT)throw new Error("Missing [THEME_ROOT] environment variable");if(!process.env.BUILD_MANIFEST)throw new Error("Missing [BUILD_MANIFEST] environment variable");let r=process.env.BUILD_MANIFEST,e=process.env.THEME_ROOT;Ar("Download previous build manifest file");let n="{}";try{let c=Xn.default.join(Gu.default.tmpdir(),"theme-deploy");await Eo.exec(`shopify theme pull ${c}`,[`--theme=${process.env.SHOPIFY_THEME_ID}`,`--only=${r}`]),n=To.default.readFileSync(Xn.default.join(c,r),"utf-8")}catch(c){Ht.warning(c)}let o=JSON.parse(n);Ar("Calculate diff");let s=JSON.parse(To.default.readFileSync(Xn.default.join(e,r),"utf-8")),u=Bn(o,s);if(u.length===0){Ht.notice("No file changes detected for this store");return}let l=u.filter(({type:c})=>["CHANGE","CREATE"].includes(c)).map(({path:[c]})=>c).concat([r]);l.length&&(Ar("Upload files"),await Eo.exec(`shopify theme push ${e}`,["--allow-live","--nodelete",`--theme=${process.env.SHOPIFY_THEME_ID}`,...l.map(c=>`--only=${c}`)]));let h=u.filter(({type:c})=>c==="REMOVE").map(({path:[c]})=>c);h.length&&(Ar("Remove files"),await Yu({shop:process.env.SHOPIFY_SHOP,password:process.env.SHOPIFY_PASSWORD,themeId:process.env.SHOPIFY_THEME_ID,files:h}))}try{Hh()}catch(r){Ht.setFailed(r)}
/*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */
/*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */
/*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */
